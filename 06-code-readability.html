<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Tools and practices for FAIR research software: Code readability</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-warning">
          <abbr title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
              Alpha
            </a>
            <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/06-code-readability.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Tools and practices for FAIR research software
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Tools and practices for FAIR research software
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="test-suite-exercise.html">Implementing a test suite</a></li><li><a class="dropdown-item" href="ci-for-testing.html">Continuous Integration for automated testing</a></li><li><a class="dropdown-item" href="licensing.html">Software licensing</a></li><li><a class="dropdown-item" href="ethical-environmental-considerations.html">Ethical &amp; environmental considerations around research software</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Tools and practices for FAIR research software
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 39%" class="percentage">
    39%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 39%" aria-valuenow="39" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/06-code-readability.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Course introduction</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-fair-research-software.html">2. FAIR research software</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-tools.html">3. Tools and practices for FAIR research software development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-version-control.html">4. Version control</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-code-environment.html">5. Reproducible development environment</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        6. Code readability
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#place-import-statements-at-the-top">Place <code>import</code> statements at the top</a></li>
<li><a href="#use-meaningful-variable-names">Use meaningful variable names</a></li>
<li><a href="#use-standard-libraries">Use standard libraries</a></li>
<li><a href="#use-comments-to-explain-functionality">Use comments to explain functionality</a></li>
<li><a href="#separate-units-of-functionality">Separate units of functionality</a></li>
<li><a href="#use-docstrings-to-document-functions">Use docstrings to document functions</a></li>
<li><a href="#further-reading">Further reading</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-code-structure.html">7. Code structure</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-code-correctness.html">8. Code correctness</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-code-documentation.html">9. Code documentation</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-open-collaboration.html">10. Open code &amp; collaboration</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-wrap-up.html">11. Wrap-up</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="test-suite-exercise.html">Implementing a test suite</a></li><li><a href="ci-for-testing.html">Continuous Integration for automated testing</a></li><li><a href="licensing.html">Software licensing</a></li><li><a href="ethical-environmental-considerations.html">Ethical &amp; environmental considerations around research software</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="05-code-environment.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="07-code-structure.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="05-code-environment.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Reproducible
        </a>
        <a class="chapter-link float-end" href="07-code-structure.html" rel="next">
          Next: Code structure...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Code readability</h1>
        <p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/06-code-readability.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Why does code readability matter?</li>
<li>How can I organise my code to be more readable?</li>
<li>What types of documentation can I include to improve the readability
of my code?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul><li>Organise code into reusable functions that achieve a singular
purpose</li>
<li>Choose function and variable names that help explain the purpose of
the function or variable</li>
<li>Write informative comments and docstrings to provide more detail
about what the code is doing</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>In this episode, we will introduce the concept of readable code and
consider how it can help create reusable scientific software and empower
collaboration between researchers.</p>
<p>When someone writes code, they do so based on requirements that are
likely to change in the future. Requirements change because software
interacts with the real world, which is dynamic. When these requirements
change, the developer (who is not necessarily the same person who wrote
the original code) must implement the new requirements. They do this by
reading the original code to understand the different abstractions, and
identify what needs to change. Readable code facilitates the reading and
understanding of the abstraction phases and, as a result, facilitates
the evolution of the codebase. Readable code saves future developers’
time and effort.</p>
<p>In order to develop readable code, we should ask ourselves: “If I
re-read this piece of code in fifteen days or one year, will I be able
to understand what I have done and why?” Or even better: “If a new
person who just joined the project reads my software, will they be able
to understand what I have written here?”</p>
<p>We will now learn about a few software best practices we can follow
to help create more readable code.</p>
<div id="activate-your-virtual-environment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="activate-your-virtual-environment" class="callout-inner">
<h3 class="callout-title">Activate your virtual environment</h3>
<div class="callout-content">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>

<section><h2 class="section-heading" id="place-import-statements-at-the-top">Place <code>import</code> statements at the top<a class="anchor" aria-label="anchor" href="#place-import-statements-at-the-top"></a></h2>
<hr class="half-width"><p>Let’s have a look our code again - the first thing we may notice is
that our script currently places import statements throughout the code.
Conventionally, all import statements are placed at the top of the
script so that dependant libraries are clearly visible and not buried
inside the code (even though there are standard ways of describing
dependencies - e.g. using <code>requirements.txt</code> file). This will
help readability (accessibility) and reusability of our code.</p>
<p>Our code after the modification should look like the following.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span> </span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>fieldnames <span class="op">=</span> (<span class="st">"EVA #"</span>, <span class="st">"Country"</span>, <span class="st">"Crew    "</span>, <span class="st">"Vehicle"</span>, <span class="st">"Date"</span>, <span class="st">"Duration"</span>, <span class="st">"Purpose"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>    line<span class="op">=</span>data_f.readline()</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>w<span class="op">=</span>csv.writer(data_t)</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb2-52"><a href="#cb2-52" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb2-53"><a href="#cb2-53" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb2-55"><a href="#cb2-55" tabindex="-1"></a></span>
<span id="cb2-56"><a href="#cb2-56" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb2-57"><a href="#cb2-57" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb2-58"><a href="#cb2-58" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb2-59"><a href="#cb2-59" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb2-60"><a href="#cb2-60" tabindex="-1"></a>plt.savefig(g_file)</span>
<span id="cb2-61"><a href="#cb2-61" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Let’s make sure we commit our changes.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Move import statements to the top of the script"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="use-meaningful-variable-names">Use meaningful variable names<a class="anchor" aria-label="anchor" href="#use-meaningful-variable-names"></a></h2>
<hr class="half-width"><p>Variables are the most common thing you will assign when coding, and
it’s really important that it is clear what each variable means in order
to understand what the code is doing. If you return to your code after a
long time doing something else, or share your code with a colleague, it
should be easy enough to understand what variables are involved in your
code from their names. Therefore we need to give them clear names, but
we also want to keep them concise so the code stays readable. There are
no “hard and fast rules” here, and it’s often a case of using your best
judgment.</p>
<p>Some useful tips for naming variables are:</p>
<ul><li>Short words are better than single character names. For example, if
we were creating a variable to store the speed to read a file,
<code>s</code> (for ‘speed’) is not descriptive enough but
<code>MBReadPerSecondAverageAfterLastFlushToLog</code> is too long to
read and prone to misspellings. <code>ReadSpeed</code> (or
<code>read_speed</code>) would suffice.</li>
<li>If you are finding it difficult to come up with a variable name that
is both short and descriptive, go with the short version and use an
inline comment to describe it further (more on those in the next
section). This guidance does not necessarily apply if your variable is a
well-known constant in your domain - for example, <em>c</em> represents
the speed of light in physics.</li>
<li>Try to be descriptive where possible and avoid meaningless or funny
names like <code>foo</code>, <code>bar</code>, <code>var</code>,
<code>thing</code>, etc.</li>
</ul><p>There are also some restrictions to consider when naming variables in
Python:</p>
<ul><li>Only alphanumeric characters and underscores are permitted in
variable names.</li>
<li>You cannot begin your variable names with a numerical character as
this will raise a syntax error. Numerical characters can be included in
a variable name, just not as the first character. For example,
<code>read_speed1</code> is a valid variable name, but
<code>1read_speed</code> isn’t. (This behaviour may be different for
other programming languages.)</li>
<li>Variable names are case sensitive. So <code>speed_of_light</code>
and <code>Speed_Of_Light</code> are not the same.</li>
<li>Programming languages often have global pre-built functions, such as
<code>input</code>, which you may accidentally overwrite if you assign a
variable with the same name and no longer be able to access the original
<code>input</code> function. In this case, opting for something like
<code>input_data</code> would be preferable. Note that this behaviour
may be explicitly disallowed in other programming languages but is not
in Python.</li>
</ul><div id="give-a-descriptive-name-to-a-variable" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="give-a-descriptive-name-to-a-variable" class="callout-inner">
<h3 class="callout-title">Give a descriptive name to a variable</h3>
<div class="callout-content">
<p>Below we have a variable called <code>var</code> being set the value
of 9.81. <code>var</code> is not a very descriptive name here as it
doesn’t tell us what 9.81 means, yet it is a very common constant in
physics! Go online and find out which constant 9.81 relates to and
suggest a new name for this variable.</p>
<p>Hint: the units are <em>metres per second squared</em>!</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>var <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p><span class="math display">\[ 9.81 m/s^2 \]</span> is the <a href="https://en.wikipedia.org/wiki/Gravity_of_Earth" class="external-link">gravitational
force exerted by the Earth</a>. It is often referred to as “little g” to
distinguish it from “big G” which is the <a href="https://en.wikipedia.org/wiki/Gravitational_constant" class="external-link">Gravitational
Constant</a>. A more descriptive name for this variable therefore might
be:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>g_earth <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="rename-our-variables-to-be-more-descriptive" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="rename-our-variables-to-be-more-descriptive" class="callout-inner">
<h3 class="callout-title">Rename our variables to be more descriptive</h3>
<div class="callout-content">
<p>Let’s apply this to <code>eva_data_analysis.py</code>.</p>
<ol style="list-style-type: lower-alpha"><li>
<p>Edit the code as follows to use descriptive variable names:</p>
<ul><li>Change data_f to input_file</li>
<li>Change data_t to output_file</li>
<li>Change g_file to graph_file</li>
</ul></li>
<li><p>What other variable names in our code would benefit from
renaming?</p></li>
<li><p>Commit your changes to your repository. Remember to use an
informative commit message.</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Updated code:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>fieldnames <span class="op">=</span> (<span class="st">"EVA #"</span>, <span class="st">"Country"</span>, <span class="st">"Crew    "</span>, <span class="st">"Vehicle"</span>, <span class="st">"Date"</span>, <span class="st">"Duration"</span>, <span class="st">"Purpose"</span>)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>    line<span class="op">=</span>input_file.readline()</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>w<span class="op">=</span>csv.writer(output_file)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a></span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a></span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a></span>
<span id="cb6-56"><a href="#cb6-56" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb6-57"><a href="#cb6-57" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb6-58"><a href="#cb6-58" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb6-59"><a href="#cb6-59" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb6-60"><a href="#cb6-60" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb6-61"><a href="#cb6-61" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>We should also rename variables <code>w</code>, <code>t</code>,
<code>ttt</code> to be more descriptive.</p>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use descriptive variable names"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="use-standard-libraries">Use standard libraries<a class="anchor" aria-label="anchor" href="#use-standard-libraries"></a></h2>
<hr class="half-width"><p>Our script currently reads the data line-by-line from the JSON data
file and uses custom code to manipulate the data. Variables of interest
are stored in lists but there are more suitable data structures
(e.g. data frames) to store data in our case. By choosing custom code
over standard and well-tested libraries, we are making our code less
readable and understandable and more error-prone.</p>
<p>The main functionality of our code can be rewritten as follows using
the <code>Pandas</code> library to load and manipulate the data in data
frames.</p>
<p>First, we need to install this dependency into our virtual
environment (which should be active at this point).</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python <span class="at">-m</span> pip install pandas</span></code></pre>
</div>
<p>The code should now look like:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Data source: https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>plt.plot(eva_df[<span class="st">'date'</span>], eva_df[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>We should replace the existing code in our Python script
<code>eva_data_analysis.py</code> with the above code and commit the
changes. Remember to use an informative commit message.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Refactor code to use standard libraries"</span></span></code></pre>
</div>
<p>Make sure to capture the changes to your virtual development
environment too.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Added Pandas library."</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="use-comments-to-explain-functionality">Use comments to explain functionality<a class="anchor" aria-label="anchor" href="#use-comments-to-explain-functionality"></a></h2>
<hr class="half-width"><p>Commenting is a very useful practice to help convey the context of
the code. It can be helpful as a reminder for your future self or your
collaborators as to why code is written in a certain way, how it is
achieving a specific task, or the real-world implications of your
code.</p>
<p>There are several ways to add comments to code:</p>
<ul><li>An <strong>inline comment</strong> is a comment on the same line as
a code statement. Typically, it comes after the code statement and
finishes when the line ends and is useful when you want to explain the
code line in short. Inline comments in Python should be separated by at
least two spaces from the statement; they start with a # followed by a
single space, and have no end delimiter.</li>
<li>A <strong>multi-line</strong> or <strong>block comment</strong> can
span multiple lines and has a start and end sequence. To comment out a
block of code in Python, you can either add a # at the beginning of each
line of the block or surround the entire block with three single
(<code>'''</code>) or double quotes (<code>"""</code>).</li>
</ul><div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">5</span>  <span class="co"># In Python, inline comments begin with the `#` symbol and a single space.</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">This is a multiline</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">comment</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">in Python.</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">'''</span></span></code></pre>
</div>
<p>Here are a few things to keep in mind when commenting your code:</p>
<ul><li>Focus on the <strong>why</strong> and the <strong>how</strong> of
your code - avoid using comments to explain <strong>what</strong> your
code does. If your code is too complex for other programmers to
understand, consider rewriting it for clarity rather than adding
comments to explain it.</li>
<li>Make sure you are not reiterating something that your code already
conveys on its own. Comments should not echo your code.</li>
<li>Keep comments short and concise. Large blocks of text quickly become
unreadable and difficult to maintain.</li>
<li>Comments that contradict the code are worse than no comments. Always
make a priority of keeping comments up-to-date when code changes.</li>
</ul><div class="section level3">
<h3 id="examples-of-unhelpful-comments">Examples of unhelpful comments<a class="anchor" aria-label="anchor" href="#examples-of-unhelpful-comments"></a></h3>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># Assigns the float 1.0625 to the variable 'statetax'</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'citytax'</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'specialtax'</span></span></code></pre>
</div>
<p>The comments in this code simply tell us what the code does, which is
easy enough to figure out without the inline comments.</p>
</div>
<div class="section level3">
<h3 id="examples-of-helpful-comments">Examples of helpful comments<a class="anchor" aria-label="anchor" href="#examples-of-helpful-comments"></a></h3>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># State sales tax rate is 6.25% through Jan. 1</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># City sales tax rate is 1% through Jan. 1</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Special sales tax rate is 1% through Jan. 1</span></span></code></pre>
</div>
<p>In this case, it might not be immediately obvious what each variable
represents, so the comments offer helpful, real-world context. The date
in the comment also indicates when the code might need to be
updated.</p>
<div id="add-comments-to-our-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-comments-to-our-code" class="callout-inner">
<h3 class="callout-title">Add comments to our code</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha"><li>Examine <code>eva_data_analysis.py</code>. Add as many comments as
you think is required to help yourself and others understand what that
code is doing.</li>
<li>Commit your changes to your repository. Remember to use an
informative commit message.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Some good comments may look like the example below.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a>eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a>eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a>eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a><span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a>eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb15-25"><a href="#cb15-25" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb15-26"><a href="#cb15-26" tabindex="-1"></a>eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb15-27"><a href="#cb15-27" tabindex="-1"></a>eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb15-28"><a href="#cb15-28" tabindex="-1"></a>plt.plot(eva_df[<span class="st">'date'</span>], eva_df[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb15-29"><a href="#cb15-29" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb15-30"><a href="#cb15-30" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb15-31"><a href="#cb15-31" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-32"><a href="#cb15-32" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb15-33"><a href="#cb15-33" tabindex="-1"></a>plt.show()</span>
<span id="cb15-34"><a href="#cb15-34" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add inline comments to the code"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="separate-units-of-functionality">Separate units of functionality<a class="anchor" aria-label="anchor" href="#separate-units-of-functionality"></a></h2>
<hr class="half-width"><p>Functions are a fundamental concept in writing software and are one
of the core ways you can organise your code to improve its readability.
A function is an isolated section of code that performs a single,
<em>specific</em> task that can be simple or complex. It can then be
called multiple times with different inputs throughout a codebase, but
its definition only needs to appear once.</p>
<p>Breaking up code into functions in this manner benefits readability
since the smaller sections are easier to read and understand. Since
functions can be reused, codebases naturally begin to follow the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" class="external-link">Don’t
Repeat Yourself principle</a> which prevents software from becoming
overly long and confusing. The software also becomes easier to maintain
because, if the code encapsulated in a function needs to change, it only
needs updating in one place instead of many. As we will learn in a
future episode, testing code also becomes simpler when code is written
in functions. Each function can be individually checked to ensure it is
doing what is intended, which improves confidence in the software as a
whole.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Decomposing code into functions helps with reusability of blocks of
code and eliminating repetition, but, equally importantly, it helps with
code readability and testing.</p>
</div>
</div>
</div>
<p>Looking at our code, you may notice it contains different pieces of
functionality:</p>
<ol style="list-style-type: decimal"><li>reading the data from a JSON file</li>
<li>converting and saving the data in the CSV format</li>
<li>processing/cleaning the data and preparing it for analysis</li>
<li>data analysis and visualising the results</li>
</ol><p>Let’s refactor our code so that reading the data in JSON format into
a dataframe (step 1.) and converting it and saving to the CSV format
(step 2.) are extracted into separate functions. Let’s name those
functions <code>read_json_to_dataframe</code> and
<code>write_dataframe_to_csv</code> respectively. The main part of the
script should then be simplified to invoke these new functions, while
the functions themselves contain the complexity of each of these two
steps. We will continue to work on steps 3. and 4. above later on.</p>
<p>After the initial refactoring, our code may look something like the
following.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a></span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a><span class="co"># Read the data from JSON file</span></span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a><span class="co"># Convert and export data to CSV file</span></span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a></span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a>eva_data[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a>eva_data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb17-40"><a href="#cb17-40" tabindex="-1"></a>plt.plot(eva_data[<span class="st">'date'</span>], eva_data[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb17-41"><a href="#cb17-41" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb17-42"><a href="#cb17-42" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb17-43"><a href="#cb17-43" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb17-44"><a href="#cb17-44" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb17-45"><a href="#cb17-45" tabindex="-1"></a>plt.show()</span>
<span id="cb17-46"><a href="#cb17-46" tabindex="-1"></a></span>
<span id="cb17-47"><a href="#cb17-47" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>We have chosen to create functions for reading in and writing out
data files since this is a very common task within research software.
While these functions do not contain that many lines of code due to
using the <code>pandas</code> in-built methods that do all the complex
data reading, converting and writing operations, it can be useful to
package these steps together into reusable functions if you need to read
in or write out a lot of similarly structured files and process them in
the same way.</p>
</section><section><h2 class="section-heading" id="use-docstrings-to-document-functions">Use docstrings to document functions<a class="anchor" aria-label="anchor" href="#use-docstrings-to-document-functions"></a></h2>
<hr class="half-width"><p>Now that we have written some functions, it is time to document them
so that we can quickly recall (and others looking at our code in the
future can understand) what the functions doe without having to read the
code.</p>
<p><em>Docstrings</em> are a specific type of documentation that are
provided within functions and <a href="https://docs.python.org/3/tutorial/classes.html" class="external-link">Python
classes</a>. A function docstring should explain what that particular
code is doing, what parameters the function needs (inputs) and what form
they should take, what the function outputs (you may see words like
‘returns’ or ‘yields’ here), and errors (if any) that might be
raised.</p>
<p>Providing these docstrings helps improve code readability since it
makes the function code more transparent and aids understanding.
Particularly, docstrings that provide information on the input and
output of functions makes it easier to reuse them in other parts of the
code, without having to read the full function to understand what needs
to be provided and what will be returned.</p>
<p>Python docstrings are defined by enclosing the text with 3 double
quotes (<code>"""</code>). This text is also indented to the same level
as the code defined beneath it, which is 4 whitespaces by
convention.</p>
<div class="section level3">
<h3 id="example-of-a-single-line-docstring">Example of a single-line docstring<a class="anchor" aria-label="anchor" href="#example-of-a-single-line-docstring"></a></h3>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">def</span> add(x, y):</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>    <span class="co">"""Add two numbers together"""</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="example-of-a-multi-line-docstring">Example of a multi-line docstring<a class="anchor" aria-label="anchor" href="#example-of-a-multi-line-docstring"></a></h3>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">def</span> divide(x, y):</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">    Divide number x by number y.</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">        x: A number to be divided.</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">        y: A number to divide by.</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co">        float: The division of x by y.</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="co">    Raises:</span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co">        ZeroDivisionError: Cannot divide by zero.</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">/</span> y</span></code></pre>
</div>
<p>Some projects may have their own guidelines on how to write
docstrings, such as <a href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard" class="external-link">numpy</a>.
If you are contributing code to a wider project or community, try to
follow the guidelines and standards they provide for code style.</p>
<p>As your code grows and becomes more complex, the docstrings can form
the content of a reference guide allowing developers to quickly look up
how to use the APIs, functions, and classes defined in your codebase.
Hence, it is common to find tools that will automatically extract
docstrings from your code and generate a website where people can learn
about your code without downloading/installing and reading the code
files - such as <a href="https://www.mkdocs.org/" class="external-link">MkDocs</a>.</p>
<p>Let’s write a docstring for the function
<code>read_json_to_dataframe</code> we introduced in the previous
exercise using the <a href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html" class="external-link">Google
Style Python Docstrings Convention</a>. Remember, questions we want to
answer when writing the docstring include:</p>
<ul><li>What the function does?</li>
<li>What kind of inputs does the function take? Are they required or
optional? Do they have default values?</li>
<li>What output will the function produce?</li>
<li>What exceptions/errors, if any, it can produce?</li>
</ul><p>Our <code>read_json_to_dataframe</code> function fully described by a
docstring may look like:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span></code></pre>
</div>
<div id="writing-docstrings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="writing-docstrings" class="callout-inner">
<h3 class="callout-title">Writing docstrings</h3>
<div class="callout-content">
<p>Write a docstring for the function
<code>write_dataframe_to_csv</code> we introduced earlier.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Our <code>write_dataframe_to_csv</code> function fully described by a
docstring may look like:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="co">Write the dataframe to a CSV file.</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Finally, our code may look something like the following:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb22-22"><a href="#cb22-22" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-23"><a href="#cb22-23" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-24"><a href="#cb22-24" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb22-25"><a href="#cb22-25" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb22-28"><a href="#cb22-28" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb22-29"><a href="#cb22-29" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb22-30"><a href="#cb22-30" tabindex="-1"></a></span>
<span id="cb22-31"><a href="#cb22-31" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb22-32"><a href="#cb22-32" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb22-33"><a href="#cb22-33" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb22-34"><a href="#cb22-34" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb22-36"><a href="#cb22-36" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb22-37"><a href="#cb22-37" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb22-38"><a href="#cb22-38" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-39"><a href="#cb22-39" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb22-40"><a href="#cb22-40" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb22-41"><a href="#cb22-41" tabindex="-1"></a></span>
<span id="cb22-42"><a href="#cb22-42" tabindex="-1"></a></span>
<span id="cb22-43"><a href="#cb22-43" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb22-44"><a href="#cb22-44" tabindex="-1"></a></span>
<span id="cb22-45"><a href="#cb22-45" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb22-46"><a href="#cb22-46" tabindex="-1"></a></span>
<span id="cb22-47"><a href="#cb22-47" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb22-48"><a href="#cb22-48" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb22-49"><a href="#cb22-49" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb22-50"><a href="#cb22-50" tabindex="-1"></a></span>
<span id="cb22-51"><a href="#cb22-51" tabindex="-1"></a><span class="co"># Read the data from JSON file</span></span>
<span id="cb22-52"><a href="#cb22-52" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb22-53"><a href="#cb22-53" tabindex="-1"></a></span>
<span id="cb22-54"><a href="#cb22-54" tabindex="-1"></a><span class="co"># Convert and export data to CSV file</span></span>
<span id="cb22-55"><a href="#cb22-55" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb22-56"><a href="#cb22-56" tabindex="-1"></a></span>
<span id="cb22-57"><a href="#cb22-57" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-58"><a href="#cb22-58" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb22-59"><a href="#cb22-59" tabindex="-1"></a>eva_data[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb22-60"><a href="#cb22-60" tabindex="-1"></a>eva_data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb22-61"><a href="#cb22-61" tabindex="-1"></a>plt.plot(eva_data[<span class="st">'date'</span>], eva_data[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb22-62"><a href="#cb22-62" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb22-63"><a href="#cb22-63" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb22-64"><a href="#cb22-64" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb22-65"><a href="#cb22-65" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb22-66"><a href="#cb22-66" tabindex="-1"></a>plt.show()</span>
<span id="cb22-67"><a href="#cb22-67" tabindex="-1"></a></span>
<span id="cb22-68"><a href="#cb22-68" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Do not forget to commit any uncommitted changes you may have and then
push your work to GitHub.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add <span class="op">&lt;</span>your_changed_files<span class="op">&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Your commit message"</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a></h2>
<hr class="half-width"><p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul><li><a href="https://www.index.dev/blog/7-tell-tale-signs-of-unreadable-code-how-to-identify-and-fix-the-problem" class="external-link">7
tell-tale signs of unreadable code</a></li>
<li><a href="https://www.theguardian.com/info/2019/jan/29/code-readability-matters" class="external-link">‘Code
Readability Matters’ from the Guardian’s engineering blog</a></li>
<li><a href="https://peps.python.org/pep-0008/#comments" class="external-link">PEP 8 Style
Guide for Python</a></li>
<li><a href="https://www.coursera.org/tutorials/python-comment#inline-commenting-in-python" class="external-link">Coursera:
Inline commenting in Python</a></li>
<li><a href="https://introtopython.org/introducing_functions.html" class="external-link">Introducing
Functions from Introduction to Python</a></li>
<li><a href="https://www.w3schools.com/python/python_functions.asp" class="external-link">W3Schools.com
Python Functions</a></li>
</ul><p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>Readable code is easier to understand, maintain, debug and extend
(reuse) - saving time and effort.</li>
<li>Choosing descriptive variable and function names will communicate
their purpose more effectively.</li>
<li>Using comments and docstrings to describe parts of the code will
help transmit understanding and context.</li>
<li>Use libraries or packages for common functionality to avoid
duplication.</li>
<li>Creating functions from the smallest, reusable units of code will
make the code more readable and help. compartmentalise which parts of
the code are doing what actions and isolate specific code sections for
re-use.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="05-code-environment.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="07-code-structure.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="05-code-environment.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Reproducible
        </a>
        <a class="chapter-link float-end" href="07-code-structure.html" rel="next">
          Next: Code structure...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/06-code-readability.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/softwaresaved/fair-research-software/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/softwaresaved/fair-research-software/" class="external-link">Source</a></p>
				<p><a href="https://github.com/softwaresaved/fair-research-software/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:a.nenadic@software.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.9" class="external-link">sandpaper (0.16.9)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://softwaresaved.github.io/fair-research-software/06-code-readability.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, FAIR, reproducibility, sustainability, open, research, lesson, The Carpentries",
  "name": "Code readability",
  "creativeWorkStatus": "active",
  "url": "https://softwaresaved.github.io/fair-research-software/06-code-readability.html",
  "identifier": "https://softwaresaved.github.io/fair-research-software/06-code-readability.html",
  "dateCreated": "2023-10-03",
  "dateModified": "2024-10-11",
  "datePublished": "2024-11-05"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

