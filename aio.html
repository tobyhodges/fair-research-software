<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Tools and practices for FAIR research software: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-warning">
          <abbr title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
              Alpha
            </a>
            <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Tools and practices for FAIR research software
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Tools and practices for FAIR research software
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="test-suite-exercise.html">Implementing a test suite</a></li>
<li><a class="dropdown-item" href="ci-for-testing.html">Continuous Integration for automated testing</a></li>
<li><a class="dropdown-item" href="licensing.html">Software licensing</a></li>
<li><a class="dropdown-item" href="ethical-environmental-considerations.html">Ethical &amp; environmental considerations around research software</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Tools and practices for FAIR research software
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Course introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-fair-research-software.html">2. FAIR research software</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-tools.html">3. Tools and practices for FAIR research software development</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-version-control.html">4. Version control</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-code-environment.html">5. Reproducible development environment</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-code-readability.html">6. Code readability</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-code-structure.html">7. Code structure</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-code-correctness.html">8. Code correctness</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-code-documentation.html">9. Code documentation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-open-collaboration.html">10. Open code &amp; collaboration</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-wrap-up.html">11. Wrap-up</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="test-suite-exercise.html">Implementing a test suite</a></li>
<li><a href="ci-for-testing.html">Continuous Integration for automated testing</a></li>
<li><a href="licensing.html">Software licensing</a></li>
<li><a href="ethical-environmental-considerations.html">Ethical &amp; environmental considerations around research software</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introduction"><p>Content from <a href="01-introduction.html">Course introduction</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/01-introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is open, reproducible and FAIR research?</li>
<li>Why are these practices important?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Understand the concept of open and reproducible research</li>
<li>Understand why these principles are of value in the research
community</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="jargon-busting">Jargon busting<a class="anchor" aria-label="anchor" href="#jargon-busting"></a>
</h2>
<hr class="half-width">
<p>Before we start with the course, below we cover the terminology and
explain terms, phrases, and concepts associated with software
development in reproducible research that we will use in this
course.</p>
<ul>
<li>
<strong>Reproducibility</strong> - the ability to be reproduced or
copied; the extent to which consistent results are obtained when an
experiment is repeated (definition from <a href="https://languages.oup.com/google-dictionary-en/" class="external-link">Google’s English
dictionary is provided by Oxford Languages</a>)</li>
<li>
<strong>Computational reproducibility</strong> - obtaining
consistent results using the same input data, computational methods
(code), and conditions of analysis; work that can be independently
recreated from the same data and the same code (<a href="https://the-turing-way.netlify.app/reproducible-research/overview/overview-definitions" class="external-link">definition</a>
by the <a href="https://the-turing-way.netlify.app/reproducible-research/reproducible-research" class="external-link">Turing
Way’s “Guide to Reproducible Research”</a>)</li>
<li>
<strong>Reproducible research</strong> - the idea that scientific
results should be documented in such a way that their deduction is fully
transparent (<a href="https://en.wikipedia.org/wiki/Reproducibility" class="external-link">definition</a> from
Wikipedia)</li>
<li>
<strong>Open research</strong> - research that is openly accessible
by others; concerned with making research more transparent, more
collaborative, more wide-reaching, and more efficient (<a href="https://en.wikipedia.org/wiki/Open_research" class="external-link">definition</a> from
Wikipedia)</li>
<li>
<strong>FAIR</strong> - an acronym that stands for Findable,
Accessible, Interoperable, and Reusable</li>
<li>
<strong>Sustainable software development</strong> - software
development practice that takes into account longevity and
maintainability of code (e.g. beyond the lifetime of the project),
environmental impact, societal responsibility and ethics in our software
practices.</li>
</ul>
<div id="computational-reproducibility" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="computational-reproducibility" class="callout-inner">
<h3 class="callout-title">Computational reproducibility</h3>
<div class="callout-content">
<p>In this course, we use the term “reproducibility” as a synonym for
“computational reproducibility”.</p>
</div>
</div>
</div>
<div id="what-does-open-and-reproducible-research-mean-to-you" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="what-does-open-and-reproducible-research-mean-to-you" class="callout-inner">
<h3 class="callout-title">What does open and reproducible research mean
to you?</h3>
<div class="callout-content">
<p>Think about the questions below. Your instructors may ask you to
share your answers in a shared notes document and/or discuss them with
other participants.</p>
<ul>
<li>What do you understand by the words “open” and “reproducible” in the
context of research?</li>
<li>How many people or groups can you list that might benefit from your
work being open and reproducible?</li>
<li>How many times did you wish that someone else’s work you came across
was more open or accessible to you? Can you provide some examples?</li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-is-reproducible-research">What is reproducible research?<a class="anchor" aria-label="anchor" href="#what-is-reproducible-research"></a>
</h2>
<hr class="half-width">
<p><a href="https://the-turing-way.netlify.app/reproducible-research/reproducible-research" class="external-link">The
Turing Way’s “Guide to Reproducible Research”</a> provides an <a href="https://the-turing-way.netlify.app/reproducible-research/overview/overview-definitions" class="external-link">excellent
overview of definitions of “reproducibility” and “replicability”</a>
found in literature, and their different aspects and levels.</p>
<p>In this course, we adopt the Turing Way’s definitions:</p>
<ul>
<li>
<strong>Reproducible research</strong>: a result is reproducible
when the same analysis steps performed on the same data consistently
produce the same answer.
<ul>
<li>For example, two different people drop a pen 10 times each and every
time it falls to the floor. Or, we run the same code multiple times on
different machines and each time it produces the same result.</li>
</ul>
</li>
<li>
<strong>Replicable research</strong>: a result is replicable when
the same analysis performed on different data produces qualitatively
similar answers.
<ul>
<li>For example, instead of a pen, we drop a pencil, and it also falls
to the floor. Or, we collect two different datasets as part of two
different studies and run the same code over these datasets with the
same result each time.</li>
</ul>
</li>
<li>
<strong>Robust research</strong>: a result is robust when the same
data is subjected to different analysis workflows to answer the same
research question and a qualitatively similar or identical answer is
produced.
<ul>
<li>For example, I lend you my pen and you drop it out the window, and
it still falls to the floor. Or we run the same analysis implemented in
both Python and R over the same data and it produces the same
result.</li>
</ul>
</li>
<li>
<strong>Generalisable research</strong>: combining replicable and
robust findings allow us to form generalisable results that are broadly
applicable to different types of data or contexts.
<ul>
<li>For example, everything we drop - falls, therefore gravity
exists.</li>
</ul>
</li>
</ul>
<figure><img src="https://the-turing-way.netlify.app/_images/reproducible-definition-grid.svg" alt="Four cartoon images depicting two researchers at two machines which take in data and output the same landscape image in 4 different ways. These visually describe the four scenarios listed above." class="figure mx-auto d-block"><div class="figcaption"><em>The Turing Way project illustration of
aspects of reproducible research by Scriberia, used under a CC-BY 4.0
licence, <a href="https://doi.org/10.5281/zenodo.3332807" class="external-link">DOI:
10.5281/zenodo.3332807</a></em></div>
</figure><p>In this course we mainly address the aspect of reproducibility -
i.e. enabling others to run our code to obtain the same results.</p>
<p>We can also further differentiate between:</p>
<ul>
<li>
<strong>Computational reproducibility</strong>: when detailed
information is provided about code, software, hardware and
implementation details.</li>
<li>
<strong>Empirical reproducibility</strong>: when detailed
information is provided about non-computational empirical scientific
experiments and observations. In practice, this is enabled by making the
data and details of how it was collected freely available.</li>
<li>
<strong>Statistical reproducibility</strong>: when detailed
information is provided, for example, about the choice of statistical
tests, model parameters, and threshold values. This mostly relates to
pre-registration of study design to prevent p-value hacking and other
manipulations.</li>
</ul>
<p>In this course, we are concerned with computational reproducibility,
i.e. when the application of computer science and software engineering
is used to aid solving research problems.</p>
</section><section><h2 class="section-heading" id="why-do-reproducible-research">Why do reproducible research?<a class="anchor" aria-label="anchor" href="#why-do-reproducible-research"></a>
</h2>
<hr class="half-width">
<p>Scientific transparency and rigor are key factors in research.
Scientific methodology and results need to be published openly and
replicated and confirmed by several independent parties. However,
research papers often lack the full details required for independent
reproduction or replication. Many attempts at reproducing or replicating
the results of scientific studies have failed in a variety of
disciplines ranging from psychology (<a href="https://www.science.org/doi/10.1126/science.aac4716" class="external-link">The Open
Science Collaboration (2015)</a>) to cancer sciences (<a href="https://elifesciences.org/articles/71601" class="external-link">Errington et al
(2021)</a>). These are called <a href="https://en.wikipedia.org/wiki/Replication_crisis" class="external-link"><strong>the
reproducibility and replicability crises</strong></a> - ongoing
methodological crises in which the results of many scientific studies
are difficult or impossible to repeat.</p>
<p>Reproducible research is a practice that ensures that researchers can
repeat the same analysis multiple times with the same results. It offers
many benefits to those who practice it:</p>
<ul>
<li>Reproducible research helps researchers remember how and why they
performed specific tasks and analyses; this enables easier explanation
of work to collaborators and reviewers.</li>
<li>Reproducible research enables researchers to quickly modify analyses
and figures - this is often required at all stages of research and
automating this process saves loads of time.</li>
<li>Reproducible research enables reusability of previously conducted
tasks so that new projects that require the same or similar tasks become
much easier and efficient by reusing or reconfiguring previous
work.</li>
<li>Reproducible research supports researchers’ career development by
facilitating the reuse and citation of all research outputs - including
both code and data.</li>
<li>Reproducible research is a strong indicator of rigor,
trustworthiness, and transparency in scientific research. This can
increase the quality and speed of peer review, because reviewers can
directly access the analytical process described in a manuscript. It
increases the probability that errors are caught early on - by
collaborators or during the peer-review process, helping alleviate the
reproducibility crisis.</li>
</ul>
<p>However, reproducible research often requires that researchers
implement new practices and learn new tools. This course aims to teach
some of these practices and tools pertaining to the use of software to
conduct reproducible research.</p>
</section><section><h2 class="section-heading" id="software-in-research-and-research-software">Software in research and research software<a class="anchor" aria-label="anchor" href="#software-in-research-and-research-software"></a>
</h2>
<hr class="half-width">
<p>Software is <a href="https://www.software.ac.uk/blog/quick-and-dirty-analysis-software-being-used-research-python-matlab-and-r" class="external-link">fundamental
to modern research</a> - some of it would even be impossible without
software. From short, thrown-together temporary scripts written to help
with day-to-day research tasks, through an abundance of complex data
analysis spreadsheets, to the hundreds of software engineers and
millions of lines of code behind international efforts such as the Large
Hadron Collider, there are few areas of research where software does not
have a fundamental role.</p>
<p>However, it is important to note that not all software that is used
in research is “research software”. We define “research software” as
software or code that is used to generate, process or analyse results of
a research for publication. For example, software used to guide a
telescope is not considered “research software”. On the other hand,
formulas or macros in spreadsheets used to analyse data are considered
“research code” as they are a form of computer programming that allow
one to create, calculate, and change data sets in a number of different
ways.</p>
<figure><img src="https://esciencecenter-digital-skills.github.io/research-software-support/modules/fairsoftware/media/definition.png" alt="Quote: Research Software includes source code files, algorithms, scripts, computational workflows and executables that were created during the research process or for a research purpose. Software components (e.g., operating systems, libraries, dependencies, packages, scripts, etc.) that are used for research but were not created during or with a clear research intent should be considered software in research and not Research Software." class="figure mx-auto d-block"><div class="figcaption"><em>Definition of “research software” from the
FAIR4RS working group, image by the Netherlands eScience Center licensed
under CC-BY 4.0</em></div>
</figure><p>In the <a href="https://www.software.ac.uk/blog/quick-and-dirty-analysis-software-being-used-research-python-matlab-and-r" class="external-link">software
survey conducted by the Software Sustainability Institute in 2014</a>,
92% of researchers indicated they used some kind of software to aid or
conduct their research. This was not limited to researchers from <a href="https://en.wikipedia.org/wiki/Computational_science" class="external-link">computational
science</a> (aka scientific computing), the “hard” sciences or to those
involved in “traditional” uses of computing infrastructure such as
running simulations or developing computational methods. The <strong>use
of research software is ubiquitous and fairly even across all
disciplines</strong>.</p>
<p>Research software is increasingly being developed - researchers do
not just use “off the shelf” software and the majority of researchers
develop their own. In order to be able to produce quality software that
outputs correct and verifiable results and that can be reused over time
- researchers require training. This course teaches good practises and
reproducible working methods that are agnostic of a programming language
(although we will use Python code in our examples) and aims to provide
researchers with the tools and knowledge to feel confident when writing
good quality and sustainable software to support their research.
Typically, we think of such software as being <strong>FAIR</strong>.</p>
<p>In the rest of the course, we will explore what exactly we mean by
“FAIR research software”, why it is important and what practices can
help us along our “FAIRification” journey.</p>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://the-turing-way.netlify.app/reproducible-research/reproducible-research" class="external-link">The
Turing Way’s “Guide for Reproducible Research”</a></li>
<li>
<a href="https://esajournals.onlinelibrary.wiley.com/doi/10.1002/bes2.1801" class="external-link">A
Beginner’s Guide to Conducting Reproducible Research</a>, Jesse M.
Alston, Jessica A. Rick, Bulletin of The Ecological Society of America
102 (2) (2021), <a href="https://doi.org/10.1002/bes2.1801" class="external-link uri">https://doi.org/10.1002/bes2.1801</a>
</li>
<li><a href="https://guereslib.github.io/ten-reproducible-research-things/" class="external-link">“Ten
reproducible research things” tutorial</a></li>
<li><a href="https://force11.org/groups/fair-4-research-software-fair4rs-working-group/" class="external-link">FORCE11’s
FAIR 4 Research Software (FAIR4RS) Working Group</a></li>
<li><a href="https://carpentries-lab.github.io/good-enough-practices/index.html" class="external-link">“Good
Enough Practices in Scientific Computing” course</a></li>
<li>
<a href="https://www.repro4everyone.org/" class="external-link">Reproducibility for
Everyone’s (R4E) resources</a>, community-led education initiative to
increase adoption of open research practices at scale</li>
<li>
<a href="https://intersect-training.org/training-links/" class="external-link">Training
materials on different aspects of research software engineering</a>
(including open source, reproducibility, research software testing,
engineering, design, continuous integration, collaboration, version
control, packaging, etc.), compiled by the <a href="https://intersect-training.org/" class="external-link">INTERSECT project</a>
</li>
<li>
<a href="https://forrt.org/resources/" class="external-link">Curated resources</a> by the
<a href="https://forrt.org/" class="external-link">Framework for Open and Reproducible
Research Training</a> (FORRT)</li>
</ul></section><section><h2 class="section-heading" id="acknowledgements-and-references">Acknowledgements and references<a class="anchor" aria-label="anchor" href="#acknowledgements-and-references"></a>
</h2>
<hr class="half-width">
<p>The content of this course borrows from or references <a href="reference.html#litref">various work</a>.</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-fair-research-software"><p>Content from <a href="02-fair-research-software.html">FAIR research software</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/02-fair-research-software.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are FAIR research principles?</li>
<li>How do FAIR principles apply to software (and data)?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Explain the FAIR research principles in the context of research
software and data</li>
<li>Explain why these principles are of value in the research
community</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="motivation" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="motivation" class="callout-inner">
<h3 class="callout-title">Motivation</h3>
<div class="callout-content">
<p>Think about the questions below. Your instructors may ask you to
share your answers in a shared notes document and/or discuss them with
other participants.</p>
<ul>
<li>What motivated you to attend this course? Did you come by choice or
were you advised to attend?</li>
<li>What do you hope to learn or change in your current research
software practice? Describe how your knowledge, work or attitude may be
different afterwards.</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="fair-software">FAIR software<a class="anchor" aria-label="anchor" href="#fair-software"></a>
</h2>
<hr class="half-width">
<p>FAIR stands for Findable, Accessible, Interoperable, and Reusable and
comprises a set of principles designed to increase the visibility and
usefulness of your research to others. The FAIR data principles, first
published <a href="https://www.nature.com/articles/sdata201618" class="external-link">in
2016</a>, are widely known and applied today. Similar <a href="https://www.nature.com/articles/s41597-022-01710-x" class="external-link">FAIR
principles for software</a> have now been defined too. In general, they
mean:</p>
<ul>
<li>
<strong>Findable</strong> - software and its associated metadata
must be easy to discover by humans and machines.</li>
<li>
<strong>Accessible</strong> - in order to reuse software, the
software and its metadata must be retrievable by standard protocols,
free and legally usable.</li>
<li>
<strong>Interoperable</strong> - when interacting with other
software it must be done by exchanging data and/or metadata through
standardised protocols and application programming interfaces
(APIs).</li>
<li>
<strong>Reusable</strong> - software should be usable (can be
executed) and reusable (can be understood, modified, built upon, or
incorporated into other software).</li>
</ul>
<p>Each of the above principles can be achieved by a number of practices
listed below. This is not an exact science, and by all means the list
below is not exhaustive, but any of the practices that you employ in
your research software workflow will bring you closer to the gold
standard of a fully reproducible research.</p>
<div class="section level3">
<h3 id="findable">Findable<a class="anchor" aria-label="anchor" href="#findable"></a>
</h3>
<p>In order to make your software more findable, you should:</p>
<ul>
<li>Create a description of your software to make it discoverable by
search engines and other search tools</li>
<li>Place your software in a public software repository (and ideally
register it in a [general-purpose or domain-specific software
registry][software-registries])</li>
<li>Use a unique and persistent identifier (DOI) for your software
(e.g. by depositing your code on <a href="https://zenodo.org/" class="external-link">Zenodo</a>), which is also useful for
citations - note that depositing your data/code on GitHub and similar
software repositories may not be enough as they may change their open
access model or disappear completely in the future, so archiving your
code means it stands a better chance at being preserved</li>
</ul>
</div>
<div class="section level3">
<h3 id="accessible">Accessible<a class="anchor" aria-label="anchor" href="#accessible"></a>
</h3>
<p>In order to make your software more accessible, you should:</p>
<ul>
<li>Make sure people can freely, legally and easily get a copy your
software</li>
<li>Use code style conventions and code structure patterns, use comments
and create documentation to make your code comprehensible by people
(once they get a copy of it) - i.e. make your code accessible in the
<em>intelligible</em> sense</li>
</ul>
</div>
<div class="section level3">
<h3 id="interoperable">Interoperable<a class="anchor" aria-label="anchor" href="#interoperable"></a>
</h3>
<p>In order to make your software more interoperable, you should:</p>
<ul>
<li>Explain the functionality of your software, so others can understand
how other tools can interoperate with it</li>
<li>Use standard formats for inputs and outputs</li>
<li>Communicate with other software via standard protocols and APIs</li>
</ul>
</div>
<div class="section level3">
<h3 id="reusable">Reusable<a class="anchor" aria-label="anchor" href="#reusable"></a>
</h3>
<p>In order to make your software more reusable, you should:</p>
<ul>
<li>Document your software (including its functionality, and how to
install and run it) to make it more understandable by others who may
wish to reuse or extend it</li>
<li>Follow best practices for software development (including code
conventions, structure, readability and correctness)</li>
<li>Test your software and make sure it works on different
platforms/operating systems to make it more reusable</li>
<li>Give a licence to your software clearly stating how it can be
reused</li>
<li>State how to cite your software, so people can give you credit when
they reuse it</li>
<li>Include a contributor policy so that others can contribute to your
code and credit for contributions is provided</li>
</ul>
<div id="fair-is-a-process-not-a-perfect-metric" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="fair-is-a-process-not-a-perfect-metric" class="callout-inner">
<h3 class="callout-title">FAIR is a process, not a perfect metric</h3>
<div class="callout-content">
<p>FAIR is not a binary metric - there is no such thing as “FAIR or”not
FAIR”.</p>
<p>FAIR is not a perfect metric, nor does it provide a full and
exhaustive software quality checklist. Software may be FAIR but still
not very good in terms of its functionality.</p>
<p>FAIR is <strong>not meant</strong> to criticise or discredit
work.</p>
<p>FAIR refers to the specific <strong>values</strong> of and describes
a set of <strong>principles</strong> to aid open and reproducible
research that can be a helpful guide for researchers who want to improve
their practices (by helping them see where they are on the <strong>FAIR
spectrum</strong> and help them on a <strong>journey</strong> to make
their software more FAIR).</p>
<figure><img src="fig/fair-spectrum.png" alt="FAIR represented as as a 4-dimensional spectrum with 4 axes - findable, accessible, interoperable and reusable, image by the Netherlands eScience Center licensed under CC-BY 4.0" class="figure mx-auto d-block"><div class="figcaption"><em>FAIR as a 4D spectrum, image by the
Netherlands eScience Center licensed under CC-BY 4.0</em></div>
</figure>
</div>
</div>
</div>
<p>We are going to explore the above practices on an example software
project we will be working on as part of this course.</p>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Think of a piece of software you use in your research - any
computational tool used for data gathering, modelling &amp; simulation,
processing &amp; visualising results or others. If you have a bit of
code or software you wrote yourself, in any language, feel free to use
that.</p>
<p>Think where on the FAIR spectrum it fits, using the following scale
as a guide for each principle:</p>
<ul>
<li>1 - requires loads of improvement</li>
<li>2 - on a good path, but improvements still needed</li>
<li>3 - decent, a few things could still be improved</li>
<li>4 - very good, only tiny things to improve upon</li>
<li>5 - excellent</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="software-and-data-used-in-this-course">Software and data used in this course<a class="anchor" aria-label="anchor" href="#software-and-data-used-in-this-course"></a>
</h2>
<hr class="half-width">
<p>We are going to follow a fairly typical experience of a new PhD or
postdoc joining a research group. They were emailed some data and
analysis code bundled in a <code>.zip</code> archive and written by
another group member who worked on similar things but has since left the
group. They need to be able to install and run this code on their
machine, check they can understand it and then adapt it to their own
project.</p>
<p>As part of the <a href="./index.html#astronaut-data-and-analysis-code">setup for this
course</a>, you should have downloaded a <code>.zip</code> archive
containing the software project the new research team member was given.
Let’s unzip this archive and inspect its content in VS Code. The
software project contains:</p>
<ol style="list-style-type: decimal">
<li>a JSON file (<code>data.json</code>) - a snippet of which is shown
below - with data on extra-vehicular activities (EVAs or spacewalks)
undertaken by astronauts and cosmonauts from 1965 to 2013 (data provided
by NASA via its <a href="https://data.nasa.gov/Raw-Data/Extra-vehicular-Activity-EVA-US-and-Russia/9kcy-zwvn/about_data" class="external-link">Open
Data Portal</a>) <img src="fig/astronaut-data-json-snippet.png" alt="JSON data file snippet showing EVA/spacewalk data including EVA id, country, crew members, vehicle type, date of the spacewalk, duration, and purpose" class="figure">
</li>
<li>a Python script (<code>my code v2.py</code>) containing some
analysis. <img src="fig/astronaut-analysis-bad-code-screenshot.png" alt="A first few lines of a Python script used as example code for the episode" class="figure">
</li>
</ol>
<p>The code in the Python script does some common research tasks:</p>
<ul>
<li>Read in the data from the JSON file</li>
<li>Change the data from one data format to another and save to a file
in the new format (CSV)</li>
<li>Perform some calculations to generate summary statistics about the
data</li>
<li>Make a plot to visualise the data</li>
</ul>
<p>Let’s have a critical look at this code and think about how FAIR this
piece of software is.</p>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>Look at our code in VS Code and compare this data and code to the
software you chose earlier (or assess it on its own). Do you think it is
Findable, Accessible, Interoperable and Reusable? Give it a score from 1
to 5 in each category, as in the previous exercise, and then we will
discuss it together.</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" data-bs-parent="#accordionHint1" aria-labelledby="headingHint1">
<div class="accordion-body">
<p>Here are some questions to help you assess where on the FAIR spectrum
the code is:</p>
<ol style="list-style-type: decimal">
<li><strong>Findable</strong></li>
</ol>
<ul>
<li>If these files were emailed to you, or sent on a chat platform, or
handed to you on a memory stick, how easy would it be to find them again
in 6 months, or 3 years?</li>
<li>If you asked your collaborator to give you the files again later on,
how would you describe them? Do they have a clear name?</li>
<li>If more data was added to the data set later, could you explain
exactly which data you used in the original analysis?</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><strong>Accessible</strong></li>
</ol>
<ul>
<li>If the person who gave you the files left your institution, how
would you get access to the files again?</li>
<li>Once you have the files, can you understand the code? Does it make
sense to you?</li>
<li>Do you need to log into anything to use this? Does it require
purchase or subscription to a service, platform or tool?</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><strong>Interoperable</strong></li>
</ol>
<ul>
<li>Is it clear what kind of input data it can read and what kind of
output data is produced? Will you be able to create the input files and
read the output files with the tools your community generally uses?</li>
<li>If you wanted to use this tool as part of a larger data processing
pipeline, does it allow you to link it with other tools in standard ways
such as an API or command-line interface?</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><strong>Reusable</strong></li>
</ol>
<ul>
<li>Can you run the code on your platform/operating system (is there
documentation that covers installation instructions)? What programs or
libraries do you need to install to make it work (and which versions)?
Are these commonly used tools in your field?</li>
<li>Do you have explicit permission to use your collaborators code in
your own research and do they expect credit of some form (paper
authorship, citation or acknowledgement)? Are you allowed to edit,
publish or share the files with others?</li>
<li>Is the language used familiar to you and people in your research
field? Can you read the variable names in the code and the column names
in the data file and understand what they mean?</li>
<li>Is the code written in a way that allows you to easily modify or
extend it? Can you easily see what parameters to change to make it
calculate a different statistic, or run on a different input file?</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>I would give the following scores:</p>
<p>F - 1/5</p>
<ul>
<li>Positive: None</li>
<li>Negative: No descriptive name, identifier or version number. No way
to find again except through one person and they might not remember what
file you mean.</li>
</ul>
<p>A - 2/5</p>
<ul>
<li>Positive: No accounts or paid services needed. Python is free, the
data is free and under a shareable license</li>
<li>Negative: No way to get the code without that one person. Not clear
where the data comes or what license it has unless you check the URL in
the comment.</li>
</ul>
<p>I - 3/5</p>
<ul>
<li>Positive: CSV and JSON files are common and well documented formats.
They are machine- and human-readable. They could be generated by or fed
into other programs in a pipeline.</li>
<li>Negative: JSON might not be well used in some fields. No API or
CLI.</li>
</ul>
<p>R - 2/5</p>
<ul>
<li>Positive: Can ask collaborator for explicit permissions for using
and modifying and how to credit them, if they did not specify before.
Python is a common language.</li>
<li>Negative: Python and library versions not specified. Bad variable
names, hardcoded inputs, no clear structure or documentation.</li>
</ul>
</div>
</div>
</div>
</div>
<p>Let’s now have a look into tools and practices that are commonly used
in research that can help us develop software in a more FAIR way.</p>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://fair-software.eu/" class="external-link">“Five recommendations for FAIR
software”</a></li>
<li><a href="https://librarycarpentry.org/Top-10-FAIR/files/poster_10things_FAIRsoftware.pdf" class="external-link">“10
easy things to make your research software FAIR”</a></li>
<li><a href="https://zenodo.org/records/11096498" class="external-link">Automating assessment
of the FAIR Principles for Research Software (FAIR4RS)</a></li>
<li>
<a href="https://esciencecenter-digital-skills.github.io/software-support-essentials/" class="external-link">Short
online courses</a> on various aspects of research software (including <a href="https://esciencecenter-digital-skills.github.io/software-support-essentials/fairsoftware" class="external-link">FAIR
reseach software</a> and data), by the NeSC Research Software
Support</li>
<li>
<a href="https://coderefinery.org/" class="external-link">CodeRefinery</a> - training and
e-Infrastructure for research software development</li>
<li>A <a href="https://fairsoftwarechecklist.net/" class="external-link">self-assessment
checklist for FAIR research software</a>, by the Netherlands eScience
Center and Australian Research Data Commons</li>
<li>
<a href="https://github.com/NLeSC/awesome-research-software-registries" class="external-link">Awesome
Research Software Registries</a> - a list of research software
registries (by country, organisation, domain and programming language)
where research software can be registered to help promote its
discovery</li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Open research means the outputs of publicly funded research are
publicly accessible with no or minimal restrictions.</li>
<li>Reproducible research means the data and software is available to
recreate the analysis.</li>
<li>FAIR data and software is Findable, Accessible, Interoperable,
Reusable.</li>
<li>These principles support research and researchers by saving time,
reducing barriers to discovery, and increasing impact of the research
output.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-tools"><p>Content from <a href="03-tools.html">Tools and practices for FAIR research software development</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/03-tools.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What tools are available to help us develop research software in a
FAIR way?</li>
<li>How do the tools fit together to enable FAIR research?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Identify some key tools for FAIR research software</li>
<li>Explain how can these tools help us work in a FAIR way</li>
<li>Install and run these key tools on learner’s machines</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this course we will introduce you to a group of tools and
practices that are commonly used in research to help you develop
software in a FAIR way. You should already have these tools installed on
your machine following the <a href="./index.html#astronaut-data-and-analysis-code">setup
instructions</a>. Here we will give an overview of the tools, how they
help you achieve the aims of FAIR research software and how they work
together. In later episodes we will describe some of these tools in more
detail.</p>
<div class="section level3">
<h3 id="development-environments">Development environments<a class="anchor" aria-label="anchor" href="#development-environments"></a>
</h3>
<p>Virtual and integrated development environments (IDEs), such as VS
Code or PyCharm, help with running, testing, and debugging code. Virtual
environments further enable us to share our working environments with
others, making it easier to access, reuse and extend our code. IDEs
often provide integrations with other tools, e.g. version control and
command line terminals, enabling you to do many tasks from a single
environment, saving time in switching between different tools.</p>
</div>
<div class="section level3">
<h3 id="command-line-terminals">Command line terminals<a class="anchor" aria-label="anchor" href="#command-line-terminals"></a>
</h3>
<p>Command line terminals (e.g. Bash, GitBash) enable us to run and test
our code without graphical user interfaces (GUI) afforded to us by IDEs
- this is sometimes needed for accessing and running our code remotely
on servers and high-performance systems without a GUI provision, where
time, memory and processing power are expensive or in high demand.</p>
<p>Version control systems are typically provided as command line tools,
making them often only accessible from command line terminals to enter
commands and access remote version control servers to backing up and
sharing our work.</p>
<p>Finally, command line tools use standard protocols for passing
parameters, inputs and outputs. This makes it easier to integrate ours
with other command line tools, allowing us to chain them and build up
complex and reproducible workflows and analysis pipelines using several
programs in different steps. If we write our software in a way which
provides such an interoperable command line interface - we will be able
to integrate it with other command line tools to automate and speed up
our work.</p>
</div>
<div class="section level3">
<h3 id="standard-inputoutput-formats-and-communication-protocols">Standard input/output formats and communication protocols<a class="anchor" aria-label="anchor" href="#standard-inputoutput-formats-and-communication-protocols"></a>
</h3>
<p>Using standard data exchange, input and output formats and
communication protocols helps create interoperable software that can
more readily integrate with other tools into more complex pipelines -
increasing its interoperability and reusability.</p>
</div>
<div class="section level3">
<h3 id="version-control-tools">Version control tools<a class="anchor" aria-label="anchor" href="#version-control-tools"></a>
</h3>
<p>Version control means knowing what changes were made to your code,
when and by whom - promoting code ownership, responsibility and credit.
When combined with software sharing and collaborative platforms such as
GitHub or GitLab, it facilitates code publication, sharing and
findability, teamwork and discussions about software and design
decisions, provides backup facilities for your code and speeds up
collaboration on shared code by allowing edits by more than one person
at a time.</p>
</div>
<div class="section level3">
<h3 id="code-style-and-structure-conventions">Code style and structure conventions<a class="anchor" aria-label="anchor" href="#code-style-and-structure-conventions"></a>
</h3>
<p>Following code style conventions for your programming language and
standard code structure patterns that are agreed upon by the community
and other programmers are important practices to ensure that others find
it easy to read your code, reuse or extend it in their own examples and
applications.</p>
</div>
<div class="section level3">
<h3 id="code-testing">Code testing<a class="anchor" aria-label="anchor" href="#code-testing"></a>
</h3>
<p>Testing ensures that your code is correct and does what it is set out
to do. When you write code you often feel very confident that it is
perfect, but when writing bigger codes or code that is meant to do
complex operations it is very hard to consider all possible edge cases
or notice every single typing mistake. Testing also gives other people
confidence in your code as they can see an example of how it is meant to
run and be assured that it does work correctly on their machine -
helping with code understanding and reusability.</p>
</div>
<div class="section level3">
<h3 id="software--and-project--level-documentation">Software- and project- level documentation<a class="anchor" aria-label="anchor" href="#software--and-project--level-documentation"></a>
</h3>
<p>Documentation comes in many forms - from <strong>software-level
documentation</strong> including docstrings describing functions and
classes and in-line comments that explain lines of your code, to
<strong>project-level documentation</strong> and
<strong>metadata</strong> (including README, LICENCE, CITATION,
CONTRIBUTING, etc. files) that help to discover it, explain the legal
terms of reusing it, describe its functionality and how to install, run
and contribute to it, to whole websites full of documentation with
function definitions, usage examples, tutorials and guides. You many not
need as much documentation as a large commercial software product, but
making your code reusable relies on other people being able to
understand what your code does and how to use it.</p>
</div>
<div class="section level3">
<h3 id="software-repositories-and-registries">Software repositories and registries<a class="anchor" aria-label="anchor" href="#software-repositories-and-registries"></a>
</h3>
<p>Having somewhere to share your code is fundamental to making it
findable and accessible. Your institution might have a code repository,
your research field may have a practice of sharing code via a specific
website, archive or journal, or your version control system might
include an online component that makes sharing different versions of
your code easy. You should check the rules or guidelines of your
institution, grant or domain on publishing code, as well as any licenses
of the code your software depends on or reuses.</p>
<p>Some examples of commonly used software repositories and registries
include:</p>
<ul>
<li>general-purpose software repositories, such as <a href="https://github.com" class="external-link">GitHub</a> and <a href="https://about.gitlab.com/" class="external-link">GitLab</a>
</li>
<li>programming language-specific software repositories, such as <a href="https://pypi.org/" class="external-link">PyPi</a> (for Python) and <a href="https://cran.r-project.org/web/packages/" class="external-link">CRAN</a> (for R)</li>
<li>software registries, such as <a href="https://biotools.us/" class="external-link">BioTools</a> (for biosciences) and <a href="https://github.com/NLeSC/awesome-research-software-registries" class="external-link">Awesome
Research Software Registries</a> (providing a list of research software
registries by country, organisation, domain and programming language)
where research software can be registered to help promote its
discovery</li>
</ul>
</div>
<div class="section level3">
<h3 id="persistent-identifiers">Persistent identifiers<a class="anchor" aria-label="anchor" href="#persistent-identifiers"></a>
</h3>
<p>Unique persistent identifiers, such as Digital Object Identifiers
(DOIs) provided by <a href="https://zenodo.org/" class="external-link">Zenodo</a>, <a href="https://figshare.com/" class="external-link">FigShare</a> and similar digital archiving
services, and commits/tags/releases used by GitHub and similar code
sharing platforms, help with findability and accessibility of your
software, and can help you get credit for your work by providing citable
references.</p>
</div>
<div class="section level3">
<h3 id="tools-and-practices-summary">Tools and practices summary<a class="anchor" aria-label="anchor" href="#tools-and-practices-summary"></a>
</h3>
<p>The table below provides a summary of how different tools and
practices help with the FAIR software principles.</p>
<table class="table">
<colgroup>
<col width="71%">
<col width="5%">
<col width="7%">
<col width="9%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th>Tools and practices</th>
<th>Findable</th>
<th>Accessible</th>
<th>Interoperable</th>
<th>Reusable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Virtual development environments</td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>Integrated development environments/IDEs</td>
<td></td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>Command line terminals - automated and reproducible pipelines</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>Standard formats - e.g. for data exchange (CSV, YAML)</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>Communication protocols - Command Line Interface (CLI) or
Application Programming Interface (API)</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>Version control tools</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Code testing and correctness</td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>Code style conventions</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>Software-level documentation (comments and docstrings, explaining
functionality)</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>Project-level documentation (READMEs, explaining
functionality/installation/running)</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>License - code sharing and reuse</td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>Citation - code reuse and credit</td>
<td>x</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>Software repositories and registries - code sharing</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Unique persistent identifiers - finding and citing software</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<section><h2 class="section-heading" id="checking-your-setup">Checking your setup<a class="anchor" aria-label="anchor" href="#checking-your-setup"></a>
</h2>
<hr class="half-width">
<p>Let’s check your setup now to make sure you are ready for the rest of
this course.</p>
<div id="checking-your-setup-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="checking-your-setup-1" class="callout-inner">
<h3 class="callout-title">Checking your setup</h3>
<div class="callout-content">
<p>Open a command line terminal and look at the prompt. Compare what you
see in the terminal with your neighbour, does it look the same or
different? What information is it telling you and why might this be
useful? What other information might you want?</p>
<p>Run the following commands in a terminal to check you have installed
the tools listed in the Setup page. Compare the output with your
neighbour and see if you can see any differences.</p>
<p>Checking the command line terminal:</p>
<ol style="list-style-type: decimal">
<li><code>date</code></li>
<li><code>echo $SHELL</code></li>
<li><code>pwd</code></li>
<li><code>whoami</code></li>
</ol>
<p>Checking Python:</p>
<ol start="5" style="list-style-type: decimal">
<li><code>python --version</code></li>
<li><code>python3 --version</code></li>
<li><code>which python</code></li>
<li><code>which python3</code></li>
</ol>
<p>Checking Git and GitHub:</p>
<ol start="9" style="list-style-type: decimal">
<li><code>git --help</code></li>
<li><code>git config --list</code></li>
<li><code>ssh -T git@github.com</code></li>
</ol>
<p>Checking VS Code:</p>
<ol start="12" style="list-style-type: decimal">
<li><code>code</code></li>
<li><code>code --list-extensions</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>The prompt is the <code>$</code> character and any text that comes
before it, that is shown on every new line before you type in commands.
Type each of the commands one at a time and press enter. They should
give you a result by printing some text in the terminal.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The expected out put of each command is:</p>
<ol style="list-style-type: decimal">
<li>Today’s date</li>
<li>
<code>bash</code> or <code>zsh</code> - this tells you what shell
language you are using. In this course we show examples in Bash.</li>
<li>Your “present working directory” or the folder where your shell is
running</li>
<li>Your username</li>
<li>In this course we are using Python 3. If
<code>python --version</code> gives you Python 2.x you may have two
versions of Python installed on your computer and need to be careful
which one you are using.</li>
<li>Use this command to be certain you are using Python version 3, not
2, if you have both installed.</li>
<li>The file path to where the Python version you are calling is
installed.</li>
<li>If you have more than one version these should be different paths,
if both 5. and 6. gave the same result then 7. and 8. should match as
well.</li>
<li>The help message explaining how to use the <code>git</code>
command.</li>
<li>You should have <code>user.name</code>, <code>user.email</code> and
<code>core.editor</code> set in your Git configuration. Check that the
editor listed is one you know how to use.</li>
<li>This checks if you have set up your connection to GitHub correctly.
If is says <code>permission denied</code> you may need to look at the
instructions for setting up SSH keys again on the Setup page.</li>
<li>This should open VSCode in your current working directory. macOS
users may need to first open VS Code and <a href="https://code.visualstudio.com/docs/setup/mac#_launching-from-the-command-line" class="external-link">add
it to the PATH</a>.</li>
<li>You should have the extensions GitLens, Git Graph, Python, JSON and
Excel Viewer installed to use in this course.</li>
</ol>
</div>
</div>
</div>
</div>
<p>You may have noticed that our researcher has received the software
project they are meant to be working as a <code>.zip</code> archive via
email. In the next episode, we will learn a better practice for sharing
and tracking changes to a software project using version control
software Git and project sharing and collaboration platform GitHub.</p>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://coderefinery.github.io/reproducible-research/" class="external-link">CodeRefinery:
Reproducible research - preparing code to be usable by you and others in
the future</a></li>
<li><a href="https://realpython.com/python-ides-code-editors-guide/" class="external-link">Python
IDEs and Code Editors (Guide) - Real Python</a></li>
<li><a href="https://zenodo.org/" class="external-link">The Zenodo data repository</a></li>
<li><a href="https://faircookbook.elixir-europe.org/content/recipes/findability/zenodo-deposition.html" class="external-link">The
Fair Cookbook - Depositing to generic repositories - Zenodo use
case</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Automating your analysis with shell scripts allows you to save and
reproduce your methods.</li>
<li>Version control helps you back up your work, see how data and code
change over time and identify which analysis used which data and
code.</li>
<li>Programming languages each have advantages and disadvantages in
different situations. Use the correct tools for your own work.</li>
<li>Integrated development environments (IDEs) automate many coding
tasks, provide easy access to documentation, and can identify common
errors.</li>
<li>Testing helps you check that your code is behaving as expected and
will continue to do so in the future or when used by someone else.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-version-control"><p>Content from <a href="04-version-control.html">Version control</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/04-version-control.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a version control system?</li>
<li>How can a version control system help make my work
reproducible?</li>
<li>What does a standard version control workflow look like?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Create self-contained commits using Git to incrementally save
work</li>
<li>Inspect logs to review the history of work</li>
<li>Push new work from a local machine to a remote server</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode, we will begin to cover the basics of version control
and explore how this tool assists us in producing reproducible and
sustainable scientific projects. We will create a new software project
from our existing code, make some changes to it and track them with
version control, and then push those changes to a remote server for
safe-keeping.</p>
<section><h2 class="section-heading" id="what-is-a-version-control-system">What is a version control system?<a class="anchor" aria-label="anchor" href="#what-is-a-version-control-system"></a>
</h2>
<hr class="half-width">
<p>Version control is the practice of tracking and managing changes to
files. Version control systems are software tools that assist in the
management of these file changes over time. They keep track of every
modification to the files in a special database that allows users to
“travel through time” and compare earlier versions of the files with the
current state.</p>
</section><section><h2 class="section-heading" id="why-use-a-version-control-system">Why use a version control system?<a class="anchor" aria-label="anchor" href="#why-use-a-version-control-system"></a>
</h2>
<hr class="half-width">
<p>The main motivation as scientists to use version control in our
projects is for reproducibility purposes. As hinted to above, by
tracking and storing every change we make, we can more effectively
restore the state of the project at any point in time. This is
incredibly useful if we want to reproduce results from a specific
version of the code, or track down changes that broke some
functionality.</p>
<p>The other benefit we gain is that version control provides us with
the provenance of the project. As we make each change, we also leave a
message about what the change was and why it was made. This improves the
transparency of the project and makes it auditable, which is good
scientific practice.</p>
<p>Later on in this workshop, we will also see how using a version
control system allows many people to collaborate on the same project
without a lot of manual effort to combine different items of work.</p>
</section><section><h2 class="section-heading" id="git-version-control-system">Git version control system<a class="anchor" aria-label="anchor" href="#git-version-control-system"></a>
</h2>
<hr class="half-width">
<p>Git is one of the version control systems around and the one we will
be using in this course. It is primarily used for source code management
in software development but it can be used to track changes in files in
general - it is particularly effective for tracking text-based files
(e.g. source code files in any programming language, CSV, Markdown,
HTML, CSS, Tex, etc. files).</p>
<p>The diagram below shows a typical software development lifecycle with
Git (starting from making changes locally) and the commonly used
commands to interact with different parts of the Git infrastructure. We
will cover all of the commands below during this course, this is just a
high level overview.</p>
<figure><img src="fig/ep03_fig05-git-lifecycle.svg" alt="Software development lifecycle with Git showing Git commands and flow of data between components of a Git system, including working directory, staging area, local and remote repository" class="figure mx-auto d-block"><div class="figcaption">Software development lifecycle with Git</div>
</figure><ul>
<li>
<strong>working directory</strong> - a local directory (including
any subdirectories) where your project files live and where you are
currently working. It is also known as the “untracked” area of Git. Any
changes to files will be marked by Git in the working directory. If you
make changes to the working directory and do not explicitly tell Git to
save them - you will likely lose those changes. Using
<code>git add FILENAME</code> command, you tell Git to start tracking
changes to file FILENAME within your working directory.</li>
<li>
<strong>staging area (index)</strong> - once you tell Git to start
tracking changes to files (with <code>git add FILENAME</code> command),
Git saves those changes in the staging area on your local machine. Each
subsequent change to the same file needs to be followed by another
<code>git add FILENAME</code> command to tell Git to update it in the
staging area. To see what is in your working directory and staging area
at any moment (i.e. what changes is Git tracking), run the command
<code>git status</code>.</li>
<li>
<strong>local repository</strong> - stored within the
<code>.git</code> directory of your project locally, this is where Git
wraps together all your changes from the staging area and puts them
using the <code>git commit</code> command. Each commit is a new,
permanent snapshot (checkpoint, record) of your project in time, which
you can share or revert to.</li>
<li>
<strong>remote repository</strong> - this is a version of your
project that is hosted somewhere on the Internet (e.g., on GitHub,
GitLab or somewhere else). While your project is nicely
version-controlled in your local repository, and you have snapshots of
its versions from the past, if your machine crashes - you still may lose
all your work. Furthermore, you cannot share or collaborate on this
local work with others easily. Working with a remote repository involves
pushing your local changes remotely (using <code>git push</code>) and
pulling other people’s changes from a remote repository to your local
copy (using <code>git fetch</code> or <code>git pull</code>) to keep the
two in sync in order to collaborate (with a bonus that your work also
gets backed up to another machine). Note that a common best practice
when collaborating with others on a shared repository is to always do a
<code>git pull</code> before a <code>git push</code>, to ensure you have
any latest changes before you push your own.</li>
</ul>
<p>Git is a distributed version control system allowing for multiple
people to be working on the same project (even the same file) at the
same time. Initially, we will use Git to start tracking changes to files
on our local machines; later on we will start sharing our work on GitHub
allowing other people to see and contribute to our work.</p>
<div class="section level3">
<h3 id="create-a-new-repository">Create a new repository<a class="anchor" aria-label="anchor" href="#create-a-new-repository"></a>
</h3>
<p>Create a new directory in the <code>Desktop</code> folder for our
work, and then change the current working directory to the newly created
one:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> mkdir spacewalks</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">$</span> cd spacewalks</span></code></pre>
</div>
<p>We tell Git to make <code>spacewalks</code> a repository – a place
where Git can store versions of our files:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">git</span> init</span></code></pre>
</div>
<p>We can check everything is setup correctly by asking Git to tell us
the status of our project:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

nothing to commit (create/copy files and use "git add" to track)</code></pre>
</div>
<p>The exact wording of this output may be slightly different if you are
using a different version of Git.</p>
</div>
<div class="section level3">
<h3 id="add-initial-files-into-our-repository">Add initial files into our repository<a class="anchor" aria-label="anchor" href="#add-initial-files-into-our-repository"></a>
</h3>
<p>During the <a href="./index.html#astronaut-data-and-analysis-code">setup</a> for this
course, you have been provided with a <code>.zip</code> archive
containing, among other things, these two code and data files:</p>
<ul>
<li><code>my code v2.py</code></li>
<li><code>data.json</code></li>
</ul>
<p>We need to move these files into our Git folder. You can either drag
and drop the files from a file explorer window into the left pane of the
VS Code IDE, or you can use the <a href="https://linuxcommandlibrary.com/man/mv" class="external-link"><code>mv</code>
command</a> in the command line terminal.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">mv</span> /path/where/you/saved/the/file/my\ code\ v2.py ~/Desktop/spacewalks/</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">mv</span> /path/where/you/saved/the/file/data.json ~/Desktop/spacewalks/</span></code></pre>
</div>
<p>Let’s see what that has done to our repository by running
<code>git status</code> again:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">git</span> status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	data.json
	my code v2.py

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
</div>
<p>This is telling us that Git has noticed the new files. The “untracked
files” message means that there is a file in the directory that Git
isn’t keeping track of. We can tell Git to track a file using
<code>git add</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git add my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">$</span> git add data.json</span></code></pre>
</div>
<p>and then check the right thing happened:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached &lt;file&gt;..." to unstage)
	new file:   data.json
	new file:   my code v2.py</code></pre>
</div>
<p>Git now knows that it’s supposed to keep track of
<code>my code v2.py</code> and <code>data.json</code>, but it hasn’t
recorded these changes as a commit yet. To get it to do that, we need to
run one more command:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add an example script and dataset to work on"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main (root-commit) bf55eb7] Add and example script and dataset to work on
 2 files changed, 437 insertions(+)
 create mode 100644 data.json
 create mode 100644 my code v2.py</code></pre>
</div>
<p>When we run <code>git commit</code>, Git takes everything we have
told it to save by using <code>git add</code> and stores a copy
permanently in a special <code>.git</code> directory. This permanent
copy is called a commit (or revision).</p>
<p>We use the flag <code>-m</code> (for message) to record a short,
descriptive, and specific comment that will help us remember later on
what we did and why. If we only run <code>git commit</code> without the
<code>-m</code> option, Git will launch a text editor so that we can
write a longer message.</p>
<p>Good commit messages start with a brief (&lt;50 characters) statement
about the changes made in the commit. Generally, the message should
complete the sentence “If applied, this commit will…”. If you want to go
into more detail, add a blank line between the summary line and your
additional notes. Use this additional space to explain why you made
changes and/or what their impact will be.</p>
<p>If we run <code>git status</code> now, we see:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
<p>This tells us that everything is up to date.</p>
<div id="where-are-my-changes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="where-are-my-changes" class="callout-inner">
<h3 class="callout-title">Where are my changes?</h3>
<div class="callout-content">
<p>If we run <code>ls</code> at this point, we will still see only two
files, the script and the dataset. That’s because Git saves information
about files’ history in the special <code>.git</code> directory
mentioned earlier so that our filesystem does not become cluttered (and
so that we cannot accidentally edit or delete an old version).</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="make-a-change">Make a change<a class="anchor" aria-label="anchor" href="#make-a-change"></a>
</h3>
<p>Did you notice how when we were typing the Python script into the
terminal, we had to add a slash before the space like this:
<code>my\ code\ v2.py</code>? Using a backslash in this way is called
‘escaping’ and it lets the terminal know to treat the space as part of
the filename, and not a separate argument. However, it is pretty
annoying and considered bad practice to have spaces in your filenames
like this, especially if you will be manipulating them from the
terminal. So, let’s go ahead and remove the space from the filename
altogether and replace it with an underscore <code>_</code> instead. You
can use the <code>mv</code> command again like so:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> mv my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py my_code_v2.py</span></code></pre>
</div>
<p>If you run <code>git status</code> again, you’ll see Git has noticed
the change in the filename.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes not staged for commit:
  (use "git add/rm &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
	deleted:    my code v2.py

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	my_code_v2.py

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<div id="add-and-commit-the-changed-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-and-commit-the-changed-file" class="callout-inner">
<h3 class="callout-title">Add and commit the changed file</h3>
<div class="callout-content">
<p>Using the Git commands demonstrated so far, save the change you just
made to the Python script.</p>
<p>Remember, commit messages should be descriptive and complete the
sentence “If applied, this commit will…”. You can also use
<code>git status</code> to check the status of your project at any
time.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>To save the changes to the renamed Python file, use the following Git
commands:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> git add my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py my_code_v2.py</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    my code v2.py -&gt; my_code_v2.py</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Replace spaces in Python filename with underscores"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 8ea2a0b] Replace spaces in Python filename with underscores
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename my code v2.py =&gt; my_code_v2.py (100%)</code></pre>
</div>
<div class="section level3">
<h3 id="advanced-solution">Advanced solution<a class="anchor" aria-label="anchor" href="#advanced-solution"></a>
</h3>
<p>We initially renamed the Python file using the <code>mv</code>
command, and we than had to <code>git add</code> <em>both</em>
<code>my_code_v2.py</code> and <code>my\ code\ v2.py</code>.
Alternatively, we could have used Git’s own <code>mv</code> command like
so:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> git mv my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py my_code_v2.py</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    my code v2.py -&gt; my_code_v2.py</code></pre>
</div>
<p><code>git mv</code> is the equivalent of running <code>mv ...</code>
followed immediately by <code>git add ...</code> of the old and new
filenames, so the changes have been staged automatically. All that needs
to be done is to commit them.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Replace spaces in Python filename with underscores"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 6499bd7] Replace spaces in Python filename with underscores
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename my code v2.py =&gt; my_code_v2.py (100%)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="rename-our-data-and-output-files">Rename our data and output files<a class="anchor" aria-label="anchor" href="#rename-our-data-and-output-files"></a>
</h3>
<p>Now that we have seen how to rename files in Git, let’s:</p>
<ol style="list-style-type: lower-roman">
<li>give our input data file and script more meaningful names and</li>
<li>choose informative file names for our output data file and
plot.</li>
</ol>
<p>First let’s update file names in our script using VS Code.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>)</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span>   </span></code></pre>
</div>
<p>Now, let’s actually rename our files on the file system using git and
commit our changes.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">git</span> mv data.json eva-data.json</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">git</span> mv my_code_v2.py eva_data_analysis.py</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="fu">git</span> status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    data.json -&gt; eva-data.json
	renamed:    my_code_v2.py -&gt; eva_data_analysis.py</code></pre>
</div>
<p>Finally, let’s commit out changes:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Implement informative file names"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="commit-messages">Commit messages<a class="anchor" aria-label="anchor" href="#commit-messages"></a>
</h3>
<p>We have already met the concept of commit messages when we made and
stored changes to our code files. Commit messages are short descriptions
of, and the motivation for, what a commit will achieve. It is therefore
important to take some time to ensure these commit messages are helpful
and descriptive, as when work is reviewed (by your future self or a
collaborator) they provide the context about what changes were made and
why. This can make tracking down specific changes in commits much
easier, without having to inspect the code or files themselves.</p>
<p>Generally, commit messages should complete the sentence “If applied,
this commit will…”. Most often a short, 50 character (ish) title will
suffice, but a longer-form description of the changes can also be
provided by leaving a blank space between the summary line and the rest
of the message. There are many different conventions that can be used
for commit messages that range from very structured (such as <a href="https://www.conventionalcommits.org/en/v1.0.0/" class="external-link">conventional
commits</a>) to the fun (such as <a href="https://gitmoji.dev/" class="external-link">gitmoji</a>). The important thing is that it
is clear to the reader what a commit is doing and why. If a project is
using a specific commit message convention, this will often be described
in their <a href="https://en.wikipedia.org/wiki/Contributing_guidelines" class="external-link">contributing
guidelines</a>.</p>
<div id="good-commit-messages" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="good-commit-messages" class="callout-inner">
<h3 class="callout-title">Good commit messages</h3>
<div class="callout-content">
<p>Read the two commit messages below. In pairs or small groups, discuss
which messages help you understand more about what the commit author
did. What about the commit messages do you find helpful or not?</p>
<ol style="list-style-type: decimal">
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   [main 7cf85f6] Change variable
     1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
</div></li>
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   [main 8baf69d] Change variable name from columns to column_headers
    1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Commit message (2) is the better commit message since it is more
descriptive about what the author did. This message could be improved
further by adding a blank line then further describing the change
discussing, for example, why the variable name was changed.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="self-contained-commits">Self-contained commits<a class="anchor" aria-label="anchor" href="#self-contained-commits"></a>
</h3>
<p>If we want our commit messages to be descriptive and help us
understand the changes in the project over time, then we also have to
make commits that are very self-contained. That is to say that each
commit we make should only change one, logical thing. By “logical” here,
we mean that one aspect of updating the files has been achieved to
completion - such as adding docstrings or refactoring a function - we
don’t mean that changes are committed line-by-line. See the <a href="https://wiki.openstack.org/wiki/GitCommitMessages#Things_to_avoid_when_creating_commits" class="external-link">“Things
to avoid when creating commits” section</a> of <a href="https://wiki.openstack.org/wiki/GitCommitMessages" class="external-link">Openstack’s
“Git Commit Good Practice” documentation</a> for examples of logical,
self-contained commits, and commits that don’t follow this practice.</p>
<p>The reasons that self-contained commits are important are that: it
helps with reviewing changes if each commit tackles one step; if code
breaks, tracking down the specific change that caused the break is
simpler; if you need to undo changes, you can remove them in small
increments, rather than losing a lot of unrelated work along with the
change you do want to remove.</p>
<div id="understanding-commit-contents" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="understanding-commit-contents" class="callout-inner">
<h3 class="callout-title">Understanding commit contents</h3>
<div class="callout-content">
<p>Below are the <code>diffs</code> of two commits. A <code>diff</code>
shows the differences in a file (or files!) compared to the previous
commit in the history so you can what has changed. The lines that begin
with <code>+</code>s represent additions, and the lines that begin with
<code>-</code>s represent deletions. Compare these two commit
<code>diff</code>s. Can you understand what the commit author was trying
to achieve in each commit? How many changes have they tried to make in
each commit? Discuss in pairs or small groups.</p>
<ol style="list-style-type: decimal">
<li><figure><img src="fig/ex-diff-1.png" alt="Example Diff 1" class="figure mx-auto d-block"><div class="figcaption">Example Diff 1</div>
</figure></li>
<li><figure><img src="fig/ex-diff-2.png" alt="Example Diff 2" class="figure mx-auto d-block"><div class="figcaption">Example Diff 2</div>
</figure></li>
</ol>
<p>To find out more about how to generate <code>diffs</code>, you can
read the <a href="git-diff-docs">Git documentation</a> or the <a href="https://swcarpentry.github.io/git-novice/04-changes.html" class="external-link">Tracking
Changes episode</a> from the <a href="https://swcarpentry.github.io/git-novice" class="external-link">Software Carpentry
Version control with Git lesson</a>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The git <code>diff</code> presented in option (1) is cleaner. The
author has only tackled one thing: placing the import statements at the
top of the file. This kind of commit is much easier to review in
isolation, and will be easier to track down if <a href="https://git-scm.com/docs/git-bisect" class="external-link"><code>git bisect</code></a>
is required.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="git-logs">Git logs<a class="anchor" aria-label="anchor" href="#git-logs"></a>
</h3>
<p>If we want to know what we’ve done recently, we can ask Git to show
us the project’s history using <code>git log</code>:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> git log</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>commit 6499bd731ab50fde2731ce2642f143cea86450b6 (HEAD -&gt; main)
Author: Sarah Gibson &lt;drsarahlgibson@gmail.com&gt;
Date:   Mon Jun 17 11:55:17 2024 +0100

    Replace spaces in Python filename with underscores

commit bf55eb7639a6508658aaa1bfeaeb9f115d1bcc40
Author: Sarah Gibson &lt;drsarahlgibson@gmail.com&gt;
Date:   Mon Jun 17 11:52:02 2024 +0100

    Add and example script and dataset to work on</code></pre>
</div>
<p>This output demonstrates why it is important to write meaningful and
descriptive commit messages. Without the messages, we will only have the
commit hashes (the strings of random numbers and letters after “commit”)
to identify each commit, which would be impossible for us.</p>
<p>We may need to inspect our recent commits to establish where a bug
was introduced or because we have decided that our recent work isn’t
suitable and we wish to discard it and start again. Once we have
identified the last commit we want to keep, we can revert the state of
our project back to that commit with a few different methods:</p>
<ul>
<li>
<a href="https://git-scm.com/docs/git-revert" class="external-link"><code>git revert</code></a>:
This command reverts a commit by creating a new commit that reverses the
action of the supplied commit or list of commits. Because this command
creates new commits, your Git history is more complete and tells the
story of exactly what work you did, i.e., deciding to discard some
work.</li>
<li>
<a href="https://git-scm.com/docs/git-reset" class="external-link"><code>git reset</code></a>:
This command will recover the state of the project at the specified
commit. What is done with the commits you had mave since is defined by
some optional flags:
<ul>
<li>
<code>--soft</code>: Any changes you have made since the specified
commit would be preserved and left as “Changes to be committed”</li>
<li>
<code>--mixed</code>: Any changes you have made since the specified
commit would be preserved but not marked for commit (this is the default
action)</li>
<li>
<code>--hard</code>: Any changes you have made since the specified
commit are discarded.</li>
</ul>
</li>
</ul>
<p>Using <code>git reset</code> command produces a “cleaner” history,
but does not tell the full story and your work.</p>
</div>
</section><section><h2 class="section-heading" id="interacting-with-a-remote-git-server">Interacting with a remote Git server<a class="anchor" aria-label="anchor" href="#interacting-with-a-remote-git-server"></a>
</h2>
<hr class="half-width">
<p>Git is also a distributed version control system, allowing us to
synchronise work between any two or more copies of the same repository -
the ones that are not located on your machine. So far we have have been
working with a project on our local machines and, even though we have
been incrementally saving our work in a way that is recoverable (version
control), if anything happened to our laptops, the whole project would
be lost. However, we can use the distribution aspect of Git to push our
projects and histories to a server (someone else’s computer) so that
they are accessible and retrievable if the worst were to happen to our
machines.</p>
<figure><img src="fig/git-distributed.png" alt="2 Git repositories belonging to 2 different developers linked to a central repository and one another showing two way flow of information in each link" class="figure mx-auto d-block"><div class="figcaption">Git - distributed version control system, image
from W3Docs (freely available)</div>
</figure><p><a href="https://github.com" class="external-link">GitHub</a> is an online software
development platform that can act as a central remote server. It uses
Git underneath and provides facilities for storing, tracking, and
collaborating on software projects. Other Git hosting services are
available, such as <a href="https://gitlab.com" class="external-link">GitLab</a> and <a href="https://bitbucket.org" class="external-link">Bitbucket</a>.</p>
<p>Distributing our projects in this way also opens us up to
collaboration, since colleagues would be able to access our projects,
make their own copies on their machines, and conduct their own work.</p>
<p>We will now go through how to push a local project on <a href="https://github.com" class="external-link">GitHub</a> and share it publicly.</p>
<ol style="list-style-type: decimal">
<li><p>In your browser, navigate to <a href="https://github.com" class="external-link uri">https://github.com</a> and sign into your account</p></li>
<li>
<p>In the top right hand corner of the screen, there is a menu
labelled “+” with a dropdown. Click the dropdown and select “New
repository” from the options.</p>
<figure><img src="fig/ep03_fig01-create_new_repo.jpg" class="image-with-shadow figure mx-auto d-block" alt-text="Selecting the 'New repository' option from GitHub's dropdown menu" alt="Creating a new GitHub repository"><div class="figcaption"><em>Creating a new GitHub repository</em></div>
</figure>
</li>
<li>
<p>You will be presented with some options to fill in or select
while creating your repository. In the “Repository Name” field, type
“spacewalks”. This is the name of your project and matches the name of
your local folder.</p>
<figure><img src="fig/ep03_fig02-repository_name.png" class="image-with-shadow figure mx-auto d-block" alt-text="Setting the name of the repository on GitHub" alt="Naming the GitHub repository"><div class="figcaption"><em>Naming the GitHub repository</em></div>
</figure><p>Ensure the visibility of the repository is “Public” and leave all
other options blank. Since this repository will be connected to a local
repository, it needs to be empty which is why we don’t initialise with a
README or add a license or <code>.gitignore</code> file. Click “Create
repository” at the bottom of the page.</p>
<figure><img src="fig/ep03_fig03-create_repository.jpg" class="image-with-shadow figure mx-auto d-block" alt-text="Completing the creation of the GitHub repository" alt="Complete GitHub repository creation"><div class="figcaption"><em>Complete GitHub repository
creation</em></div>
</figure>
</li>
<li>
<p>Now you have created your repository, you need to send the files
and the history you have stored on your local computer to GitHub’s
servers. GitHub provides some instructions on how to do that for
different scenarios. You want to use the instructions under the heading
“…or push an existing repository from the command line”. These
instructions will look like this:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">git</span> remote add origin https://github.com/<span class="op">&lt;</span>YOUR_GITHUB_HANDLE<span class="op">&gt;</span>/spacewalks.git</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre>
</div>
<p>You can copy these commands using the button that looks like two
overlapping squares to the right-hand side of the commands. Paste them
into your terminal and run them.</p>
<figure><img src="fig/ep03_fig04-copy_commands.jpg" class="image-with-shadow figure mx-auto d-block" alt-text="Copying the commands to sync the local and remote repositories" alt="Copy the commands to sync the local and remote repositories"><div class="figcaption"><em>Copy the commands to sync the local and
remote repositories</em></div>
</figure>
</li>
<li><p>If you refresh your browser window, you should now see the two
files <code>my-code-v2.py</code> and <code>data.json</code> visible in
the GitHub repository, matching what you have locally on your
machine.</p></li>
</ol>
<p>Let’s explain a bit more about what those commands did…</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">git</span> remote add origin https://github.com/<span class="op">&lt;</span>YOUR_GITHUB_HANDLE<span class="op">&gt;</span>/spacewalks.git</span></code></pre>
</div>
<p>This command tells Git to create a <code>remote</code> called
“origin” and link it to the URL of your GitHub repository. A
<code>remote</code> is a version control concept where two (or more)
repositories are connected to each other in such a way that they can be
kept in sync by exchanging commits. “origin” is a name used to refer to
the remote repository. It could be called anything, but “origin” is a
convention that is often used by default in Git and GitHub since it
indicates which repository is considered the “source of truth”,
particularly useful when many people are collaborating on the same
repository.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span></code></pre>
</div>
<p><code>git branch</code> is a command used to manage branches. We will
discuss branches later on in the course. This command ensures the branch
we are working on is called “main”. This will be the default branch of
the project for everyone working on it.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre>
</div>
<p>The <code>git push</code> command is used to update remote references
with any changes you have made locally. This command tells Git to update
the “main” branch on the “origin” remote. The <code>-u</code> flag
(short for <code>--set-upstream</code>) will set a tracking reference,
so that in the future <code>git push</code> can be run without the need
to specify the remote and reference name.</p>
<div id="terminology" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="terminology" class="callout-inner">
<h3 class="callout-title">Terminology</h3>
<div class="callout-content">
<p>In pairs or small groups, discuss the difference between the terms
<code>remote</code> and <code>origin</code>. What is the definition of
each term?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ul>
<li>
<code>remote</code>: a version control concept where two (or more)
repositories are linked together in such a way that they can be kept in
sync by exchanging commits</li>
<li>
<code>origin</code>: a common Git/GitHub naming convention for the
remote repository to designate the source of truth for
collaborators</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>During this episode, we have covered the basics of using version
control to track changes to our projects. We have seen how to: create
new projects, incrementally save progress, construct informative commit
messages and content, inspect the history of our projects and retrieve
the state, and push our projects to distributed servers.</p>
<p>These skills are critical to reproducible and sustainable science
since using version control makes our work self-documenting - the commit
messages provide the narrative of what changed and why - and we can
recover the exact state of our projects at a specific time, so we can
more reliably run the “same” code again. We can also back up our
projects by pushing them to distributed, remote servers and reduce the
risk of data loss over the course of a project’s lifetime.</p>
<p>Version control is a vast topic and we have only covered the absolute
basics here as a brief introduction. For a deeper and more complete dive
into the subject matter, please see the “Further reading” section
below.</p>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://swcarpentry.github.io/git-novice" class="external-link">Software
Carpentry’s Git Novice lesson</a></li>
<li><a href="https://the-turing-way.netlify.app/reproducible-research/vcs" class="external-link">The
Turing Way’s “Guide to Version Control”</a></li>
<li><a href="https://www.pluralsight.com/courses/how-git-works" class="external-link">“How Git
Works” course on Pluralsight</a></li>
<li><a href="https://cbea.ms/git-commit/" class="external-link">How to Write a Good Commit
Message</a></li>
<li><a href="https://wiki.openstack.org/wiki/GitCommitMessages" class="external-link">Git
Commit Good Practice</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A version control system is software that tracks and manages changes
to a project over time</li>
<li>Using version control aids reproducibility since the exact state of
the software that produced an output can be recovered</li>
<li>A commit represents the smallest unit of change to a project</li>
<li>Commit messages describe what each commit contains and should be
descriptive</li>
<li>Logs can be used to overview the history of a project</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-code-environment"><p>Content from <a href="05-code-environment.html">Reproducible development environment</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/05-code-environment.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are virtual environments in software development and why use
them?</li>
<li>How can we manage Python virtual coding environments and external
(third-party) libraries on our machines?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Set up a Python virtual coding environment for a software project
using <code>venv</code> and <code>pip</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>So far we have created a local Git repository to track changes in our
software project and pushed it to GitHub to enable others to see and
contribute to it.</p>
<p>We now want to start developing the code further. If we have a look
at our script, we may notice a few <code>import</code> lines like the
following:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> json</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> csv</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre>
</div>
<p>This means that our code requires several <strong>external
libraries</strong> (also called third-party packages or dependencies) -
<code>json</code>, <code>csv</code>, <code>datetime</code> and
<code>matplotlib</code>.</p>
<p>Python applications often use external libraries that do not come as
part of the standard Python distribution. This means that you will have
to use a <strong>package manager</strong> tool to install them on your
system. Applications will also sometimes need a specific version of an
external library (e.g. because they were written to work with feature,
class, or function that may have been updated in more recent versions),
or a specific version of Python interpreter. This means that each Python
application you work with may require a different setup and a set of
dependencies so it is useful to be able to keep these configurations
separate to avoid confusion between projects. The solution for this
problem is to create a self-contained <strong>virtual
environment</strong> per project, which contains a particular version of
Python installation plus a number of additional external libraries.</p>
<section><h2 class="section-heading" id="virtual-development-environments">Virtual development environments<a class="anchor" aria-label="anchor" href="#virtual-development-environments"></a>
</h2>
<hr class="half-width">
<p>So what exactly are virtual environments, and why use them?</p>
<p>A Python virtual environment helps us create an <strong>isolated
working copy</strong> of a software project that uses a specific version
of Python interpreter together with specific versions of a number of
external libraries installed into that virtual environment. Python
virtual environments are implemented as directories with a particular
structure within software projects, containing links to specified
dependencies allowing isolation from other software projects on your
machine that may require different versions of Python or external
libraries.</p>
<p>It is recommended to create a separate virtual environment for each
project. Then you do not have to worry about changes to the environment
of the current project you are working on affecting other projects - you
can use different Python versions and different versions of the same
third party dependency by different projects on your machine
independently from one another.</p>
<p>Another big motivator for using virtual environments is that they
make sharing your code with others much easier - as we will see shortly
you can record your virtual environment in a special file and share it
with your collaborators who can then recreate the same development
environment on their machines.</p>
<p>You do not have to worry too much about specific versions of external
libraries that your project depends on most of the time. Virtual
environments also enable you to always use the latest available version
without specifying it explicitly. They also enable you to use a specific
older version of a package for your project, should you need to.</p>
</section><section><h2 class="section-heading" id="managing-virtual-environments">Managing virtual environments<a class="anchor" aria-label="anchor" href="#managing-virtual-environments"></a>
</h2>
<hr class="half-width">
<p>There are several command line tools used for managing Python virtual
environments - we will use <code>venv</code>, available by default from
the standard <code>Python</code> distribution since
<code>Python 3.3</code>.</p>
<p>Part of managing your (virtual) working environment involves
installing, updating and removing external packages on your system. The
Python package manager tool <code>pip</code> is most commonly used for
this - it interacts and obtains the packages from the central repository
called <a href="https://pypi.org/" class="external-link">Python Package Index (PyPI)</a>.</p>
<p>So, we will use <code>venv</code> and <code>pip</code> in combination
to help us create and share our virtual development environments.</p>
</section><section><h2 class="section-heading" id="creating-virtual-environments">Creating virtual environments<a class="anchor" aria-label="anchor" href="#creating-virtual-environments"></a>
</h2>
<hr class="half-width">
<p>Creating a virtual environment with <code>venv</code> is done by
executing the following command:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> venv /path/to/new/virtual/environment</span></code></pre>
</div>
<p>where <code>/path/to/new/virtual/environment</code> is a path to a
directory where you want to place it - conventionally within your
software project so they are co-located. This will create the target
directory for the virtual environment.</p>
<p>For our project let’s create a virtual environment called
“venv_spacewalks” from our project’s root directory.</p>
<p>Firstly, ensure you are located within the project’s root
directory:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> cd /path/to/spacewalks</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> venv venv_spacewalks</span></code></pre>
</div>
<p>If you list the contents of the newly created directory
“venv_spacewalks”, on a Mac or Linux system (slightly different on
Windows as explained below) you should see something like:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> venv_spacewalks</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 8
drwxr-xr-x  12 alex  staff  384  5 Oct 11:47 bin
drwxr-xr-x   2 alex  staff   64  5 Oct 11:47 include
drwxr-xr-x   3 alex  staff   96  5 Oct 11:47 lib
-rw-r--r--   1 alex  staff   90  5 Oct 11:47 pyvenv.cfg</code></pre>
</div>
<p>So, running the <code>python -m venv venv_spacewalks</code> command
created the target directory called “venv_spacewalks” containing:</p>
<ul>
<li>
<code>pyvenv.cfg</code> configuration file with a home key pointing
to the Python installation from which the command was run,</li>
<li>
<code>bin</code> subdirectory (called <code>Scripts</code> on
Windows) containing a symlink of the Python interpreter binary used to
create the environment and the standard Python library,</li>
<li>
<code>lib/pythonX.Y/site-packages</code> subdirectory (called
<code>Lib\site-packages</code> on Windows) to contain its own
independent set of installed Python packages isolated from other
projects, and</li>
<li>various other configuration and supporting files and
subdirectories.</li>
</ul>
<p>Once you’ve created a virtual environment, you will need to activate
it.</p>
<p>On Mac or Linux, it is done as:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
<p>On Windows, recall that we have <code>Scripts</code> directory
instead of <code>bin</code> and activating a virtual environment is done
as:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
<p>Activating the virtual environment will change your command line’s
prompt to show what virtual environment you are currently using
(indicated by its name in round brackets at the start of the prompt),
and modify the environment so that running Python will get you the
particular version of Python configured in your virtual environment.</p>
<p>You can verify you are using your virtual environment’s version of
Python by checking the path using the command <code>which</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> which python3</span></code></pre>
</div>
<p>When you’re done working on your project, you can exit the
environment with:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> deactivate</span></code></pre>
</div>
<p>If you’ve just done the <code>deactivate</code>, ensure you
reactivate the environment ready for the next part:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
<p>Note that, since our software project is being tracked by Git, the
newly created virtual environment will show up in version control - we
will see how to handle it using Git in one of the subsequent
episodes.</p>
</section><section><h2 class="section-heading" id="installing-external-packages">Installing external packages<a class="anchor" aria-label="anchor" href="#installing-external-packages"></a>
</h2>
<hr class="half-width">
<p>We noticed earlier that our code depends on four <strong>external
packages/libraries</strong> - <code>json</code>, <code>csv</code>,
<code>datetime</code> and <code>matplotlib</code>. As of Python 3.5,
Python comes with in-built JSON and CSV libraries - this means there is
no need to install these additional packages (if you are using a fairly
recent version of Python), but you still need to import them in any
script that uses them. However, we still need to install packages
<code>datetime</code> and <code>matplotlib</code> as they do not come as
standard with Python distribution.</p>
<p>To install the latest version of packages <code>datetime</code> and
<code>matplotlib</code> with <code>pip</code> you use pip’s
<code>install</code> command and specify the package’s name, e.g.:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install datetime</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install matplotlib</span></code></pre>
</div>
<p>or like this to install multiple packages at once for short:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install datetime matplotlib</span></code></pre>
</div>
<p>The above commands have installed packages <code>datetime</code> and
<code>matplotlib</code> in our currently active
<code>venv_spacewalks</code> environment and will not affect any other
Python projects we may have on our machines.</p>
<p>If you run the <code>python3 -m pip install</code> command on a
package that is already installed, <code>pip</code> will notice this and
do nothing.</p>
<p>To install a specific version of a Python package give the package
name followed by <code>==</code> and the version number,
e.g. <code>python3 -m pip install matplotlib==3.5.3</code>.</p>
<p>To specify a minimum version of a Python package, you can do
<code>python3 -m pip install matplotlib&gt;=3.5.1</code>.</p>
<p>To upgrade a package to the latest version,
e.g. <code>python -m pip install --upgrade matplotlib</code>.</p>
<p>To display information about a particular installed package do:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip show matplotlib</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Name: matplotlib
Version: 3.9.0
Summary: Python plotting package
Home-page:
Author: John D. Hunter, Michael Droettboom
Author-email: Unknown &lt;matplotlib-users@python.org&gt;
License: License agreement for matplotlib versions 1.3.0 and later
=========================================================
...
Location: /opt/homebrew/lib/python3.11/site-packages
Requires: contourpy, cycler, fonttools, kiwisolver, numpy, packaging, pillow, pyparsing, python-dateutil
Required-by: </code></pre>
</div>
<p>To list all packages installed with <code>pip</code> (in your current
virtual environment):</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Package         Version
--------------- -----------
contourpy       1.2.1
cycler          0.12.1
DateTime        5.5
fonttools       4.53.1
kiwisolver      1.4.5
matplotlib      3.9.2
numpy           2.0.1
packaging       24.1
pillow          10.4.0
pip             23.3.1
pyparsing       3.1.2
python-dateutil 2.9.0.post0
pytz            2024.1
setuptools      69.0.2
six             1.16.0
zope.interface  7.0.1</code></pre>
</div>
<p>To uninstall a package installed in the virtual environment do:
<code>python -m pip uninstall &lt;package-name&gt;</code>. You can also
supply a list of packages to uninstall at the same time.</p>
</section><section><h2 class="section-heading" id="sharing-virtual-environments">Sharing virtual environments<a class="anchor" aria-label="anchor" href="#sharing-virtual-environments"></a>
</h2>
<hr class="half-width">
<p>You are collaborating on a project with a team so, naturally, you
will want to share your environment with your collaborators so they can
easily ‘clone’ your software project with all of its dependencies and
everyone can replicate equivalent virtual environments on their
machines. <code>pip</code> has a handy way of exporting, saving and
sharing virtual environments.</p>
<p>To export your active environment - use
<code>python -m pip freeze</code> command to produce a list of packages
installed in the virtual environment. A common convention is to put this
list in a <code>requirements.txt</code> file in your project’s root
directory:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> cat requirements.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>contourpy==1.2.1
cycler==0.12.1
DateTime==5.5
fonttools==4.53.1
kiwisolver==1.4.5
matplotlib==3.9.2
numpy==2.0.1
packaging==24.1
pillow==10.4.0
pyparsing==3.1.2
python-dateutil==2.9.0.post0
pytz==2024.1
six==1.16.0
zope.interface==7.0.1</code></pre>
</div>
<p>The first of the above commands will create a
<code>requirements.txt</code> file in your current directory. Yours may
look a little different, depending on the version of the packages you
have installed, as well as any differences in the packages that they
themselves use.</p>
<p>The <code>requirements.txt</code> file can then be committed to a
version control system (we will see how to do this using Git in a
moment) and get shipped as part of your software and shared with
collaborators and/or users.</p>
<p>Note that you only need to share the small
<code>requirements.txt</code> file with your collaborators - and not the
entire<br><code>venv_spacewalks</code> directory with packages contained in your
virtual environment. We need to tell Git to ignore that directory, so it
is not tracked and shared - we do this by creating a file
<code>.gitignore</code> in the root directory of our project and adding
a line <code>venv_spacewalks</code> to it.</p>
<p>Let’s now put <code>requirements.txt</code> under version control and
share it along with our code.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Initial commit of requirements.txt."</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<p>Your collaborators or users of your software can now download your
software’s source code and replicate the same virtual software
environment for running your code on their machines using
<code>requirements.txt</code> to install all the necessary depending
packages.</p>
<p>To recreate a virtual environment from <code>requirements.txt</code>,
from the project root one can do the following:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install <span class="at">-r</span> requirements.txt</span></code></pre>
</div>
<p>As your project grows - you may need to update your environment for a
variety of reasons, e.g.:</p>
<ul>
<li>one of your project’s dependencies has just released a new version
(dependency version number update),</li>
<li>you need an additional package for data analysis (adding a new
dependency), or</li>
<li>you have found a better package and no longer need the older package
(adding a new and removing an old dependency).</li>
</ul>
<p>What you need to do in this case (apart from installing the new and
removing the packages that are no longer needed from your virtual
environment) is update the contents of the <code>requirements.txt</code>
file accordingly by re-issuing <code>pip freeze</code> command and
propagate the updated <code>requirements.txt</code> file to your
collaborators via your code sharing platform.</p>
</section><section><h2 class="section-heading" id="running-the-code">Running the code<a class="anchor" aria-label="anchor" href="#running-the-code"></a>
</h2>
<hr class="half-width">
<p>We are now setup to run our code from the newly created virtual
environment:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py</span></code></pre>
</div>
<p>You should get a pop up window with a graph. Let’s inspect the code
in a more detail, see if we can understand and improve it.</p>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://docs.python.org/3/tutorial/venv.html" class="external-link">Official
Python Documentation: Virtual Environments and Packages</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Virtual environments keep Python versions and dependencies required
by different projects separate.</li>
<li>A Python virtual environment is itself a directory structure.</li>
<li>You can use <code>venv</code> to create and manage Python virtual
environments, and <code>pip</code> to install and manage Python external
(third-party) libraries.</li>
<li>By convention, you can save and export your Python virtual
environment in a <code>requirements.txt</code> in your project’s root
directory, which can then be shared with collaborators/users and used to
replicate your virtual environment elsewhere.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-06-code-readability"><p>Content from <a href="06-code-readability.html">Code readability</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/06-code-readability.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why does code readability matter?</li>
<li>How can I organise my code to be more readable?</li>
<li>What types of documentation can I include to improve the readability
of my code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Organise code into reusable functions that achieve a singular
purpose</li>
<li>Choose function and variable names that help explain the purpose of
the function or variable</li>
<li>Write informative comments and docstrings to provide more detail
about what the code is doing</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode, we will introduce the concept of readable code and
consider how it can help create reusable scientific software and empower
collaboration between researchers.</p>
<p>When someone writes code, they do so based on requirements that are
likely to change in the future. Requirements change because software
interacts with the real world, which is dynamic. When these requirements
change, the developer (who is not necessarily the same person who wrote
the original code) must implement the new requirements. They do this by
reading the original code to understand the different abstractions, and
identify what needs to change. Readable code facilitates the reading and
understanding of the abstraction phases and, as a result, facilitates
the evolution of the codebase. Readable code saves future developers’
time and effort.</p>
<p>In order to develop readable code, we should ask ourselves: “If I
re-read this piece of code in fifteen days or one year, will I be able
to understand what I have done and why?” Or even better: “If a new
person who just joined the project reads my software, will they be able
to understand what I have written here?”</p>
<p>We will now learn about a few software best practices we can follow
to help create more readable code.</p>
<div id="activate-your-virtual-environment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="activate-your-virtual-environment" class="callout-inner">
<h3 class="callout-title">Activate your virtual environment</h3>
<div class="callout-content">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="place-import-statements-at-the-top">Place <code>import</code> statements at the top<a class="anchor" aria-label="anchor" href="#place-import-statements-at-the-top"></a>
</h2>
<hr class="half-width">
<p>Let’s have a look our code again - the first thing we may notice is
that our script currently places import statements throughout the code.
Conventionally, all import statements are placed at the top of the
script so that dependant libraries are clearly visible and not buried
inside the code (even though there are standard ways of describing
dependencies - e.g. using <code>requirements.txt</code> file). This will
help readability (accessibility) and reusability of our code.</p>
<p>Our code after the modification should look like the following.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span> </span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>fieldnames <span class="op">=</span> (<span class="st">"EVA #"</span>, <span class="st">"Country"</span>, <span class="st">"Crew    "</span>, <span class="st">"Vehicle"</span>, <span class="st">"Date"</span>, <span class="st">"Duration"</span>, <span class="st">"Purpose"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>    line<span class="op">=</span>data_f.readline()</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>w<span class="op">=</span>csv.writer(data_t)</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb2-52"><a href="#cb2-52" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb2-53"><a href="#cb2-53" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb2-55"><a href="#cb2-55" tabindex="-1"></a></span>
<span id="cb2-56"><a href="#cb2-56" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb2-57"><a href="#cb2-57" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb2-58"><a href="#cb2-58" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb2-59"><a href="#cb2-59" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb2-60"><a href="#cb2-60" tabindex="-1"></a>plt.savefig(g_file)</span>
<span id="cb2-61"><a href="#cb2-61" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Let’s make sure we commit our changes.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Move import statements to the top of the script"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="use-meaningful-variable-names">Use meaningful variable names<a class="anchor" aria-label="anchor" href="#use-meaningful-variable-names"></a>
</h2>
<hr class="half-width">
<p>Variables are the most common thing you will assign when coding, and
it’s really important that it is clear what each variable means in order
to understand what the code is doing. If you return to your code after a
long time doing something else, or share your code with a colleague, it
should be easy enough to understand what variables are involved in your
code from their names. Therefore we need to give them clear names, but
we also want to keep them concise so the code stays readable. There are
no “hard and fast rules” here, and it’s often a case of using your best
judgment.</p>
<p>Some useful tips for naming variables are:</p>
<ul>
<li>Short words are better than single character names. For example, if
we were creating a variable to store the speed to read a file,
<code>s</code> (for ‘speed’) is not descriptive enough but
<code>MBReadPerSecondAverageAfterLastFlushToLog</code> is too long to
read and prone to misspellings. <code>ReadSpeed</code> (or
<code>read_speed</code>) would suffice.</li>
<li>If you are finding it difficult to come up with a variable name that
is both short and descriptive, go with the short version and use an
inline comment to describe it further (more on those in the next
section). This guidance does not necessarily apply if your variable is a
well-known constant in your domain - for example, <em>c</em> represents
the speed of light in physics.</li>
<li>Try to be descriptive where possible and avoid meaningless or funny
names like <code>foo</code>, <code>bar</code>, <code>var</code>,
<code>thing</code>, etc.</li>
</ul>
<p>There are also some restrictions to consider when naming variables in
Python:</p>
<ul>
<li>Only alphanumeric characters and underscores are permitted in
variable names.</li>
<li>You cannot begin your variable names with a numerical character as
this will raise a syntax error. Numerical characters can be included in
a variable name, just not as the first character. For example,
<code>read_speed1</code> is a valid variable name, but
<code>1read_speed</code> isn’t. (This behaviour may be different for
other programming languages.)</li>
<li>Variable names are case sensitive. So <code>speed_of_light</code>
and <code>Speed_Of_Light</code> are not the same.</li>
<li>Programming languages often have global pre-built functions, such as
<code>input</code>, which you may accidentally overwrite if you assign a
variable with the same name and no longer be able to access the original
<code>input</code> function. In this case, opting for something like
<code>input_data</code> would be preferable. Note that this behaviour
may be explicitly disallowed in other programming languages but is not
in Python.</li>
</ul>
<div id="give-a-descriptive-name-to-a-variable" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="give-a-descriptive-name-to-a-variable" class="callout-inner">
<h3 class="callout-title">Give a descriptive name to a variable</h3>
<div class="callout-content">
<p>Below we have a variable called <code>var</code> being set the value
of 9.81. <code>var</code> is not a very descriptive name here as it
doesn’t tell us what 9.81 means, yet it is a very common constant in
physics! Go online and find out which constant 9.81 relates to and
suggest a new name for this variable.</p>
<p>Hint: the units are <em>metres per second squared</em>!</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>var <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p><span class="math display">\[ 9.81 m/s^2 \]</span> is the <a href="https://en.wikipedia.org/wiki/Gravity_of_Earth" class="external-link">gravitational
force exerted by the Earth</a>. It is often referred to as “little g” to
distinguish it from “big G” which is the <a href="https://en.wikipedia.org/wiki/Gravitational_constant" class="external-link">Gravitational
Constant</a>. A more descriptive name for this variable therefore might
be:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>g_earth <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="rename-our-variables-to-be-more-descriptive" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="rename-our-variables-to-be-more-descriptive" class="callout-inner">
<h3 class="callout-title">Rename our variables to be more descriptive</h3>
<div class="callout-content">
<p>Let’s apply this to <code>eva_data_analysis.py</code>.</p>
<ol style="list-style-type: lower-alpha">
<li>
<p>Edit the code as follows to use descriptive variable names:</p>
<ul>
<li>Change data_f to input_file</li>
<li>Change data_t to output_file</li>
<li>Change g_file to graph_file</li>
</ul>
</li>
<li><p>What other variable names in our code would benefit from
renaming?</p></li>
<li><p>Commit your changes to your repository. Remember to use an
informative commit message.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Updated code:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>fieldnames <span class="op">=</span> (<span class="st">"EVA #"</span>, <span class="st">"Country"</span>, <span class="st">"Crew    "</span>, <span class="st">"Vehicle"</span>, <span class="st">"Date"</span>, <span class="st">"Duration"</span>, <span class="st">"Purpose"</span>)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>    line<span class="op">=</span>input_file.readline()</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>w<span class="op">=</span>csv.writer(output_file)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a></span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a></span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a></span>
<span id="cb6-56"><a href="#cb6-56" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb6-57"><a href="#cb6-57" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb6-58"><a href="#cb6-58" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb6-59"><a href="#cb6-59" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb6-60"><a href="#cb6-60" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb6-61"><a href="#cb6-61" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>We should also rename variables <code>w</code>, <code>t</code>,
<code>ttt</code> to be more descriptive.</p>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use descriptive variable names"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="use-standard-libraries">Use standard libraries<a class="anchor" aria-label="anchor" href="#use-standard-libraries"></a>
</h2>
<hr class="half-width">
<p>Our script currently reads the data line-by-line from the JSON data
file and uses custom code to manipulate the data. Variables of interest
are stored in lists but there are more suitable data structures
(e.g. data frames) to store data in our case. By choosing custom code
over standard and well-tested libraries, we are making our code less
readable and understandable and more error-prone.</p>
<p>The main functionality of our code can be rewritten as follows using
the <code>Pandas</code> library to load and manipulate the data in data
frames.</p>
<p>First, we need to install this dependency into our virtual
environment (which should be active at this point).</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python <span class="at">-m</span> pip install pandas</span></code></pre>
</div>
<p>The code should now look like:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Data source: https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>plt.plot(eva_df[<span class="st">'date'</span>], eva_df[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>We should replace the existing code in our Python script
<code>eva_data_analysis.py</code> with the above code and commit the
changes. Remember to use an informative commit message.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Refactor code to use standard libraries"</span></span></code></pre>
</div>
<p>Make sure to capture the changes to your virtual development
environment too.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Added Pandas library."</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="use-comments-to-explain-functionality">Use comments to explain functionality<a class="anchor" aria-label="anchor" href="#use-comments-to-explain-functionality"></a>
</h2>
<hr class="half-width">
<p>Commenting is a very useful practice to help convey the context of
the code. It can be helpful as a reminder for your future self or your
collaborators as to why code is written in a certain way, how it is
achieving a specific task, or the real-world implications of your
code.</p>
<p>There are several ways to add comments to code:</p>
<ul>
<li>An <strong>inline comment</strong> is a comment on the same line as
a code statement. Typically, it comes after the code statement and
finishes when the line ends and is useful when you want to explain the
code line in short. Inline comments in Python should be separated by at
least two spaces from the statement; they start with a # followed by a
single space, and have no end delimiter.</li>
<li>A <strong>multi-line</strong> or <strong>block comment</strong> can
span multiple lines and has a start and end sequence. To comment out a
block of code in Python, you can either add a # at the beginning of each
line of the block or surround the entire block with three single
(<code>'''</code>) or double quotes (<code>"""</code>).</li>
</ul>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">5</span>  <span class="co"># In Python, inline comments begin with the `#` symbol and a single space.</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">This is a multiline</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">comment</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">in Python.</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">'''</span></span></code></pre>
</div>
<p>Here are a few things to keep in mind when commenting your code:</p>
<ul>
<li>Focus on the <strong>why</strong> and the <strong>how</strong> of
your code - avoid using comments to explain <strong>what</strong> your
code does. If your code is too complex for other programmers to
understand, consider rewriting it for clarity rather than adding
comments to explain it.</li>
<li>Make sure you are not reiterating something that your code already
conveys on its own. Comments should not echo your code.</li>
<li>Keep comments short and concise. Large blocks of text quickly become
unreadable and difficult to maintain.</li>
<li>Comments that contradict the code are worse than no comments. Always
make a priority of keeping comments up-to-date when code changes.</li>
</ul>
<div class="section level3">
<h3 id="examples-of-unhelpful-comments">Examples of unhelpful comments<a class="anchor" aria-label="anchor" href="#examples-of-unhelpful-comments"></a>
</h3>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># Assigns the float 1.0625 to the variable 'statetax'</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'citytax'</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'specialtax'</span></span></code></pre>
</div>
<p>The comments in this code simply tell us what the code does, which is
easy enough to figure out without the inline comments.</p>
</div>
<div class="section level3">
<h3 id="examples-of-helpful-comments">Examples of helpful comments<a class="anchor" aria-label="anchor" href="#examples-of-helpful-comments"></a>
</h3>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># State sales tax rate is 6.25% through Jan. 1</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># City sales tax rate is 1% through Jan. 1</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Special sales tax rate is 1% through Jan. 1</span></span></code></pre>
</div>
<p>In this case, it might not be immediately obvious what each variable
represents, so the comments offer helpful, real-world context. The date
in the comment also indicates when the code might need to be
updated.</p>
<div id="add-comments-to-our-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-comments-to-our-code" class="callout-inner">
<h3 class="callout-title">Add comments to our code</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha">
<li>Examine <code>eva_data_analysis.py</code>. Add as many comments as
you think is required to help yourself and others understand what that
code is doing.</li>
<li>Commit your changes to your repository. Remember to use an
informative commit message.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Some good comments may look like the example below.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a>eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a>eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a>eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a><span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a>eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb15-25"><a href="#cb15-25" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb15-26"><a href="#cb15-26" tabindex="-1"></a>eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb15-27"><a href="#cb15-27" tabindex="-1"></a>eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb15-28"><a href="#cb15-28" tabindex="-1"></a>plt.plot(eva_df[<span class="st">'date'</span>], eva_df[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb15-29"><a href="#cb15-29" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb15-30"><a href="#cb15-30" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb15-31"><a href="#cb15-31" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-32"><a href="#cb15-32" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb15-33"><a href="#cb15-33" tabindex="-1"></a>plt.show()</span>
<span id="cb15-34"><a href="#cb15-34" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add inline comments to the code"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="separate-units-of-functionality">Separate units of functionality<a class="anchor" aria-label="anchor" href="#separate-units-of-functionality"></a>
</h2>
<hr class="half-width">
<p>Functions are a fundamental concept in writing software and are one
of the core ways you can organise your code to improve its readability.
A function is an isolated section of code that performs a single,
<em>specific</em> task that can be simple or complex. It can then be
called multiple times with different inputs throughout a codebase, but
its definition only needs to appear once.</p>
<p>Breaking up code into functions in this manner benefits readability
since the smaller sections are easier to read and understand. Since
functions can be reused, codebases naturally begin to follow the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" class="external-link">Don’t
Repeat Yourself principle</a> which prevents software from becoming
overly long and confusing. The software also becomes easier to maintain
because, if the code encapsulated in a function needs to change, it only
needs updating in one place instead of many. As we will learn in a
future episode, testing code also becomes simpler when code is written
in functions. Each function can be individually checked to ensure it is
doing what is intended, which improves confidence in the software as a
whole.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Decomposing code into functions helps with reusability of blocks of
code and eliminating repetition, but, equally importantly, it helps with
code readability and testing.</p>
</div>
</div>
</div>
<p>Looking at our code, you may notice it contains different pieces of
functionality:</p>
<ol style="list-style-type: decimal">
<li>reading the data from a JSON file</li>
<li>converting and saving the data in the CSV format</li>
<li>processing/cleaning the data and preparing it for analysis</li>
<li>data analysis and visualising the results</li>
</ol>
<p>Let’s refactor our code so that reading the data in JSON format into
a dataframe (step 1.) and converting it and saving to the CSV format
(step 2.) are extracted into separate functions. Let’s name those
functions <code>read_json_to_dataframe</code> and
<code>write_dataframe_to_csv</code> respectively. The main part of the
script should then be simplified to invoke these new functions, while
the functions themselves contain the complexity of each of these two
steps. We will continue to work on steps 3. and 4. above later on.</p>
<p>After the initial refactoring, our code may look something like the
following.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a></span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a><span class="co"># Read the data from JSON file</span></span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a><span class="co"># Convert and export data to CSV file</span></span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a></span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a>eva_data[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a>eva_data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb17-40"><a href="#cb17-40" tabindex="-1"></a>plt.plot(eva_data[<span class="st">'date'</span>], eva_data[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb17-41"><a href="#cb17-41" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb17-42"><a href="#cb17-42" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb17-43"><a href="#cb17-43" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb17-44"><a href="#cb17-44" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb17-45"><a href="#cb17-45" tabindex="-1"></a>plt.show()</span>
<span id="cb17-46"><a href="#cb17-46" tabindex="-1"></a></span>
<span id="cb17-47"><a href="#cb17-47" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>We have chosen to create functions for reading in and writing out
data files since this is a very common task within research software.
While these functions do not contain that many lines of code due to
using the <code>pandas</code> in-built methods that do all the complex
data reading, converting and writing operations, it can be useful to
package these steps together into reusable functions if you need to read
in or write out a lot of similarly structured files and process them in
the same way.</p>
</section><section><h2 class="section-heading" id="use-docstrings-to-document-functions">Use docstrings to document functions<a class="anchor" aria-label="anchor" href="#use-docstrings-to-document-functions"></a>
</h2>
<hr class="half-width">
<p>Now that we have written some functions, it is time to document them
so that we can quickly recall (and others looking at our code in the
future can understand) what the functions doe without having to read the
code.</p>
<p><em>Docstrings</em> are a specific type of documentation that are
provided within functions and <a href="https://docs.python.org/3/tutorial/classes.html" class="external-link">Python
classes</a>. A function docstring should explain what that particular
code is doing, what parameters the function needs (inputs) and what form
they should take, what the function outputs (you may see words like
‘returns’ or ‘yields’ here), and errors (if any) that might be
raised.</p>
<p>Providing these docstrings helps improve code readability since it
makes the function code more transparent and aids understanding.
Particularly, docstrings that provide information on the input and
output of functions makes it easier to reuse them in other parts of the
code, without having to read the full function to understand what needs
to be provided and what will be returned.</p>
<p>Python docstrings are defined by enclosing the text with 3 double
quotes (<code>"""</code>). This text is also indented to the same level
as the code defined beneath it, which is 4 whitespaces by
convention.</p>
<div class="section level3">
<h3 id="example-of-a-single-line-docstring">Example of a single-line docstring<a class="anchor" aria-label="anchor" href="#example-of-a-single-line-docstring"></a>
</h3>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">def</span> add(x, y):</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>    <span class="co">"""Add two numbers together"""</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="example-of-a-multi-line-docstring">Example of a multi-line docstring<a class="anchor" aria-label="anchor" href="#example-of-a-multi-line-docstring"></a>
</h3>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">def</span> divide(x, y):</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">    Divide number x by number y.</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">        x: A number to be divided.</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">        y: A number to divide by.</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co">        float: The division of x by y.</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="co">    Raises:</span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co">        ZeroDivisionError: Cannot divide by zero.</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">/</span> y</span></code></pre>
</div>
<p>Some projects may have their own guidelines on how to write
docstrings, such as <a href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard" class="external-link">numpy</a>.
If you are contributing code to a wider project or community, try to
follow the guidelines and standards they provide for code style.</p>
<p>As your code grows and becomes more complex, the docstrings can form
the content of a reference guide allowing developers to quickly look up
how to use the APIs, functions, and classes defined in your codebase.
Hence, it is common to find tools that will automatically extract
docstrings from your code and generate a website where people can learn
about your code without downloading/installing and reading the code
files - such as <a href="https://www.mkdocs.org/" class="external-link">MkDocs</a>.</p>
<p>Let’s write a docstring for the function
<code>read_json_to_dataframe</code> we introduced in the previous
exercise using the <a href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html" class="external-link">Google
Style Python Docstrings Convention</a>. Remember, questions we want to
answer when writing the docstring include:</p>
<ul>
<li>What the function does?</li>
<li>What kind of inputs does the function take? Are they required or
optional? Do they have default values?</li>
<li>What output will the function produce?</li>
<li>What exceptions/errors, if any, it can produce?</li>
</ul>
<p>Our <code>read_json_to_dataframe</code> function fully described by a
docstring may look like:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span></code></pre>
</div>
<div id="writing-docstrings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="writing-docstrings" class="callout-inner">
<h3 class="callout-title">Writing docstrings</h3>
<div class="callout-content">
<p>Write a docstring for the function
<code>write_dataframe_to_csv</code> we introduced earlier.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Our <code>write_dataframe_to_csv</code> function fully described by a
docstring may look like:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="co">Write the dataframe to a CSV file.</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Finally, our code may look something like the following:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb22-22"><a href="#cb22-22" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-23"><a href="#cb22-23" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-24"><a href="#cb22-24" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb22-25"><a href="#cb22-25" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb22-28"><a href="#cb22-28" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb22-29"><a href="#cb22-29" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb22-30"><a href="#cb22-30" tabindex="-1"></a></span>
<span id="cb22-31"><a href="#cb22-31" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb22-32"><a href="#cb22-32" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb22-33"><a href="#cb22-33" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb22-34"><a href="#cb22-34" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb22-36"><a href="#cb22-36" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb22-37"><a href="#cb22-37" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb22-38"><a href="#cb22-38" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-39"><a href="#cb22-39" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb22-40"><a href="#cb22-40" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb22-41"><a href="#cb22-41" tabindex="-1"></a></span>
<span id="cb22-42"><a href="#cb22-42" tabindex="-1"></a></span>
<span id="cb22-43"><a href="#cb22-43" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb22-44"><a href="#cb22-44" tabindex="-1"></a></span>
<span id="cb22-45"><a href="#cb22-45" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb22-46"><a href="#cb22-46" tabindex="-1"></a></span>
<span id="cb22-47"><a href="#cb22-47" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb22-48"><a href="#cb22-48" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb22-49"><a href="#cb22-49" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb22-50"><a href="#cb22-50" tabindex="-1"></a></span>
<span id="cb22-51"><a href="#cb22-51" tabindex="-1"></a><span class="co"># Read the data from JSON file</span></span>
<span id="cb22-52"><a href="#cb22-52" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb22-53"><a href="#cb22-53" tabindex="-1"></a></span>
<span id="cb22-54"><a href="#cb22-54" tabindex="-1"></a><span class="co"># Convert and export data to CSV file</span></span>
<span id="cb22-55"><a href="#cb22-55" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb22-56"><a href="#cb22-56" tabindex="-1"></a></span>
<span id="cb22-57"><a href="#cb22-57" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-58"><a href="#cb22-58" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb22-59"><a href="#cb22-59" tabindex="-1"></a>eva_data[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb22-60"><a href="#cb22-60" tabindex="-1"></a>eva_data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb22-61"><a href="#cb22-61" tabindex="-1"></a>plt.plot(eva_data[<span class="st">'date'</span>], eva_data[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb22-62"><a href="#cb22-62" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb22-63"><a href="#cb22-63" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb22-64"><a href="#cb22-64" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb22-65"><a href="#cb22-65" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb22-66"><a href="#cb22-66" tabindex="-1"></a>plt.show()</span>
<span id="cb22-67"><a href="#cb22-67" tabindex="-1"></a></span>
<span id="cb22-68"><a href="#cb22-68" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Do not forget to commit any uncommitted changes you may have and then
push your work to GitHub.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add <span class="op">&lt;</span>your_changed_files<span class="op">&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Your commit message"</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://www.index.dev/blog/7-tell-tale-signs-of-unreadable-code-how-to-identify-and-fix-the-problem" class="external-link">7
tell-tale signs of unreadable code</a></li>
<li><a href="https://www.theguardian.com/info/2019/jan/29/code-readability-matters" class="external-link">‘Code
Readability Matters’ from the Guardian’s engineering blog</a></li>
<li><a href="https://peps.python.org/pep-0008/#comments" class="external-link">PEP 8 Style
Guide for Python</a></li>
<li><a href="https://www.coursera.org/tutorials/python-comment#inline-commenting-in-python" class="external-link">Coursera:
Inline commenting in Python</a></li>
<li><a href="https://introtopython.org/introducing_functions.html" class="external-link">Introducing
Functions from Introduction to Python</a></li>
<li><a href="https://www.w3schools.com/python/python_functions.asp" class="external-link">W3Schools.com
Python Functions</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Readable code is easier to understand, maintain, debug and extend
(reuse) - saving time and effort.</li>
<li>Choosing descriptive variable and function names will communicate
their purpose more effectively.</li>
<li>Using comments and docstrings to describe parts of the code will
help transmit understanding and context.</li>
<li>Use libraries or packages for common functionality to avoid
duplication.</li>
<li>Creating functions from the smallest, reusable units of code will
make the code more readable and help. compartmentalise which parts of
the code are doing what actions and isolate specific code sections for
re-use.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-07-code-structure"><p>Content from <a href="07-code-structure.html">Code structure</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/07-code-structure.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we best structure code?</li>
<li>What is a common code structure (pattern) for creating software that
can read input from command line?</li>
<li>What are conventional places to store data, code, results, tests,
auxiliary information and metadata within our software or research
project?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Structure code into smaller, reusable components with a single
responsibility/functionality.</li>
<li>Use the common code pattern for creating software that can read
input from command line</li>
<li>Follow best practices for organising software/research project
directories for improved readability, accessibility and
reproducibility.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the previous episode we have seen some tools and practices that
can help up improve readability of our code - including breaking our
code into small, reusable functions that perform one specific task. We
are going to explore a bit more how using common code structures can
improve readability, accessibility and reusability of our code, and will
expand these practices on our (research or code) projects as a
whole.</p>
<div id="activate-your-virtual-environment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="activate-your-virtual-environment" class="callout-inner">
<h3 class="callout-title">Activate your virtual environment</h3>
<div class="callout-content">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="functions-for-modular-and-reusable-code">Functions for Modular and Reusable Code<a class="anchor" aria-label="anchor" href="#functions-for-modular-and-reusable-code"></a>
</h2>
<hr class="half-width">
<p>As we have already seen in the previous episode - functions play a
key role in creating modular and reusable code. We are going to carry on
improving our code following these principles:</p>
<ul>
<li>Each function should have a single, clear responsibility. This makes
functions easier to understand, test, and reuse.</li>
<li>Write functions that can be easily combined or reused with other
functions to build more complex functionality.</li>
<li>Functions should accept parameters to allow flexibility and
reusability in different contexts; avoid hard-coding values inside
functions/code (e.g. data files to read from/write to) and pass them as
arguments instead.</li>
</ul>
<p>Bearing in mind the above principles, we can further simplify the
main part of our code by extracting the code to process, analyse our
data and plot a graph into a separate function
<code>plot_cumulative_time_in_space</code>.</p>
<p>We can further extract the code to convert the spacewalk duration
text into a number to allow for arithmetic calculations (into a separate
function <code>text_to_duration</code>) and the code to add this
numerical data as a new column in our dataset (into a separate function
<code>add_duration_hours_variable</code>).</p>
<p>The main part of our code then becomes much simpler and more
readable, only containing the invocation of the following three
functions:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>...</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>...</span></code></pre>
</div>
<p>Remember to add docstrings and comments to the new functions to
explain their functionalities.</p>
<p>Our new code (with the three new functions
<code>plot_cumulative_time_in_space</code>,
<code>text_to_duration</code> and
<code>add_duration_hours_variable</code>) may look like the
following.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a></span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># there is an intentional bug on this line (should divide by 60 not 6)</span></span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" tabindex="-1"></a></span>
<span id="cb3-55"><a href="#cb3-55" tabindex="-1"></a><span class="kw">def</span> add_duration_hours_variable(df):</span>
<span id="cb3-56"><a href="#cb3-56" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-57"><a href="#cb3-57" tabindex="-1"></a><span class="co">    Add duration in hours (duration_hours) variable to the dataset</span></span>
<span id="cb3-58"><a href="#cb3-58" tabindex="-1"></a></span>
<span id="cb3-59"><a href="#cb3-59" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-60"><a href="#cb3-60" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb3-61"><a href="#cb3-61" tabindex="-1"></a></span>
<span id="cb3-62"><a href="#cb3-62" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-63"><a href="#cb3-63" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new duration_hours variable added</span></span>
<span id="cb3-64"><a href="#cb3-64" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-65"><a href="#cb3-65" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb3-66"><a href="#cb3-66" tabindex="-1"></a>    df_copy[<span class="st">"duration_hours"</span>] <span class="op">=</span> df_copy[<span class="st">"duration"</span>].<span class="bu">apply</span>(</span>
<span id="cb3-67"><a href="#cb3-67" tabindex="-1"></a>        text_to_duration</span>
<span id="cb3-68"><a href="#cb3-68" tabindex="-1"></a>    )</span>
<span id="cb3-69"><a href="#cb3-69" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb3-70"><a href="#cb3-70" tabindex="-1"></a></span>
<span id="cb3-71"><a href="#cb3-71" tabindex="-1"></a></span>
<span id="cb3-72"><a href="#cb3-72" tabindex="-1"></a><span class="kw">def</span> plot_cumulative_time_in_space(df, graph_file):</span>
<span id="cb3-73"><a href="#cb3-73" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-74"><a href="#cb3-74" tabindex="-1"></a><span class="co">    Plot the cumulative time spent in space over years</span></span>
<span id="cb3-75"><a href="#cb3-75" tabindex="-1"></a></span>
<span id="cb3-76"><a href="#cb3-76" tabindex="-1"></a><span class="co">    Convert the duration column from strings to number of hours</span></span>
<span id="cb3-77"><a href="#cb3-77" tabindex="-1"></a><span class="co">    Calculate cumulative sum of durations</span></span>
<span id="cb3-78"><a href="#cb3-78" tabindex="-1"></a><span class="co">    Generate a plot of cumulative time spent in space over years and</span></span>
<span id="cb3-79"><a href="#cb3-79" tabindex="-1"></a><span class="co">    save it to the specified location</span></span>
<span id="cb3-80"><a href="#cb3-80" tabindex="-1"></a></span>
<span id="cb3-81"><a href="#cb3-81" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-82"><a href="#cb3-82" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb3-83"><a href="#cb3-83" tabindex="-1"></a><span class="co">        graph_file (str): The path to the output graph file.</span></span>
<span id="cb3-84"><a href="#cb3-84" tabindex="-1"></a></span>
<span id="cb3-85"><a href="#cb3-85" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-86"><a href="#cb3-86" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb3-87"><a href="#cb3-87" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-88"><a href="#cb3-88" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb3-89"><a href="#cb3-89" tabindex="-1"></a>    df <span class="op">=</span> add_duration_hours_variable(df)</span>
<span id="cb3-90"><a href="#cb3-90" tabindex="-1"></a>    df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb3-91"><a href="#cb3-91" tabindex="-1"></a>    plt.plot(df.date, df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb3-92"><a href="#cb3-92" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb3-93"><a href="#cb3-93" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb3-94"><a href="#cb3-94" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb3-95"><a href="#cb3-95" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb3-96"><a href="#cb3-96" tabindex="-1"></a>    plt.show()</span>
<span id="cb3-97"><a href="#cb3-97" tabindex="-1"></a></span>
<span id="cb3-98"><a href="#cb3-98" tabindex="-1"></a></span>
<span id="cb3-99"><a href="#cb3-99" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb3-100"><a href="#cb3-100" tabindex="-1"></a></span>
<span id="cb3-101"><a href="#cb3-101" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb3-102"><a href="#cb3-102" tabindex="-1"></a></span>
<span id="cb3-103"><a href="#cb3-103" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb3-104"><a href="#cb3-104" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb3-105"><a href="#cb3-105" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb3-106"><a href="#cb3-106" tabindex="-1"></a></span>
<span id="cb3-107"><a href="#cb3-107" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb3-108"><a href="#cb3-108" tabindex="-1"></a></span>
<span id="cb3-109"><a href="#cb3-109" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb3-110"><a href="#cb3-110" tabindex="-1"></a></span>
<span id="cb3-111"><a href="#cb3-111" tabindex="-1"></a>plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb3-112"><a href="#cb3-112" tabindex="-1"></a></span>
<span id="cb3-113"><a href="#cb3-113" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span>
<span id="cb3-114"><a href="#cb3-114" tabindex="-1"></a></span></code></pre>
</div>
<p>As you may notice, the main part of our code has now been majorly
simplified and is much easier to follow.</p>
</section><section><h2 class="section-heading" id="command-line-interface-to-code">Command-line interface to code<a class="anchor" aria-label="anchor" href="#command-line-interface-to-code"></a>
</h2>
<hr class="half-width">
<p>A common way to structure code is to have a command-line interface to
allow the passing of various parameters. For example, we can pass the
input data file to be read and the output file to be written to as
parameters to our script and avoid hard-coding them. This improves
interoperability and reusability of our code as it can now be run over
any data file of the same structure, invoked from the command line
terminal and integrated into other scripts or workflows/pipelines. For
example, another script can produce our input data and can be “chained”
with our code in a more complex data analysis pipeline. Another use case
would be invoking our script in a loop to automatically analyse a number
of input data files (compare that to running the script manually over
hundreds or thousands of files - which is slow, error-prone and requires
manual intervention).</p>
<p>There is a common code structure (pattern) for writing code with a
command-line interface in Python:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># import modules</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="kw">def</span> main(args):</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="co"># perform some actions</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="co"># perform some actions before main()</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    main(args)</span></code></pre>
</div>
<p>In this pattern the main actions performed by the script are
contained within the <code>main</code> function (which does not need to
be called <code>main</code>, but using this convention helps others in
understanding your code). The <code>main</code> function is then called
within the <code>if</code> statement
<code>__name__ == "__main__"</code>, after some other actions have been
performed (usually the parsing of command-line arguments, which will be
explained below). <code>__name__</code> is a special variable which is
set by the Python interpreter before the execution of any code in the
source file. What value is given by the interpreter to
<code>__name__</code> is determined by the manner in which the script is
invoked.</p>
<p>If we run the source file directly using the Python interpreter,
e.g.:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> python3 eva_data_analysis.py</span></code></pre>
</div>
<p>then the interpreter will assign the hard-coded string
<code>"__main__"</code> to the <code>__name__</code> variable:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="va">__name__</span> <span class="op">=</span> <span class="st">"__main__"</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>...</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co"># rest of your code</span></span></code></pre>
</div>
<p>However, if your script is imported by another Python script, e.g. in
order to reuse its functions, with:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> eva_data_analysis</span></code></pre>
</div>
<p>then the Python interpreter will assign the name “eva_data_analysis”
from the import statement to the <code>__name__</code> variable (note
that import statement matches our script’s name):</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="va">__name__</span> <span class="op">=</span> <span class="st">"eva_data_analysis"</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>...</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co"># rest of your code</span></span></code></pre>
</div>
<p>Because of this behaviour of the Python interpreter, we can put any
code that should only be executed when running the script directly
within the <code>if __name__ == "__main__":</code> structure, allowing
the rest of the code within the script to be safely imported by another
script if we so wish.</p>
<p>While it may not seem very useful to have your script importable by
another script, there are a number of situations in which you would want
to do this:</p>
<ul>
<li>for testing of your code, you can have your testing framework import
your script, and run special test functions which then call the
<code>main</code> function directly;</li>
<li>where you want to not only be able to run your script from the
command-line, but also provide a programmer-friendly application
programming interface (API) for advanced users.</li>
</ul>
<p>We will use the <code>sys</code> library to read the command line
arguments passed to our script and make them available in our code as a
list - remember to import this library first.</p>
<p>Our modified code will now look as follows.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="kw">def</span> main(input_file, output_file, graph_file):</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>    write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb9-36"><a href="#cb9-36" tabindex="-1"></a></span>
<span id="cb9-37"><a href="#cb9-37" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb9-39"><a href="#cb9-39" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-40"><a href="#cb9-40" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb9-41"><a href="#cb9-41" tabindex="-1"></a></span>
<span id="cb9-42"><a href="#cb9-42" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-43"><a href="#cb9-43" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb9-44"><a href="#cb9-44" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb9-45"><a href="#cb9-45" tabindex="-1"></a></span>
<span id="cb9-46"><a href="#cb9-46" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-47"><a href="#cb9-47" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb9-48"><a href="#cb9-48" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-49"><a href="#cb9-49" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-50"><a href="#cb9-50" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-51"><a href="#cb9-51" tabindex="-1"></a></span>
<span id="cb9-52"><a href="#cb9-52" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb9-53"><a href="#cb9-53" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-54"><a href="#cb9-54" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb9-55"><a href="#cb9-55" tabindex="-1"></a></span>
<span id="cb9-56"><a href="#cb9-56" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-57"><a href="#cb9-57" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb9-58"><a href="#cb9-58" tabindex="-1"></a></span>
<span id="cb9-59"><a href="#cb9-59" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-60"><a href="#cb9-60" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb9-61"><a href="#cb9-61" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-62"><a href="#cb9-62" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb9-63"><a href="#cb9-63" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># there is an intentional bug on this line (should divide by 60 not 6)</span></span>
<span id="cb9-64"><a href="#cb9-64" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span>
<span id="cb9-65"><a href="#cb9-65" tabindex="-1"></a></span>
<span id="cb9-66"><a href="#cb9-66" tabindex="-1"></a></span>
<span id="cb9-67"><a href="#cb9-67" tabindex="-1"></a><span class="kw">def</span> add_duration_hours_variable(df):</span>
<span id="cb9-68"><a href="#cb9-68" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-69"><a href="#cb9-69" tabindex="-1"></a><span class="co">    Add duration in hours (duration_hours) variable to the dataset</span></span>
<span id="cb9-70"><a href="#cb9-70" tabindex="-1"></a></span>
<span id="cb9-71"><a href="#cb9-71" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-72"><a href="#cb9-72" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb9-73"><a href="#cb9-73" tabindex="-1"></a></span>
<span id="cb9-74"><a href="#cb9-74" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-75"><a href="#cb9-75" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new duration_hours variable added</span></span>
<span id="cb9-76"><a href="#cb9-76" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-77"><a href="#cb9-77" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb9-78"><a href="#cb9-78" tabindex="-1"></a>    df_copy[<span class="st">"duration_hours"</span>] <span class="op">=</span> df_copy[<span class="st">"duration"</span>].<span class="bu">apply</span>(</span>
<span id="cb9-79"><a href="#cb9-79" tabindex="-1"></a>        text_to_duration</span>
<span id="cb9-80"><a href="#cb9-80" tabindex="-1"></a>    )</span>
<span id="cb9-81"><a href="#cb9-81" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb9-82"><a href="#cb9-82" tabindex="-1"></a></span>
<span id="cb9-83"><a href="#cb9-83" tabindex="-1"></a></span>
<span id="cb9-84"><a href="#cb9-84" tabindex="-1"></a><span class="kw">def</span> plot_cumulative_time_in_space(df, graph_file):</span>
<span id="cb9-85"><a href="#cb9-85" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-86"><a href="#cb9-86" tabindex="-1"></a><span class="co">    Plot the cumulative time spent in space over years</span></span>
<span id="cb9-87"><a href="#cb9-87" tabindex="-1"></a></span>
<span id="cb9-88"><a href="#cb9-88" tabindex="-1"></a><span class="co">    Convert the duration column from strings to number of hours</span></span>
<span id="cb9-89"><a href="#cb9-89" tabindex="-1"></a><span class="co">    Calculate cumulative sum of durations</span></span>
<span id="cb9-90"><a href="#cb9-90" tabindex="-1"></a><span class="co">    Generate a plot of cumulative time spent in space over years and</span></span>
<span id="cb9-91"><a href="#cb9-91" tabindex="-1"></a><span class="co">    save it to the specified location</span></span>
<span id="cb9-92"><a href="#cb9-92" tabindex="-1"></a></span>
<span id="cb9-93"><a href="#cb9-93" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-94"><a href="#cb9-94" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb9-95"><a href="#cb9-95" tabindex="-1"></a><span class="co">        graph_file (str): The path to the output graph file.</span></span>
<span id="cb9-96"><a href="#cb9-96" tabindex="-1"></a></span>
<span id="cb9-97"><a href="#cb9-97" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-98"><a href="#cb9-98" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb9-99"><a href="#cb9-99" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-100"><a href="#cb9-100" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-101"><a href="#cb9-101" tabindex="-1"></a>    df <span class="op">=</span> add_duration_hours_variable(df)</span>
<span id="cb9-102"><a href="#cb9-102" tabindex="-1"></a>    df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb9-103"><a href="#cb9-103" tabindex="-1"></a>    plt.plot(df.date, df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb9-104"><a href="#cb9-104" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb9-105"><a href="#cb9-105" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb9-106"><a href="#cb9-106" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb9-107"><a href="#cb9-107" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb9-108"><a href="#cb9-108" tabindex="-1"></a>    plt.show()</span>
<span id="cb9-109"><a href="#cb9-109" tabindex="-1"></a></span>
<span id="cb9-110"><a href="#cb9-110" tabindex="-1"></a></span>
<span id="cb9-111"><a href="#cb9-111" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb9-112"><a href="#cb9-112" tabindex="-1"></a></span>
<span id="cb9-113"><a href="#cb9-113" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb9-114"><a href="#cb9-114" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb9-115"><a href="#cb9-115" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb9-116"><a href="#cb9-116" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb9-117"><a href="#cb9-117" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb9-118"><a href="#cb9-118" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb9-119"><a href="#cb9-119" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb9-120"><a href="#cb9-120" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb9-121"><a href="#cb9-121" tabindex="-1"></a></span>
<span id="cb9-122"><a href="#cb9-122" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb9-123"><a href="#cb9-123" tabindex="-1"></a>    main(input_file, output_file, graph_file)</span></code></pre>
</div>
<p>We can now run our script from the command line passing the JSON
input data file and CSV output data file as:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python eva_data_analysis.py eva-data.json eva-data.csv</span></code></pre>
</div>
<p>Remember to commit our changes.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git status</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add command line functionality to script"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="directory-structure-for-software-projects">Directory structure for software projects<a class="anchor" aria-label="anchor" href="#directory-structure-for-software-projects"></a>
</h2>
<hr class="half-width">
<p>Expanding on the code structure theme, following conventions on
consistent and informative directory structure for your projects will
ensure people will immediately know where to find things within your
project, especially helpful for long-term research projects or when
working in teams. The directory structure for organising your research
software project (or research projects in general) involves creating a
clear and logical layout for files and data, ensuring easy navigation,
collaboration and reproducibility.</p>
<p>Below are some good practices for setting up and maintaining a
research project directory structure.</p>
<ol style="list-style-type: decimal">
<li>Top-level directory
<ul>
<li>Put all files related to a project into a single directory</li>
<li>Choose a meaningful name that reflects the project’s purpose or
topic.</li>
</ul>
</li>
<li>Subdirectories - organise the project into clear, well-labeled
sub-directories based on the type of content. Common categories include:
<ul>
<li>Data - store raw, intermediate, and processed data in separate
sub-directories to maintain clarity and avoid overwriting and losing
your raw data</li>
<li>Code/scripts/src - for storing your source code</li>
<li>Results - for storing analysis outputs, summary statistics, or any
data generated after processing.</li>
<li>Documentation - include a detailed project description and
documentation on how the project is organised, methodologies, and file
dependencies.</li>
<li>Figures/Plots - store all visualisations like charts, graphs, and
figures generated from the analysis (these can also go in the results
directory).</li>
<li>References - a folder for research papers, articles, or any other
literature cited or referenced in the project.</li>
</ul>
</li>
<li>Naming conventions
<ul>
<li>Avoid special characters or spaces (they can cause errors when read
by computers); use underscores (_) or hyphens (-) instead</li>
<li>Name files to reflect their contents, version, or date (or use
version control to track different versions).</li>
</ul>
</li>
<li>Use version control
<ul>
<li>Code and data should be version controlled; you can also version
control manuscripts, results, etc.</li>
<li>If data files are too large (or contain sensitive information) to
track by version control, untrack them using
<code>.gitignore</code>
</li>
<li>Use tags/releases to mark specific versions of results (a version
submitted to a journal, dissertation version, poster version, etc.) so
as to avoid using version numbers in file names and proliferation of
different files.</li>
</ul>
</li>
</ol>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>project_name/
├── README.md             # overview of the project
├── data/                 # data files used in the project
│   ├── README.md         # describes where data came from
│   ├── raw/
│   └── processed/
├── manuscript/           # manuscript describing the results
├── results/              # results of the analysis (data, tables)
│   ├── preliminary/
│   └── final/
├── figures/              # results of the analysis (figures)
│   ├── comparison_plot.png
│   └── regression_chart.pdf
├── src/                  # contains source code for the project
│   ├── LICENSE           # license for your code
│   ├── requirements.txt  # software requirements and dependencies
│   ├── main_script.py    # main script/code entry point
│   └── ...
├── doc/                  # documentation for your project
├── index.rst             # entry point into the documentation website
└── ...</code></pre>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Refactor your software project so that input data is stored in
<code>data/</code> directory and results (the graph and CSV data files)
saved in <code>results/</code> directory. Remember to create the
<code>results/</code> directory or your code will fail.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="kw">def</span> main(input_file, output_file, graph_file):</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>    write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-33"><a href="#cb13-33" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-34"><a href="#cb13-34" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb13-35"><a href="#cb13-35" tabindex="-1"></a></span>
<span id="cb13-36"><a href="#cb13-36" tabindex="-1"></a></span>
<span id="cb13-37"><a href="#cb13-37" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb13-38"><a href="#cb13-38" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-39"><a href="#cb13-39" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb13-40"><a href="#cb13-40" tabindex="-1"></a></span>
<span id="cb13-41"><a href="#cb13-41" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb13-42"><a href="#cb13-42" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb13-43"><a href="#cb13-43" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb13-44"><a href="#cb13-44" tabindex="-1"></a></span>
<span id="cb13-45"><a href="#cb13-45" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb13-46"><a href="#cb13-46" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb13-47"><a href="#cb13-47" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-48"><a href="#cb13-48" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb13-49"><a href="#cb13-49" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb13-50"><a href="#cb13-50" tabindex="-1"></a></span>
<span id="cb13-51"><a href="#cb13-51" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb13-52"><a href="#cb13-52" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-53"><a href="#cb13-53" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb13-54"><a href="#cb13-54" tabindex="-1"></a></span>
<span id="cb13-55"><a href="#cb13-55" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb13-56"><a href="#cb13-56" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb13-57"><a href="#cb13-57" tabindex="-1"></a></span>
<span id="cb13-58"><a href="#cb13-58" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb13-59"><a href="#cb13-59" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb13-60"><a href="#cb13-60" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-61"><a href="#cb13-61" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb13-62"><a href="#cb13-62" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># there is an intentional bug on this line (should divide by 60 not 6)</span></span>
<span id="cb13-63"><a href="#cb13-63" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span>
<span id="cb13-64"><a href="#cb13-64" tabindex="-1"></a></span>
<span id="cb13-65"><a href="#cb13-65" tabindex="-1"></a></span>
<span id="cb13-66"><a href="#cb13-66" tabindex="-1"></a><span class="kw">def</span> add_duration_hours_variable(df):</span>
<span id="cb13-67"><a href="#cb13-67" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-68"><a href="#cb13-68" tabindex="-1"></a><span class="co">    Add duration in hours (duration_hours) variable to the dataset</span></span>
<span id="cb13-69"><a href="#cb13-69" tabindex="-1"></a></span>
<span id="cb13-70"><a href="#cb13-70" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb13-71"><a href="#cb13-71" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb13-72"><a href="#cb13-72" tabindex="-1"></a></span>
<span id="cb13-73"><a href="#cb13-73" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb13-74"><a href="#cb13-74" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new duration_hours variable added</span></span>
<span id="cb13-75"><a href="#cb13-75" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-76"><a href="#cb13-76" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb13-77"><a href="#cb13-77" tabindex="-1"></a>    df_copy[<span class="st">"duration_hours"</span>] <span class="op">=</span> df_copy[<span class="st">"duration"</span>].<span class="bu">apply</span>(</span>
<span id="cb13-78"><a href="#cb13-78" tabindex="-1"></a>        text_to_duration</span>
<span id="cb13-79"><a href="#cb13-79" tabindex="-1"></a>    )</span>
<span id="cb13-80"><a href="#cb13-80" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb13-81"><a href="#cb13-81" tabindex="-1"></a></span>
<span id="cb13-82"><a href="#cb13-82" tabindex="-1"></a></span>
<span id="cb13-83"><a href="#cb13-83" tabindex="-1"></a><span class="kw">def</span> plot_cumulative_time_in_space(df, graph_file):</span>
<span id="cb13-84"><a href="#cb13-84" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-85"><a href="#cb13-85" tabindex="-1"></a><span class="co">    Plot the cumulative time spent in space over years</span></span>
<span id="cb13-86"><a href="#cb13-86" tabindex="-1"></a></span>
<span id="cb13-87"><a href="#cb13-87" tabindex="-1"></a><span class="co">    Convert the duration column from strings to number of hours</span></span>
<span id="cb13-88"><a href="#cb13-88" tabindex="-1"></a><span class="co">    Calculate cumulative sum of durations</span></span>
<span id="cb13-89"><a href="#cb13-89" tabindex="-1"></a><span class="co">    Generate a plot of cumulative time spent in space over years and</span></span>
<span id="cb13-90"><a href="#cb13-90" tabindex="-1"></a><span class="co">    save it to the specified location</span></span>
<span id="cb13-91"><a href="#cb13-91" tabindex="-1"></a></span>
<span id="cb13-92"><a href="#cb13-92" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb13-93"><a href="#cb13-93" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb13-94"><a href="#cb13-94" tabindex="-1"></a><span class="co">        graph_file (str): The path to the output graph file.</span></span>
<span id="cb13-95"><a href="#cb13-95" tabindex="-1"></a></span>
<span id="cb13-96"><a href="#cb13-96" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb13-97"><a href="#cb13-97" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb13-98"><a href="#cb13-98" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-99"><a href="#cb13-99" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb13-100"><a href="#cb13-100" tabindex="-1"></a>    df <span class="op">=</span> add_duration_hours_variable(df)</span>
<span id="cb13-101"><a href="#cb13-101" tabindex="-1"></a>    df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb13-102"><a href="#cb13-102" tabindex="-1"></a>    plt.plot(df.date, df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb13-103"><a href="#cb13-103" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb13-104"><a href="#cb13-104" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb13-105"><a href="#cb13-105" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb13-106"><a href="#cb13-106" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb13-107"><a href="#cb13-107" tabindex="-1"></a>    plt.show()</span>
<span id="cb13-108"><a href="#cb13-108" tabindex="-1"></a></span>
<span id="cb13-109"><a href="#cb13-109" tabindex="-1"></a></span>
<span id="cb13-110"><a href="#cb13-110" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb13-111"><a href="#cb13-111" tabindex="-1"></a></span>
<span id="cb13-112"><a href="#cb13-112" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb13-113"><a href="#cb13-113" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'data/eva-data.json'</span></span>
<span id="cb13-114"><a href="#cb13-114" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'results/eva-data.csv'</span></span>
<span id="cb13-115"><a href="#cb13-115" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb13-116"><a href="#cb13-116" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb13-117"><a href="#cb13-117" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb13-118"><a href="#cb13-118" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb13-119"><a href="#cb13-119" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb13-120"><a href="#cb13-120" tabindex="-1"></a></span>
<span id="cb13-121"><a href="#cb13-121" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'results/cumulative_eva_graph.png'</span></span>
<span id="cb13-122"><a href="#cb13-122" tabindex="-1"></a>    main(input_file, output_file, graph_file)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Remember to commit your latest changes:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git status</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py data results</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Update project's directory structure"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://coderefinery.github.io/reproducible-research/organizing-projects/" class="external-link">Organizing
your projects</a> chapter from the <a href="https://coderefinery.github.io/reproducible-research/intro/" class="external-link">CodeRefinery’s
Reproducible Research tutorial</a>
</li>
<li><a href="https://mitcommlab.mit.edu/broad/commkit/file-structure/" class="external-link">MIT
Broad Reseach Communication Lab’s “File Structure” guide</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Good practices for code and project structure are essential for
creating readable, accessible and reproducibile projects.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-08-code-correctness"><p>Content from <a href="08-code-correctness.html">Code correctness</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/08-code-correctness.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we verify that our code is correct?</li>
<li>How can we automate our software tests?</li>
<li>What makes a “good” test?</li>
<li>Which parts of our code should we prioritise for testing?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Explain why code testing is important and how this supports FAIR
software.</li>
<li>Describe the different types of software tests (unit tests,
integration tests, regression tests).</li>
<li>Implement unit tests to verify that function behave as expected
using the Python testing framework <code>pytest</code>.</li>
<li>Interpret the output from <code>pytest</code> to identify which
functions are not behaving as expected.</li>
<li>Write tests using typical values, edge cases and invalid inputs to
ensure that the code can handle extreme values and invalid inputs
appropriately.</li>
<li>Evaluate code coverage to identify how much of the codebase is being
tested and identify areas that need further tests.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have improved the structure and readability of our code -
it is much easier to test its functionality and improve it further. The
goal of software testing is to check that the actual results produced by
a piece of code meet our expectations, i.e. are correct.</p>
<div id="activate-your-virtual-environment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="activate-your-virtual-environment" class="callout-inner">
<h3 class="callout-title">Activate your virtual environment</h3>
<div class="callout-content">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why-use-software-testing">Why use software testing?<a class="anchor" aria-label="anchor" href="#why-use-software-testing"></a>
</h2>
<hr class="half-width">
<p>Adopting software testing as part of our research workflow helps us
to conduct <strong>better research</strong> and produce <strong>FAIR
software</strong>:</p>
<ul>
<li>Software testing can help us be more productive as it helps us to
identify and fix problems with our code early and quickly and allows us
to demonstrate to ourselves and others that our code does what we claim.
More importantly, we can share our tests alongside our code, allowing
others to verify our software for themselves.</li>
<li>The act of writing tests encourages to structure our code as
individual functions and often results in a more
<strong>readable</strong>, modular and maintainable codebase that is
easier to extend or repurpose.</li>
<li>Software testing improves the <strong>accessibility</strong> and
<strong>reusability</strong> of our code - well-written software tests
capture the expected behaviour of our code and can be used alongside
documentation to help other developers quickly make sense of our code.
In addition, a well tested codebase allows developers to experiment with
new features safe in the knowledge that tests will reveal if their
changes have broken any existing functionality.</li>
<li>Software testing underpins the FAIR process by giving us the
confidence to engage in open research practices - if we are not sure
that our code works as intended and produces accurate results, we are
unlikely to feel confident about sharing our code with others. Software
testing brings piece of mind by providing a step-by-step approach that
we can apply to verify that our code is correct.</li>
</ul></section><section><h2 class="section-heading" id="types-of-software-tests">Types of software tests<a class="anchor" aria-label="anchor" href="#types-of-software-tests"></a>
</h2>
<hr class="half-width">
<p>There are many different types of software testing.</p>
<ul>
<li><p><strong>Unit tests</strong> focus on testing individual functions
in isolation. They ensure that each small part of the software performs
as intended. By verifying the correctness of these individual units, we
can catch errors early in the development process.</p></li>
<li><p><strong>Integration tests</strong> check how different parts of
the code e.g. functions work together.</p></li>
<li><p><strong>Regression tests</strong> are used to ensure that new
changes or updates to the codebase do not adversely affect the existing
functionality. They involve checking whether a program or part of a
program still generates the same results after changes have been
made.</p></li>
<li><p><strong>End-to-end</strong> tests are a special type of
integration testing which checks that a program as a whole behaves as
expected.</p></li>
</ul>
<p>In this course, our primary focus will be on unit testing. However,
the concepts and techniques we cover will provide a solid foundation
applicable to other types of testing.</p>
<div id="types-of-software-tests-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="types-of-software-tests-1" class="callout-inner">
<h3 class="callout-title">Types of software tests</h3>
<div class="callout-content">
<p>Fill in the blanks in the sentences below:</p>
<ul>
<li>__________ tests compare the ______ output of a program to its
________ output to demonstrate correctness.</li>
<li>Unit tests compare the actual output of a ______ ________ to the
expected output to demonstrate correctness.</li>
<li>__________ tests check that results have not changed since the
previous test run.</li>
<li>__________ tests check that two or more parts of a program are
working together correctly.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ul>
<li>End-to-end tests compare the actual output of a program to the
expected output to demonstrate correctness.</li>
<li>Unit tests compare the actual output of a single function to the
expected output to demonstrate correctness.</li>
<li>Regression tests check that results have not changed since the
previous test run.</li>
<li>Integration tests check that two or more parts of a program are
working together correctly.</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="informal-testing">Informal testing<a class="anchor" aria-label="anchor" href="#informal-testing"></a>
</h2>
<hr class="half-width">
<p>How should we test our code? One approach is to copy/paste the code
or a function into a Python terminal (different from a command line
terminal), which allows you to interact with the Python interpreter more
directly.<br>
From the Python terminal we can then run one function or a piece of code
at a time and check that they behave as expected. As input to our
code/function we are testing, we typically use some input values for
which we know what the correct return value should be.</p>
<p>Let’s do this for our <code>text_to_duration</code> function. Recall
that the <code>text_to_duration</code> function converts a spacewalk
duration stored as a string in format “HH:MM” to a duration in hours -
e.g. duration <code>01:15</code> (1 hour and 15 minutes) should return a
numerical value of <code>1.25</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span></code></pre>
</div>
<p>To start a Python terminal, you simply type <code>python3</code>
(with no other parameters) from the root directory of your project in a
command line terminal.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span><span class="ex">$</span> python3</span></code></pre>
</div>
<p>This will open an interactive Python terminal for you, which may look
like this:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>(venv_spacewalks) mbassan2<span class="op">@</span>C<span class="op">-</span>U<span class="op">-</span>LOSXQ677L astronaut<span class="op">-</span>data<span class="op">-</span>analysis <span class="op">%</span> python3</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>Python <span class="fl">3.11.7</span> (main, Dec  <span class="dv">4</span> <span class="dv">2023</span>, <span class="dv">18</span>:<span class="dv">10</span>:<span class="dv">11</span>) [Clang <span class="fl">15.0.0</span> (clang<span class="op">-</span><span class="fl">1500.1.0.2.5</span>)] on darwin</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>Type <span class="st">"help"</span>, <span class="st">"copyright"</span>, <span class="st">"credits"</span> <span class="kw">or</span> <span class="st">"license"</span> <span class="cf">for</span> more information.</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre>
</div>
<p>Once inside the Python terminal, you can start typing Python code.
The Python terminal will interactively run your code and return and
print results. We could copy and paste the code of our
<code>text_to_duration</code> function, but it is much simpler and more
elegant to import and then invoke it.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> text_to_duration(<span class="st">"10:00"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fl">10.0</span></span></code></pre>
</div>
<p>So, we have invoked our function with the value “10:00” and it
returned the floating point value “10.0” as expected.</p>
<p>We can then further explore the behaviour of our function by
running:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> text_to_duration(<span class="st">"00:00"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fl">0.0</span></span></code></pre>
</div>
<p>This all seems correct so far.</p>
<p>Testing code in this “informal” way in an important process to go
through as we draft our code for the first time. Another tool that can
help here is the <a href="https://jupyter.org/" class="external-link">Jupyter Notebook</a> -
like the Python terminal, the Jupyter Notebook is an interactive
environment for writing and running code. It is a GUI tool which
supports all kinds of interactive outputs, including many interactive
visualisation libraries.</p>
<p>However, there are some serious drawbacks to this approach if used as
our only form of testing.</p>
<div id="what-are-the-limitations-of-informally-testing-code-5-minutes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="what-are-the-limitations-of-informally-testing-code-5-minutes" class="callout-inner">
<h3 class="callout-title">What are the limitations of informally testing code? (5 minutes)</h3>
<div class="callout-content">
<p>Think about the questions below. Your instructors may ask you to
share your answers in a shared notes document and/or discuss them with
other participants.</p>
<ul>
<li>Why might we choose to test our code informally?</li>
<li>What are the limitations of relying solely on informal tests to
verify that a piece of code is behaving as expected?</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>It can be tempting to test our code informally because this
approach:</p>
<ul>
<li>is quick and easy</li>
<li>provides immediate feedback</li>
</ul>
<p>However, there are limitations to this approach:</p>
<ul>
<li>Working interactively is error prone</li>
<li>We must reload our function in Python terminal each time we change
our code</li>
<li>We must repeat our tests every time we update our code which is time
consuming</li>
<li>We must rely on memory to keep track of how we have tested our code,
e.g. what input values we tried</li>
<li>We must rely on memory to keep track of which functions have been
tested and which have not (informal testing may work well on smaller
pieces of code but it becomes unpractical for a large codebase)</li>
<li>Once we close the Python terminal, we lose all the test scenarios we
have tried</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="formal-testing">Formal testing<a class="anchor" aria-label="anchor" href="#formal-testing"></a>
</h2>
<hr class="half-width">
<p>We can overcome some of these limitations by formalising our testing
process. A formal approach to testing our code is to write dedicated
test functions to check it. These test functions:</p>
<ul>
<li>Run the function we want to test - the target function with known
inputs</li>
<li>Compare the output to known, valid results</li>
<li>Raise an error if the function’s actual output does not match the
expected output</li>
<li>Are recorded in a test script that can be re-run on demand.</li>
</ul>
<p>Let’s explore this process by writing some formal tests for our
<code>text_to_duration</code> function.</p>
<p>In VS Code, create a new Python file <code>test_code.py</code> in the
root of our project directory to store our tests.</p>
<p>Like before in the Python terminal, we need to import
<code>text_to_duration</code> into our test script. Then, we add our
first test function:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    input_value <span class="op">=</span> <span class="st">"10:00"</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    test_result <span class="op">=</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"text_to_duration('10:00') == 10? </span><span class="sc">{</span>test_result<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<p>We can run this code from the command line terminal as:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span><span class="ex">$</span> python3 test_code.py </span></code></pre>
</div>
<p>This test checks that when we apply <code>text_to_duration</code> to
input value <code>10:00</code>, the output matches the expected value of
<code>10</code>.</p>
<p>In this example, we use a print statement to report whether the
actual output from <code>text_to_duration</code> meets our
expectations.</p>
<p>However, this does not meet our requirement to “Raise an error if the
function’s output does not match the expected output” and means that we
must carefully read our test function’s output to identify whether it
has failed.</p>
<p>To ensure that our code raises an error if the function’s output does
not match the expected output, we use Python’s <code>assert</code>
statement. The <code>assert statement</code> in Python checks whether a
condition is <code>True</code> or <code>False</code>. If the statement
is <code>True</code>, <code>assert</code> does not return a value and
the code continues to run. However, if the statement is
<code>False</code>, <code>assert</code> raises an
<code>AssertError</code>.</p>
<p>Let’s rewrite our test with an <code>assert</code> statement:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<p>Notice that when we run <code>test_text_to_duration_integer()</code>,
nothing happens - there is no output. That is because our function is
working correctly and returning the expected value of 10.</p>
<p>Let’s add another test to check what happens when duration is not an
integer number and if our function can handle durations with a non-zero
minute component, and rerun our test code.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:15"</span>) <span class="op">==</span> <span class="fl">10.25</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>test_text_to_duration_float()</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>(venv_spacewalks) $ python3 test_code.py
Traceback (most recent call last):
  File "/Users/user/Desktop/spacewalks/test_code.py", line 9, in &lt;module&gt;
    test_text_to_duration_float()
  File "/Users/user/Desktop/spacewalks/test_code.py", line 4, in test_text_to_duration_float
    assert text_to_duration("10:15") == 10.25
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError</code></pre>
</div>
<p>Notice that this time, our test
<code>test_text_to_duration_float</code> fails. Our assert statement has
raised an <code>AssertionError</code> - a clear signal that there is a
problem in our code that we need to fix. We know that duration
<code>10:15</code> should be converted to number <code>10.25</code>.
What is wrong with our code? If we look at our
<code>text_to_duration</code> function, we may identify the following
line of our code as problematic:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    ...</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span> </span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    ...</span></code></pre>
</div>
<p>You may notice that our conversion code is wrong - the minutes
component should have been divided by 60 and not 6. We were able to spot
this tiny bug by testing our code.</p>
<p>Let’s fix the problematic line and rerun out tests.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>...</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">60</span> </span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>...</span></code></pre>
</div>
<p>This time our tests run without problem.</p>
<p>Should we add more tests or the tests we have so far are enough? What
happens if our duration value is <code>10:20</code> (ten hours and 20
minutes) and our result is not a rational floating point number (like
<code>10.25</code>) but an irrational number such as
<code>10.333333333</code>? Let’s tests for this.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:20"</span>) <span class="op">==</span> <span class="fl">10.333333</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>test_text_to_duration_float()</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>(venv_spacewalks) $ python3 test_code.py
Traceback (most recent call last):
  File "/Users/user/work/SSI/lessons/astronaut-data-analysis/test_code.py", line 17, in &lt;module&gt;
    test_text_to_duration_float()
  File "/Users/user/work/SSI/lessons/astronaut-data-analysis/test_code.py", line 9, in test_text_to_duration_float
    assert text_to_duration("10:20") == 10.333333
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError</code></pre>
</div>
<p>On computer systems, representation of irrational numbers is
typically not exact as they do not have an exact binary representation.
For this reason, we cannot use a simple double equals sign
(<code>==</code>) to compare the equality of floating point numbers.
Instead, we check that our floating point numbers are equal within a
very small tolerance (e.g. 1e-5). Hence, our code should look like:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>...</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">abs</span>(text_to_duration(<span class="st">"10:20"</span>) <span class="op">-</span> <span class="fl">10.33333333</span>) <span class="op">&lt;</span> <span class="fl">1e-5</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>...</span></code></pre>
</div>
<p>You may have noticed that we have to repeat a lot of code to add each
individual test for each test case. You may also have noticed that our
test script stopped after the first test failure and none of the tests
after that were run. To run our remaining tests we would have to
manually comment out our failing test and re-run the test script. As our
code base grows, testing in this way becomes cumbersome and error-prone.
These limitations can be overcome by automating our tests using a
<strong>testing framework</strong>.</p>
</section><section><h2 class="section-heading" id="testing-frameworks">Testing frameworks<a class="anchor" aria-label="anchor" href="#testing-frameworks"></a>
</h2>
<hr class="half-width">
<p>Testing frameworks can automatically find all the tests in our code
base, run all of them (so we do not have to invoke them explicitly or,
even worse, forget to invoke them), and present the test results as a
readable summary.</p>
<p>We will use the Python testing framework <code>pytest</code> with its
code coverage extension <code>pytest-cov</code>. To install these
libraries into our virtual environment, from the command line terminal
do:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install pytest pytest-cov</span></code></pre>
</div>
<p>Let’s make sure that our tests are ready to work with
<code>pytest</code>.</p>
<ul>
<li>
<p><code>pytest</code> automatically discovers tests based on
specific naming patterns. It looks for files that start with “test_” or
end with “_test.py”. Then, within these files, <code>pytest</code> looks
for functions that start with “test_”. Our test file already meets these
requirements, so there is nothing to do here. However, our script does
contain lines to run each of our test functions. These are no-longer
required as pytest will run our tests so we can remove them:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># Delete these 2 lines</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>test_text_to_duration_float()</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
</li>
<li><p>It is also conventional when working with a testing framework to
place test files in a <code>tests</code> directory at the root of our
project and to name each test file after the code file that it targets.
This helps in maintaining a clean structure and makes it easier for
others to understand where the tests are located.</p></li>
</ul>
<p>A set of tests for a given piece of code is called a test suite. Our
test suite is currently located in the root folder of our project. Let’s
move it to a dedicated test folder and rename our
<code>test_code.py</code> file to <code>test_eva_analysis.py</code>.</p>
<p>You can do it from VS Code or by typing the following commands in the
command line terminal:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdir tests</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mv test_code.py tests/test_eva_analysis.py</span></code></pre>
</div>
<p>Before we re-run our tests using <code>pytest</code>, let’s update
our second test to use <code>pytest</code>’s function
<code>approx()</code> which is specifically intended for comparing
floating point numbers within a tolerance.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:20"</span>) <span class="op">==</span> pytest.approx(<span class="fl">10.33333333</span>)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span></code></pre>
</div>
<p>Let’s also add some inline comments to clarify what each test is
doing and expand our syntax to highlight the logic behind our
approach:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co">    for typical durations with a non-zero minute component</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>    actual_result <span class="op">=</span> text_to_duration(<span class="st">"10:20"</span>) </span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="fl">10.33333333</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> pytest.approx(expected_result)</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>    </span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a><span class="co">    for typical whole hour durations </span></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>    actual_result <span class="op">=</span>  text_to_duration(<span class="st">"10:00"</span>)</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>    </span></code></pre>
</div>
<p>Writing our tests this way highlights the key idea that each test
should compare the actual results returned by our function with expected
values.</p>
<p>Similarly, writing inline comments for our tests that complete the
sentence “Test that …” helps us to understand what each test is doing
and why it is needed.</p>
<p>Before running out tests with <code>pytest</code>, let’s reintroduce
our old bug in function <code>text_to_duration</code> that affects the
durations with a non-zero minute component like “10:20” but not those
that are whole hours, e.g. “10:00”:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>    ...</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># Divide by 6 instead of 60</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>    ...</span></code></pre>
</div>
<p>Finally, let’s run our tests with <code>pytest</code> from our
project’s root directory (and not <code>tests</code> directory):</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>========================================== test session starts ===========================================
platform darwin -- Python 3.11.7, pytest-8.3.3, pluggy-1.5.0
rootdir: /Users/user/work/SSI/lessons/astronaut-data-analysis-not-so-good
plugins: cov-5.0.0
collected 2 items

tests/test_code.py F.                                                                                                                                                                                                                                                                                           [100%]

================================================ FAILURES ================================================
________________________________________ test_text_to_duration_float _____________________________________

    def test_text_to_duration_float():
&gt;       assert text_to_duration("10:20") == pytest.approx(10.33333333)
E       assert 13.333333333333334 == 10.33333333 ± 1.0e-05
E
E         comparison failed
E         Obtained: 13.333333333333334
E         Expected: 10.33333333 ± 1.0e-05

tests/test_code.py:5: AssertionError
=========================================== short test summary info =======================================
FAILED tests/test_code.py::test_text_to_duration_float - assert 13.333333333333334 == 10.33333333 ± 1.0e-05
========================================= 1 failed, 1 passed in 0.67s =====================================
</code></pre>
</div>
<p>From the above output from <code>pytest</code>’s execution of out
tests, we notice that:</p>
<ul>
<li>If a test function finishes without triggering an assertion, the
test is considered successful and is marked with a dot
(<code>.</code>).</li>
<li>If an assertion fails or an error occurs, the test is marked as a
failure with an <code>F</code>, and the output includes details about
the error to help identify what went wrong.</li>
</ul>
<p>Let’s fix our bug once again, and rerun our tests using
<code>pytest</code>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>========================================== test session starts ===========================================
platform darwin -- Python 3.11.7, pytest-8.3.3, pluggy-1.5.0
rootdir: /Users/user/work/SSI/lessons/astronaut-data-analysis-not-so-good
plugins: cov-5.0.0
collected 2 items

tests/test_code.py ..                                                                                                                                                                                                                                                                                           [100%]

=========================================== 2 passed in 0.63s =============================================</code></pre>
</div>
<p>This time, all out tests passed.</p>
<div id="interpreting-pytest-output" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="interpreting-pytest-output" class="callout-inner">
<h3 class="callout-title">Interpreting pytest output</h3>
<div class="callout-content">
<p>A colleague has asked you to conduct a pre-publication review of
their code which analyses time spent in space by various individual
astronauts.</p>
<p>You tested their code using <code>pytest</code>, and got the
following output. Inspect it and answer the questions below.</p>
<div class="section level4">
<h4 id="example-pytest-output">Example <code>pytest</code> output<a class="anchor" aria-label="anchor" href="#example-pytest-output"></a>
</h4>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>============================================================ test session starts
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/Desktop/AnneResearcher/projects/Spacetravel
collected 9 items

tests/test_analyse.py FF....                                              [ 66%]
tests/test_prepare.py s..                                                 [100%]

====================================================================== FAILURES
____________________________________________________________ test_total_duration

    def test_total_duration():

      durations = [10, 15, 20, 5]
      expected  = 50/60
      actual  = calculate_total_duration(durations)
&gt;     assert actual == pytest.approx(expected)
E     assert 8.333333333333334 == 0.8333333333333334 ± 8.3e-07
E
E       comparison failed
E       Obtained: 8.333333333333334
E       Expected: 0.8333333333333334 ± 8.3e-07

tests/test_analyse.py:9: AssertionError
______________________________________________________________________________ test_mean_duration

    def test_mean_duration():
       durations = [10, 15, 20, 5]

       expected = 12.5/60
&gt;      actual  = calculate_mean_duration(durations)

tests/test_analyse.py:15:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

durations = [10, 15, 20, 5]

    def calculate_mean_duration(durations):
        """
        Calculate the mean of a list of durations.
        """
        total_duration = sum(durations)/60
&gt;       mean_duration = total_duration / length(durations)
E       NameError: name 'length' is not defined

Spacetravel.py:45: NameError
=========================================================================== short test summary info
FAILED tests/test_analyse.py::test_total_duration - assert 8.333333333333334 == 0.8333333333333334 ± 8.3e-07
FAILED tests/test_analyse.py::test_mean_duration - NameError: name 'length' is not defined
============================================================== 2 failed, 6 passed, 1 skipped in 0.02s </code></pre>
</div>
<ol style="list-style-type: lower-alpha">
<li>How many tests has our colleague included in the test suite?</li>
<li>The first test in test_prepare.py has a status of s; what does this
mean?</li>
<li>How many tests failed?</li>
<li>Why did “test_total_duration” fail?</li>
<li>Why did “test_mean_duration” fail?</li>
</ol>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: lower-alpha">
<li>9 tests were detected in the test suite</li>
<li>s - stands for “skipped”,</li>
<li>2 tests failed: the first and second tests in test file
<code>test_analyse.py</code>
</li>
<li>
<code>test_total_duration</code> failed because the calculated total
duration differs from the expected value by a factor of 10 i.e. the
assertion <code>actual == pytest.approx(expected)</code> evaluated to
<code>False</code>
</li>
<li>
<code>test_mean_duration</code> failed because there is a syntax
error in <code>calculate_mean_duration</code>. Our colleague has used
the command <code>length</code> (not a python command) instead of
<code>len</code>. As a result, running the function returns a
<code>NameError</code> rather than a calculated value and the test
assertion evaluates to <code>False</code>.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="test-suite-design">Test suite design<a class="anchor" aria-label="anchor" href="#test-suite-design"></a>
</h2>
<hr class="half-width">
<p>We now have the tools in place to automatically run tests. However,
that alone is not enough to properly test code. We will now look into
what makes a good test suite and good practices for testing code.</p>
<p>Let’s start by considering the following scenario. A collaborator on
our project has sent us the following code which adds a new column
called <code>crew_size</code> to our data containing the number of
astronauts participating in any given spacewalk. How do we know that it
works as intended and that it will not break the rest of our code? For
this, we need to write a test suite with a comprehensive coverage of the
new code.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="im">import</span> re <span class="co"># added this line</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="kw">def</span> main(input_file, output_file, graph_file):</span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a>    eva_data <span class="op">=</span> add_crew_size_column(eva_data) <span class="co"># added this line</span></span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a>    write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a></span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a></span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a>... </span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a></span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a><span class="kw">def</span> calculate_crew_size(crew):</span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a><span class="co">    Calculate the size of the crew for a single crew entry</span></span>
<span id="cb27-26"><a href="#cb27-26" tabindex="-1"></a></span>
<span id="cb27-27"><a href="#cb27-27" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb27-28"><a href="#cb27-28" tabindex="-1"></a><span class="co">        crew (str): The text entry in the crew column containing a list of crew member names</span></span>
<span id="cb27-29"><a href="#cb27-29" tabindex="-1"></a></span>
<span id="cb27-30"><a href="#cb27-30" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb27-31"><a href="#cb27-31" tabindex="-1"></a><span class="co">        int: The crew size</span></span>
<span id="cb27-32"><a href="#cb27-32" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb27-33"><a href="#cb27-33" tabindex="-1"></a>    <span class="cf">if</span> crew.split() <span class="op">==</span> []:</span>
<span id="cb27-34"><a href="#cb27-34" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb27-35"><a href="#cb27-35" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb27-36"><a href="#cb27-36" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">len</span>(re.split(<span class="vs">r';'</span>, crew))<span class="op">-</span><span class="dv">1</span></span>
<span id="cb27-37"><a href="#cb27-37" tabindex="-1"></a></span>
<span id="cb27-38"><a href="#cb27-38" tabindex="-1"></a><span class="kw">def</span> add_crew_size_column(df):</span>
<span id="cb27-39"><a href="#cb27-39" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb27-40"><a href="#cb27-40" tabindex="-1"></a><span class="co">    Add crew_size column to the dataset containing the value of the crew size</span></span>
<span id="cb27-41"><a href="#cb27-41" tabindex="-1"></a></span>
<span id="cb27-42"><a href="#cb27-42" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb27-43"><a href="#cb27-43" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input data frame.</span></span>
<span id="cb27-44"><a href="#cb27-44" tabindex="-1"></a></span>
<span id="cb27-45"><a href="#cb27-45" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb27-46"><a href="#cb27-46" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df with the new crew_size variable added</span></span>
<span id="cb27-47"><a href="#cb27-47" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb27-48"><a href="#cb27-48" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Adding crew size variable (crew_size) to dataset'</span>)</span>
<span id="cb27-49"><a href="#cb27-49" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb27-50"><a href="#cb27-50" tabindex="-1"></a>    df_copy[<span class="st">"crew_size"</span>] <span class="op">=</span> df_copy[<span class="st">"crew"</span>].<span class="bu">apply</span>(</span>
<span id="cb27-51"><a href="#cb27-51" tabindex="-1"></a>        calculate_crew_size</span>
<span id="cb27-52"><a href="#cb27-52" tabindex="-1"></a>    )</span>
<span id="cb27-53"><a href="#cb27-53" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb27-54"><a href="#cb27-54" tabindex="-1"></a>...</span>
<span id="cb27-55"><a href="#cb27-55" tabindex="-1"></a>    </span></code></pre>
</div>
<div class="section level3">
<h3 id="writing-good-tests">Writing good tests<a class="anchor" aria-label="anchor" href="#writing-good-tests"></a>
</h3>
<p>The aim of writing good tests is to verify that each of our functions
behaves as expected with the full range of inputs that it might
encounter. It is helpful to consider each argument of a function in turn
and identify the range of typical values it can take. Once we have
identified this typical range or ranges (where a function takes more
than one argument), we should:</p>
<ul>
<li>Test all values at the edge of the range</li>
<li>Test at least one interior point</li>
<li>Test invalid values</li>
</ul>
<p>Let’s have a look at the <code>calculate_crew_size</code> function
from our colleague’s new code and write some tests for it.</p>
<div id="unit-tests-for-calculate_crew_size" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="unit-tests-for-calculate_crew_size" class="callout-inner">
<h3 class="callout-title">Unit tests for calculate_crew_size</h3>
<div class="callout-content">
<p>Implement unit tests for the <code>calculate_crew_size</code>
function. Cover typical cases and edge cases.</p>
<p>Hint - use the following template when writing tests:</p>
<pre><code>def test_MYFUNCTION (): # FIXME
    """
    Test that ...   #FIXME
    """

    # Typical value 1
    actual_result =  _______________ #FIXME
    expected_result = ______________ #FIXME
    assert actual_result == expected_result

    # Typical value 2
    actual_result =  _______________ #FIXME
    expected_result = ______________ #FIXME
    assert actual_result == expected_result
    </code></pre>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>We can add the following test functions to out test suite.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> (</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    text_to_duration,</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    calculate_crew_size</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>)</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>...</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size():</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Valentina Tereshkova;"</span>)</span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a></span>
<span id="cb29-18"><a href="#cb29-18" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Judith Resnik; Sally Ride;"</span>)</span>
<span id="cb29-19"><a href="#cb29-19" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb29-20"><a href="#cb29-20" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb29-21"><a href="#cb29-21" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" tabindex="-1"></a><span class="co"># Edge cases</span></span>
<span id="cb29-23"><a href="#cb29-23" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size_edge_cases():</span>
<span id="cb29-24"><a href="#cb29-24" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb29-25"><a href="#cb29-25" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb29-26"><a href="#cb29-26" tabindex="-1"></a><span class="co">    for edge case where crew is an empty string</span></span>
<span id="cb29-27"><a href="#cb29-27" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb29-28"><a href="#cb29-28" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">""</span>)</span>
<span id="cb29-29"><a href="#cb29-29" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="kw">is</span> <span class="va">None</span></span></code></pre>
</div>
<p>Let’s run out tests:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="parameterising-tests">Parameterising tests<a class="anchor" aria-label="anchor" href="#parameterising-tests"></a>
</h3>
<p>Looking at out new test functions, we may notice that they do not
follow the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" class="external-link">“Don’t
Repeat Yourself principle”</a> which prevents software - including
testing code - from becoming repetitive and too long. In our test code,
a small block of code is repeated twice with different input values:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size():</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Valentina Tereshkova;"</span>)</span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Judith Resnik; Sally Ride;"</span>)</span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span></code></pre>
</div>
<p>To avoid such repetitions in our test code, we use <strong>test
parameterisation</strong>. This allows us to apply our test function to
a list of input/expected output pairs without the need for repetition.
To parameterise the <code>test_calculate_crew_size</code> function, we
can rewrite is as follows:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="at">@pytest.mark.parametrize</span>(<span class="st">"input_value, expected_result"</span>, [</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>    (<span class="st">"Valentina Tereshkova;"</span>, <span class="dv">1</span>),</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>    (<span class="st">"Judith Resnik; Sally Ride;"</span>, <span class="dv">2</span>),</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>])</span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size(input_value, expected_result):</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(input_value)</span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span></code></pre>
</div>
<p>Notice the following key changes to our code:</p>
<ul>
<li>The unparameterised version of <code>test_calculate_crew_size</code>
function did not have any arguments and our input/expected values were
all defined in the body of our test function.</li>
<li>In the parameterised version of
<code>test_calculate_crew_size</code>, the body of our test function has
been rewritten as a parameterised block of code that uses the variables
<code>input_value</code> and <code>expected_result</code> which are now
arguments of the test function.</li>
<li>A Python decorator <code>@pytest.mark.parametrize</code> is placed
immediately before the test function and indicates that it should be run
once for each set of parameters provided.</li>
</ul>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>In Python, a decorator is a function that can modify the behaviour of
another function. <code>@pytest.mark.parametrize</code> is a decorator
provided by <code>pytest</code> that modifies the behaviour of our test
function by running it multiple times - once for each set of inputs.
This decorator takes two main arguments:</p>
<ul>
<li><p>Parameter names: a string with the names of the parameters that
the test function will accept, separated by commas – in this case
“input_value” and “expected_value”</p></li>
<li><p>Parameter values: a list of tuples, where each tuple contains the
values for the parameters specified in the first argument.</p></li>
</ul>
</div>
</div>
</div>
<p>As you can see, the parameterised version of our test function is
shorter, more readable and easier to maintain.</p>
</div>
<div class="section level3">
<h3 id="just-enough-tests">Just enough tests<a class="anchor" aria-label="anchor" href="#just-enough-tests"></a>
</h3>
<p>In this episode, so far we have (only) written tests for two
individual functions: <code>text_to_duration</code> and
<code>calculate_crew_size</code>.</p>
<p>We can quantify the proportion of our code base that is run (also
referred to as “exercised”) by a given test suite using a metric called
code coverage:</p>
<p><span class="math display">\[ \text{Line Coverage} = \left(
\frac{\text{Number of Executed Lines}}{\text{Total Number of Executable
Lines}} \right) \times 100 \]</span></p>
<p>We can calculate our test coverage using the <code>pytest-cov</code>
library as follows.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest <span class="at">--cov</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>========================================================== test session starts
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/AnnResearcher/Desktop/Spacewalks
plugins: cov-5.0.0
collected 4 items

tests/test_eva_data_analysis.py ....                                                                                               [100%]

---------- coverage: platform darwin, python 3.12.3-final-0 ----------
Name                              Stmts   Miss  Cover
-----------------------------------------------------
eva_data_analysis.py                 56     38    32%
tests/test_eva_data_analysis.py      20      0   100%
-----------------------------------------------------
TOTAL                                76     38    50%


=========================================================== 4 passed in 1.04s</code></pre>
</div>
<p>To get an in-depth report about which parts of our code are tested
and which are not, we can add the option
<code>--cov-report=html</code>.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python <span class="at">-m</span> pytest <span class="at">--cov</span> <span class="at">--cov-report</span><span class="op">=</span>html </span></code></pre>
</div>
<p>This option generates a folder <code>htmlcov</code> in the project
root directory containing a code coverage report in HTML format. This
provides structured information about our test coverage including:</p>
<ul>
<li>a table showing the proportion of lines in each function that are
currently tested, and</li>
<li>an annotated copy of our code where untested lines are highlighted
in red.</li>
</ul>
<p>Ideally, all the lines of code in our code base should be exercised
by at least one test. However, if we lack the time and resources to test
every line of our code we should:</p>
<ul>
<li>avoid testing Python’s built-in functions or functions imported from
well-known and well-tested libraries like <code>pandas</code> or
<code>numpy</code>.</li>
<li>focus on the the parts of our code that carry the greatest
“reputational risk”, i.e. that could affect the accuracy of our reported
results.</li>
</ul>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Test coverage of less than 100% indicates that more testing may be
helpful.</p>
<p>Test coverage of 100% does not mean that our code is bug-free.</p>
</div>
</div>
</div>
<div id="evaluating-code-coverage" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="evaluating-code-coverage" class="callout-inner">
<h3 class="callout-title">Evaluating code coverage</h3>
<div class="callout-content">
<p>Generate the code coverage report for your software using the
<code>python3 -m pytest --cov --cov-report=html</code> command, inspect
it and and extract the following information:</p>
<ol style="list-style-type: lower-alpha">
<li>What proportion of the code base is currently “not” exercised by the
test suite?</li>
<li>Which functions in our code base are currently untested?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<ol style="list-style-type: lower-alpha">
<li>You can find this information on the “Files” tab of the HTML report.
The proportion of the code base NOT covered by our tests is 68% (100% -
32%) - this may differ for your version of the code.</li>
<li>You can find this information on the “Functions” tab of the HTML
report. The following functions in our code base are currently untested:
<ul>
<li>read_json_to_dataframe</li>
<li>write_dataframe_to_csv</li>
<li>add_duration_hours_variable</li>
<li>plot_cumulative_time_in_space</li>
<li>add_crew_size_variable</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</div>
<p>At this point, now is a good time to commit our test suite to our
codebase and push the changes to GitHub.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py </span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add additional analysis functions"</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add tests/</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add test suite"</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Added pytest and pytest-cov libraries."</span></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="optional-more-practice-with-a-test-suite">(Optional) More practice with a test suite<a class="anchor" aria-label="anchor" href="#optional-more-practice-with-a-test-suite"></a>
</h3>
<p>There is an <a href="test-suite-exercise.html">optional exercise</a>
to implement additional tests and practice writing tests some more.</p>
</div>
</section><section><h2 class="section-heading" id="continuous-integration-for-automated-testing">Continuous Integration for automated testing<a class="anchor" aria-label="anchor" href="#continuous-integration-for-automated-testing"></a>
</h2>
<hr class="half-width">
<p>Continuous Integration (CI) services provide the infrastructure to
automatically run every test function in the test code suite every time
changes are pushed to a remote repository. There is an <a href="ci-for-testing.html">extra episode on configuring CI for automated
tests on GitHub</a> for some additional reading.</p>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>During this episode, we have covered how to use software tests to
verify the correctness of our code. We have seen how to write a unit
test, how to manage and run our tests using the <code>pytest</code>
framework and how identify which parts of our code require additional
testing using test coverage reports.</p>
<p>These skills reduce the probability that there will be a mistake in
our code and support reproducible research by giving us the confidence
to engage in open research practices. Tests also document the intended
behaviour of our code for other developers and mean that we can
experiment with changes to our code knowing that our tests will let us
know if we break any existing functionality. In other words, software
testing supports the FAIR software principles by making our code more
<strong>accessible</strong> and <strong>reusable</strong>.</p>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://swcarpentry.github.io/python-novice-inflammation/10-defensive.html" class="external-link">The
Defensive Programming episode</a> from the Software Carpentry Python
Programming lesson</li>
<li>
<a href="https://www.software.ac.uk/blog/using-python-double-check-your-work" class="external-link">Using
Python to double check your work</a> (Software Sustainability Blog Post)
by Peter Inglesby</li>
<li>
<a href="https://carpentries-incubator.github.io/python-testing/" class="external-link">The
Python Testing and Continuous Integration</a> lesson on The Carpentries
Incubator by François Michonneau</li>
<li>[Test Driven Development][<a href="https://researchcodingclub.github.io/2019-11-13-test-driven-development/" class="external-link">york-tdd-blog</a>
(University of York Research Coding Club Blog Post) by Peter Hill and
Stephen Biggs-Fox</li>
<li>
<a href="https://coderefinery.github.io/testing/" class="external-link">Automated testing
- Preventing yourself and others from breaking your functioning code</a>
Coderefinery lesson</li>
<li>
<a href="https://carpentries-incubator.github.io/python-intermediate-development/21-automatically-testing-software/index.html" class="external-link">The
Automatically Testing Software episode</a> from the Intermediate
Research Software Development lesson on The Carpentries Incubator by
Aleksandra Nenadic et al.</li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Code testing supports the FAIR principles by improving the
accessibility and re-usability of research code.</li>
<li>Unit testing is crucial as it ensures each functions works
correctly.</li>
<li>Using the <code>pytest</code> framework, you can write basic unit
tests for Python functions to verify their correctness.</li>
<li>Identifying and handling edge cases in unit tests is essential to
ensure your code performs correctly under a variety of conditions.</li>
<li>Test coverage can help you to identify parts of your code that
require additional testing.</li>
<li>
</li>
</ol>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-09-code-documentation"><p>Content from <a href="09-code-documentation.html">Code documentation</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/09-code-documentation.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How should we document our code?</li>
<li>Why are documentation and repository metadata important and how they
support FAIR software?</li>
<li>What are the minimum elements of documentation needed to support
FAIR software?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Use a <code>README</code> file to provide an overview and a
<code>CITATION.cff</code> file to add citation instructions to a code
repository</li>
<li>Describe the main types of software documentation (tutorials, how to
guides, reference and explanation).</li>
<li>Apply a documentation framework to write effective documentation of
any type.</li>
<li>Describe the different formats available for delivering software
documentation (Markdown files, wikis, static webpages).</li>
<li>Implement MkDocs to generate and manage comprehensive project
documentation</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We have seen how writing inline comments and docstrings within our
code can help with improving its readability. The purpose of software
documentation is to communicate other important information about our
software (its purpose, dependencies, how to install and run it, etc.) to
the people who need it – both users and developers.</p>
<div id="activate-your-virtual-environment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="activate-your-virtual-environment" class="callout-inner">
<h3 class="callout-title">Activate your virtual environment</h3>
<div class="callout-content">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why-document-our-software">Why document our software?<a class="anchor" aria-label="anchor" href="#why-document-our-software"></a>
</h2>
<hr class="half-width">
<p>Software documentation is often perceived as a thankless and
time-consuming task with few tangible benefits and is often neglected in
research projects. However, like software testing, documenting our
software can help us and others conduct <strong>better research</strong>
and produce <strong>FAIR software</strong>:</p>
<ul>
<li>Good documentation captures important methodological details ready
for when we come to publish our research</li>
<li>Good documentation can help us return to a project seamlessly after
time away</li>
<li>Documentation can facilitate collaborations by helping us onboard
new project members quickly and more easily</li>
<li>Good documentation can save us time by answering frequently asked
questions (FAQs) about our code for us</li>
<li>Software documentation supports the FAIR research software
principles by improving the re-usability of our code.
<ul>
<li>Good documentation can make our software more understandable and
reusable by others, and can bring us some citations and credit</li>
<li>How-to guides and tutorials ensure that users can install our
software independently and make use of its basic features</li>
<li>Reference guides and background information can help developers
understand our code sufficiently to modify/extend/repurpose it.</li>
</ul>
</li>
</ul></section><section><h2 class="section-heading" id="software-level-documentation">Software-level documentation<a class="anchor" aria-label="anchor" href="#software-level-documentation"></a>
</h2>
<hr class="half-width">
<p>In previous episodes we encountered several different forms of
in-code documentation aspects, including in-line comments and
docstrings. These are an excellent way to improve the readability of our
code, but by themselves are insufficient to ensure that our code is easy
to use, understand and modify - this requires additional software-level
documentation.</p>
<p>There are many different types of software-level documentation.</p>
<div class="section level3">
<h3 id="technical-documentation">Technical documentation<a class="anchor" aria-label="anchor" href="#technical-documentation"></a>
</h3>
<p>Software-level technical documentation encompasses:</p>
<ul>
<li>Tutorials - lessons that guide learners through a series of
exercises to build proficiency as using the code<br>
</li>
<li>How-To Guides - step by step instructions on how to accomplish
specific goals using the code.</li>
<li>Reference - a lookup manual to help users find relevant information
about the software e.g. functions and their parameters.</li>
<li>Explanation - conceptual discussion of the code to help users
understand implementation decisions</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="project-level-documentation">Project-level documentation<a class="anchor" aria-label="anchor" href="#project-level-documentation"></a>
</h2>
<hr class="half-width">
<p>Project-level documentation includes various information and metadata
about software that help to discover it, explain the legal terms of
reusing it, describe its functionality on a high level and how to
install, run and contribute to it.</p>
<div class="section level3">
<h3 id="repository-metadata-files">Repository metadata files<a class="anchor" aria-label="anchor" href="#repository-metadata-files"></a>
</h3>
<p>A common way to to provide project-level documentation is to include
various metadata files in the software repository together with code.
Many of these files can be described as “social documentation”,
i.e. they indicate how users should “behave” in relation to our software
project. Some common examples of repository metadata files and their
role are explained below:</p>
<table class="table">
<colgroup>
<col width="7%">
<col width="92%">
</colgroup>
<thead><tr class="header">
<th>File</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>README</td>
<td>Provides an overview of the project, including installation, usage
instructions, dependencies and links to other metadata files and
technical documentation (tutorial/how-to/explanation/reference)</td>
</tr>
<tr class="even">
<td>CONTRIBUTING</td>
<td>Explains to developers how to contribute code to the project
including processes and standards that should be followed</td>
</tr>
<tr class="odd">
<td>CODE_OF_CONDUCT</td>
<td>Defines expected standards of conduct when engaging in a software
project</td>
</tr>
<tr class="even">
<td>LICENSE</td>
<td>Defines the (legal) terms of using, modifying and distributing the
code</td>
</tr>
<tr class="odd">
<td>CITATION</td>
<td>Provides instructions on how to cite the code</td>
</tr>
<tr class="even">
<td>AUTHORS</td>
<td>Provides information on who authored the code (can also be included
in CITATION)</td>
</tr>
</tbody>
</table>
<div id="just-enough-documentation" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="just-enough-documentation" class="callout-inner">
<h3 class="callout-title">Just enough documentation</h3>
<div class="callout-content">
<p>For many small projects the following three pieces of project-level
documentation may be sufficient: README, LICENSE and CITATION.</p>
</div>
</div>
</div>
<p>Let’s look at each of these files in turn.</p>
</div>
<div class="section level3">
<h3 id="readme-file">README file<a class="anchor" aria-label="anchor" href="#readme-file"></a>
</h3>
<p>A README file acts as a “landing page” for your code repository on
GitHub and should provide sufficient information for users to and
developers to get started using your code.</p>
<div id="readme-and-the-fair-principles" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="readme-and-the-fair-principles" class="callout-inner">
<h3 class="callout-title">README and the FAIR principles</h3>
<div class="callout-content">
<p>Think about the question below. Your instructors may ask you to share
your answer in a shared notes document and/or discuss them with other
participants.</p>
<p>Here are some of the major sections you might find in a typical
README. Which are <strong>essential</strong> to support the FAIR
principles? Which are optional?</p>
<ul>
<li>Purpose of the code</li>
<li>Audience (who the code is intended for)</li>
<li>Installation instructions</li>
<li>Contribution guide</li>
<li>How to get help</li>
<li>License</li>
<li>Software citation</li>
<li>Usage example</li>
<li>Dependencies and their versions</li>
<li>FAQs</li>
<li>Code of Conduct</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>To support the FAIR principles (Findability, Accessibility,
Interoperability, and Reusability), certain sections in a README file
are more important than others. Below is a breakdown of the sections
that are <em>essential</em> or <em>optional</em> in a README to align
with these principles.</p>
<div class="section level4">
<h4 id="essential">Essential<a class="anchor" aria-label="anchor" href="#essential"></a>
</h4>
<ul>
<li>
<strong>Purpose of the code</strong> - clearly explains what the
code does; essential for findability and reusability.</li>
<li>
<strong>Installation instructions</strong> - provides step-by-step
instructions on how to install the software, ensuring
accessibility.</li>
<li>
<strong>Usage Example</strong> - provides examples of how to use the
code, helping users understand its functionality and enhancing
reusability.</li>
<li>
<strong>License</strong>- specifies the terms under which the code
can be used, which is crucial for legal clarity and reusability.</li>
<li>
<strong>Dependencies and their versions</strong> - lists the
external libraries and tools required to run the code, including their
versions; essential for reproducibility and interoperability.</li>
<li>
<strong>Software citation</strong> - provides citation information
for academic use, ensuring proper attribution and reusability.</li>
</ul>
</div>
<div class="section level4">
<h4 id="optional">Optional<a class="anchor" aria-label="anchor" href="#optional"></a>
</h4>
<ul>
<li>
<strong>Audience (who the code is intended for)</strong> - helps
users identify if the code is relevant to them, improving findability
and usability.</li>
<li>
<strong>How to get help</strong> - informs users where they can get
help, ensuring better accessibility.</li>
<li>
<strong>Contribution guide</strong> - encourages and guides
contributions from the community, enhancing the code’s development and
reusability.</li>
<li>
<strong>FAQs</strong> - provide answers to common questions, aiding
in troubleshooting and improving accessibility.</li>
<li>
<strong>Code of Conduct</strong> - sets expectations for behaviour
in the community, fostering a welcoming environment and enhancing
accessibility.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Let’s create a simple README for our repository - from VS Code or
command line terminal create file <code>README.md</code> (in Markdown
format) or <code>README.txt</code> (in plain text format).</p>
<p>We can start by adding a one-liner that explains the purpose of our
code and who it is for.</p>
<pre class="code"><code># Spacewalks

## Overview
Spacewalks is a Python analysis tool for researchers to generate visualisations
and statistical summaries of NASA's extravehicular activity datasets.</code></pre>
<p>Now let’s add a list of Spacewalks’ key features:</p>
<pre class="code"><code>## Features
Key features of Spacewalks:

- Generates a CSV table of summary statistics of extravehicular activity crew sizes
- Generates a line plot to show the cumulative duration of space walks over time</code></pre>
<p>Now let’s tell users about any pre-requisites required to run the
software:</p>
<pre class="code"><code>## Pre-requisites

Spacewalks was developed using Python version 3.12

To install and run Spacewalks you will need have Python &gt;=3.12
installed. You will also need the following libraries (minimum versions in brackets)

- [NumPy](https://www.numpy.org/) &gt;=2.0.0 - Spacewalk's test suite uses NumPy's statistical functions
- [Matplotlib](https://matplotlib.org/stable/index.html) &gt;=3.0.0  - Spacewalks uses Matplotlib to make plots
- [pytest](https://docs.pytest.org/en/8.2.x/#) &gt;=8.2.0  - Spacewalks uses pytest for testing
- [pandas](https://pandas.pydata.org/) &gt;= 2.2.0 - Spacewalks uses pandas for data frame manipulation </code></pre>
<div id="spacewalks-readme" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="spacewalks-readme" class="callout-inner">
<h3 class="callout-title">Spacewalks README</h3>
<div class="callout-content">
<p>Extend the README for Spacewalks by adding:</p>
<ol style="list-style-type: decimal">
<li>Installation instructions</li>
<li>A simple usage example</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Installation instructions:</p>
<p>NB: In the solution below the back ticks of each code block have been
escaped to avoid rendering issues (if you are copying and pasting the
text, make sure you unescape them).</p>
<pre class="text"><code>## Installation instructions

+ Clone the Spacewalks repository to your local machine using Git.
If you don't have Git installed, you can download it from the official Git website.

\`\`\`
git clone https://github.com/your-repository-url/spacewalks.git
cd spacewalks
\`\`\`

+ Install the necessary dependencies:
\`\`\`
python3 -m pip install pandas==2.2.2 matplotlib==3.8.4 numpy==2.0.0 pytest==7.4.2
\`\`\`

+ To ensure everything is working correctly, run the tests using pytest.

\`\`\`
python3 -m pytest
\`\`\`</code></pre>
<p>Usage instructions:</p>
<pre class="text"><code>## Usage Example

To run an analysis using the eva_data_analysis.py script from the command line terminal,
launch the script using Python as follows:

\`\`\`
# Usage Examples
python3 eva_data_analysis.py eva-data.json eva-data.csv
\`\`\`

The first argument is path to the JSON data file.
The second argument is the path the CSV output file.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="license-file">LICENSE file<a class="anchor" aria-label="anchor" href="#license-file"></a>
</h3>
<p>Copyright allows a creator of work (such as written text,
photographs, films, music, software code) to state that they own the
work they have created. Copyright is automatically implied - even if the
creator does not explicitly assert it, copyright of the work exists from
the moment of creation. A licence is a legal document which sets down
the terms under which the creator is releasing what they have created
for others to use, modify, extend or exploit.</p>
<p>Because any creative work is copyrighted the moment it is created,
even without any kind of licence agreement, it is important to state the
terms under which software can be reused. The lack of a licence for your
software implies that no one can reuse the software at all - hence it is
imperative you declare it. A common way to declare your copyright of a
piece of software and the license you are distributing it under is to
include a file called LICENSE in the root directory of your code
repository.</p>
<p>There is an optional extra <a href="licensing.html">episode in this
course on different open source software licences</a> that you can
choose for your code and that we recommend for further reading.</p>

<div id="tools-to-help-you-choose-a-licence" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tools-to-help-you-choose-a-licence" class="callout-inner">
<h3 class="callout-title">Tools to help you choose a licence</h3>
<div class="callout-content">
<p>A <a href="licensing.html">short intro</a> on different open source
software licences included as extra content to this course.</p>
<p>Check out the <a href="https://opensource.guide/legal/#which-open-source-license-is-appropriate-for-my-project" class="external-link">open
source guide</a> on applying, changing and editing licenses.</p>
<p>The website <a href="https://choosealicense.com" class="external-link">choosealicense.com</a> has some great
resources to help you choose a license that is appropriate for your
needs, and can even automate adding the LICENSE file to your GitHub code
repository.</p>
</div>
</div>
</div>
<div id="select-a-licence" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="select-a-licence" class="callout-inner">
<h3 class="callout-title">Select a licence</h3>
<div class="callout-content">
<p>Choose a license for your code. Discuss with your neighbour or the
group your choice of license and reason for choosing it.</p>
</div>
</div>
</div>
<div id="add-a-license-to-your-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-a-license-to-your-code" class="callout-inner">
<h3 class="callout-title">Add a license to your code</h3>
<div class="callout-content">
<p>Add a LICENSE file containing the full text of your chosen license to
your code repository.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Licence can be done in either of the following two ways:
<ol style="list-style-type: lower-alpha">
<li>Create a LICENSE file in the root of your software repository on
your local machine and copy into it the text of your chosen licence (you
can find it online). Push your local changes to your GitHub
repository.</li>
<li>In your repository on GitHub, go to <code>Add file</code> option and
start typing file name “LICENSE” - GitHub will recognise that you want
to add a licence and will offer you a choice of difference licences to
choose from. Select one and commit your changes, then do
<code>git pull</code> locally to bring those changes to your
machine.</li>
</ol>
</li>
<li>Add a copyright statement, the name of the license you are using and
a mention of the LICENSE file to at least one source code file
(e.g. <code>eva_data_analysis.py</code>)</li>
<li>Link to your LICENSE file from README to make this information about
your code more prominent.</li>
</ol>
<p>After completing the above, check the “About” section of your
repository’s GitHub landing webpage and see if there is now a license
listed.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="citation-file">CITATION file<a class="anchor" aria-label="anchor" href="#citation-file"></a>
</h3>
<p>We can add a citation file to our repository to provide instructions
on how and when to cite our code. A citation file can be a plain text
(<code>CITATION.txt</code>) or a Markdown file
(<code>CITATION.md</code>), but there are certain benefits to use a
special file format called the Citation File Format (CFF) which provides
a way to include richer metadata about software or datasets we want to
cite, making it easy for both humans and machines to use this
information.</p>
<div class="section level4">
<h4 id="why-use-cff">Why use CFF?<a class="anchor" aria-label="anchor" href="#why-use-cff"></a>
</h4>
<p>For developers, using a CFF file can help to automate the process of
publishing new releases on <a href="https://zenodo.org/" class="external-link">Zenodo</a> via
GitHub. GitHub also “understands” CFF, and will display citation
information prominently on the landing page of a repository that
contains citation info in CFF.</p>
<p>For users, having a CFF file makes it easy to cite the software or
dataset with formatted citation information available for copy-paste and
direct import from GitHub into reference managers like Zotero.</p>
</div>
<div class="section level4">
<h4 id="cff-file-format">CFF file format<a class="anchor" aria-label="anchor" href="#cff-file-format"></a>
</h4>
<p>A CFF file is using the <a href="https://yaml.org/" class="external-link">YAML</a>
key-value pair format. At a minimum a CFF file must contain the title of
the software/data, the type of asset (software or data) and at least one
author:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> My Software</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Anne</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Researcher</span></span></code></pre>
</div>
<p>Additional and optional metadata includes an abstract, repository URL
and more.</p>
</div>
<div class="section level4">
<h4 id="creating-cff-file-and-making-your-software-citable">Creating CFF file and making your software citable<a class="anchor" aria-label="anchor" href="#creating-cff-file-and-making-your-software-citable"></a>
</h4>
<p>We can create (and later update) a CFF file for our software using an
online application called <a href="https://bit.ly/cffinit" class="external-link"><code>cffinit</code></a> by following
these steps:</p>
<ol style="list-style-type: decimal">
<li><p>Head to <a href="https://bit.ly/cffinit" class="external-link"><code>cffinit</code>
online tool</a>.</p></li>
<li>
<p>Then, work through the metadata input form to complete the
minimum information needed to generate a CFF.</p>
<p>We can use the following description as an “Abstract”: “A Python
script to analyse NASA extravehicular activity data”</p>
<p>Add the URL of the code repository as a “Related Resources”.</p>
<p>Add at least two key words under the “Keywords” section.</p>
</li>
<li><p>At the end of the process, download the CFF file and inspect it.
It should look like this:</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Spacewalks</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Jaffa</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="at">    </span><span class="fu">name-particle</span><span class="kw">:</span><span class="at"> Sarah</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Aleksandra</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Nenadic</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Kamilla</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Kopec-Harding</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="fu">repository-code</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>  https://github.com/YOUR-REPOSITORY-URL/spacewalks.git</span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>  A Python script to analyse NASA extravehicular activity</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>  data</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="fu">keywords</span><span class="kw">:</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> NASA</span></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Extravehicular activity</span></span></code></pre>
</div>
<p>CFF files can also be updated using the <code>cffinit</code> online
tool by pasting the previous version of CFF file and working through the
form to update various fields.</p>
</div>
<div class="section level4">
<h4 id="citing">Citing<a class="anchor" aria-label="anchor" href="#citing"></a>
</h4>
<p>To cite our software (or dataset), once a CFF file has been pushed to
our remote repository, GitHub’s “Cite this repository” button can be
used to generate a citation in various formats (APA, BibTeX).</p>
<div id="section" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="section" class="callout-inner">
<h3 class="callout-title"></h3>
<div class="callout-content">
<p>Further information is available from the <a href="https://book.the-turing-way.org/communication/citable/citable-cff.html" class="external-link">Turing
Way’s guide to software citation</a>.</p>
</div>
</div>
</div>
<div id="spacewalks-software-citation" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="spacewalks-software-citation" class="callout-inner">
<h3 class="callout-title">Spacewalks software citation</h3>
<div class="callout-content">
<p>Add the citation file for our Spacewalks software to the root folder
of our repository on GitHub. You can either do it directly on GitHub or
creating the file locally and the committing and pushing to GitHub from
the command line.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="documentation-tools">Documentation tools<a class="anchor" aria-label="anchor" href="#documentation-tools"></a>
</h2>
<hr class="half-width">
<p>Once our project reaches a certain size or level of complexity we may
want to add additional documentation such as a standalone tutorial or
“background” explaining our methodological choices.</p>
<p>Once we move beyond using a README as our primary source of
documentation, we need to consider how we will distribute our
documentation to our users. Options include:</p>
<ul>
<li>A <code>docs/</code> folder of Markdown files</li>
<li>Adding a Wiki to our repository</li>
<li>Creating a set of web pages for our documentation using a static
site generator for our documentation such as Sphinx or MkDocs.</li>
</ul>
<p>Creating a static site is a popular solution as it has the key
benefit being able to automatically generate a reference manual from any
docstrings we have added to our code.</p>
<div class="section level3">
<h3 id="mkdocs">MkDocs<a class="anchor" aria-label="anchor" href="#mkdocs"></a>
</h3>
<p>Let’s setup the static documentation site generator tool MkDocs.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> pip install mkdocs</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> pip install <span class="st">"mkdocstrings[python]"</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> pip install mkdocs-material</span></code></pre>
</div>
<p>Let’s creates a new MkDocs project in the current directory:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># In ~/Desktop/spacewalks</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">mkdocs</span> new .    </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Writing config file: ./mkdocs.yml
INFO    -  Writing initial docs: ./docs/index.md</code></pre>
</div>
<p>This command creates a new MkDocs project in the current directory
with a <code>docs</code> folder containing an <code>index.md</code> file
and a <code>mkdocs.yml</code> configuration file in the root of our
project.</p>
<p>Now, let’s fill in the <code>mkdocs.yml</code> configuration file for
our project.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">site_name</span><span class="kw">:</span><span class="at"> Spacewalks Documentation</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">use_directory_urls</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"material"</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">font</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="fu">nav</span><span class="kw">:</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Spacewalks Documentation</span><span class="kw">:</span><span class="at"> index.md</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Tutorials</span><span class="kw">:</span><span class="at"> tutorials.md</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">How-To Guides</span><span class="kw">:</span><span class="at"> how-to-guides.md</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Reference</span><span class="kw">:</span><span class="at"> reference.md</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Background</span><span class="kw">:</span><span class="at"> explanation.md</span></span></code></pre>
</div>
<p>Note <code>font: false</code> variable is for GDPR compliance;
<code>use_directory_url: false</code> variable tells MKDocs tools how to
handle URLs for documentation that is served as a website (we will cover
this in a moment).</p>
<p>Let’s add support for <code>mkdocstrings</code> - this will allow us
to automatically our docstrings into our documentation using a simple
tag.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">site_name</span><span class="kw">:</span><span class="at"> Spacewalks Documentation</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">use_directory_urls</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"material"</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">font</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="fu">nav</span><span class="kw">:</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Spacewalks Documentation</span><span class="kw">:</span><span class="at"> index.md</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Tutorials</span><span class="kw">:</span><span class="at"> tutorials.md</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">How-To Guides</span><span class="kw">:</span><span class="at"> how-to-guides.md</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Reference</span><span class="kw">:</span><span class="at"> reference.md</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Background</span><span class="kw">:</span><span class="at"> explanation.md</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="fu">plugins</span><span class="kw">:</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> mkdocstrings</span></span></code></pre>
</div>
<p>Let’s populate our <code>docs/</code> folder to match our
configuration file.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/tutorials.md</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/how-to-guides.md</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/reference.md</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/explanation.md</span></code></pre>
</div>
<p>Let’s populate our reference file <code>reference.md</code> with some
preamble to include before the reference manual that will be generated
from the docstrings we created.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>This file documents the key functions in the Spacewalks tool.</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>It is provided as a reference manual.</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>::: eva_data_analysis</span></code></pre>
</div>
<p>Finally, let’s build our documentation.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdocs build</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Cleaning site directory
INFO    -  Building documentation to directory: /Users/AnnResearcher/Desktop/Spacewalks/site
WARNING -  griffe: eva_data_analysis.py:105: No type or annotation for returned value 'int'
WARNING -  griffe: eva_data_analysis.py:84: No type or annotation for returned value 1
WARNING -  griffe: eva_data_analysis.py:33: No type or annotation for returned value 1
INFO    -  Documentation built in 0.31 seconds</code></pre>
</div>
<p>Once the build step is completed, our documentation site is saved to
a <code>site</code> folder in the root of our project folder. These
files will be distributed with our code. We can either direct users to
read these files locally on their own device using their browser, or we
can choose to host our documentation as a website that our uses can
navigate to.</p>
<p>Note that we used the setting <code>use_directory_urls: false</code>
in the <code>mkdocs.yml</code> file. This setting ensures that the
documentation site is generated with URLs that are easy to navigate
locally on a user’s device.</p>
<div id="explore-your-documentation" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="explore-your-documentation" class="callout-inner">
<h3 class="callout-title">Explore your documentation</h3>
<div class="callout-content">
<p>Explore documentation in <code>site/</code> folder built with MkDocs
for your project, starting from <code>index.html</code> file.</p>
<p>For example, check <code>site/reference.html</code> to see how
docstrings from your functions are provided here as a reference
manual.</p>
</div>
</div>
</div>
<p>Finally, let us commit our documentation to the main branch of our
git repository and push the changes to GitHub.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add mkdocs.yml </span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add docs/</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add site/</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add project-level documentation"</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt </span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Added mkdocs plugin"</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<div id="hosting-documentation" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="hosting-documentation" class="callout-inner">
<h3 class="callout-title">Hosting documentation</h3>
<div class="callout-content">
<p>We saw how MkDocs documentation can be distributed with our
repository and viewed “offline” using a browser.</p>
<p>We can also make our documentation available as a live website by
deploying our documentation to a hosting service.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Some options for hosting documentation </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<div class="section level3">
<h3 id="github-pages">GitHub Pages<a class="anchor" aria-label="anchor" href="#github-pages"></a>
</h3>
<p>As our repository is hosted in GitHub, we can use GitHub Pages - a
service that allows GitHub users to host websites directly from their
GitHub repositories.</p>
<p>There are two types of GitHub Pages: project pages and
user/organization Pages. While similar, they have different deployment
workflows, and we will only discuss project pages here. For information
about deploying to user/organisational pages, see <a href="https://www.mkdocs.org/user-guide/deploying-your-docs/" class="external-link">MkDocs
Deployment pages</a>.</p>
<p>Project Pages deploy site files to a branch (by default the
<code>gh-pages</code> branch, but it can be any other branch) within the
project repository. To deploy our documentation:</p>
<blockquote>
<p><strong>Warning!</strong> Before we proceed to the next step, we MUST
ensure that there are no uncommitted changes or untracked files in our
repository.</p>
<p>If there are, the commands used in the upcoming steps will include
them in our documentation!</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>(If not done already), let us commit our documentation to the main
branch of our git repository and push the changes to GitHub.</li>
</ol>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add mkdocs.yml </span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add docs/</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add site/</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add project-level documentation"</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Once we are on the main branch and all our changes are up to date,
run the following command from the command line termindal to deploy our
documentation to GitHub.</li>
</ol>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Important: </span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co"># - This command will push the documentation to the gh-pages branch of your repository</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co"># - It will ALSO include uncommitted changes and untracked files (read the warning above!!) &lt;- VERY IMPORTANT!!</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdocs gh-deploy</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Cleaning site directory
INFO    -  Building documentation to directory: /Users/AnnResearch/Desktop/Spacewalks/site
WARNING -  griffe: eva_data_analysis.py:105: No type or annotation for returned value 'int'
WARNING -  griffe: eva_data_analysis.py:84: No type or annotation for returned value 1
WARNING -  griffe: eva_data_analysis.py:33: No type or annotation for returned value 1
INFO    -  Documentation built in 0.37 seconds
WARNING -  Version check skipped: No version specified in previous deployment.
INFO    -  Copying '/Users/AnnResearcher/Desktop/Spacewalks/site' to 'gh-pages' branch and pushing to
           GitHub.
Enumerating objects: 63, done.
Counting objects: 100% (63/63), done.
Delta compression using up to 11 threads
Compressing objects: 100% (60/60), done.
Writing objects: 100% (63/63), 578.91 KiB | 7.93 MiB/s, done.
Total 63 (delta 7), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (7/7), done.
remote:
remote: Create a pull request for 'gh-pages' on GitHub by visiting:
remote:      https://github.com/kkh451/spacewalks/pull/new/gh-pages
remote:
To https://github.com/kkh451/spacewalks-dev.git
 * [new branch]      gh-pages -&gt; gh-pages
INFO    -  Your documentation should shortly be available at: https://kkh451.github.io/spacewalks/</code></pre>
</div>
<p>This command will build our documentation with MkDocs, then commit
and push the files to the <code>gh-pages</code> branch using the GitHub
<code>ghp-import</code> tool which is installed as a dependency of
MkDocs.</p>
<p>For more options, use:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">mkdocs</span> gh-deploy <span class="at">--help</span></span></code></pre>
</div>
<p>Notice that the deploy command did not allow us to preview the site
before it was pushed to GitHub; so, it is a good idea to check changes
locally with the build commands before deploying.</p>
</div>
<div class="section level3">
<h3 id="other-options">Other options<a class="anchor" aria-label="anchor" href="#other-options"></a>
</h3>
<p>You can find out about other deployment options including free
documentation hosting service ReadTheDocs on the <a href="https://www.mkdocs.org/user-guide/deploying-your-docs/" class="external-link">MkDocs
deployment pages</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="documentation-guides">Documentation guides<a class="anchor" aria-label="anchor" href="#documentation-guides"></a>
</h2>
<hr class="half-width">
<p>Once we start to consider other forms of documentation beyond the
README, we can also increase reusability of our code by ensuring that
the content and style of our documentation matches its purpose.</p>
<p>Documentation guides such as <a href="https://www.writethedocs.org/" class="external-link">Write the Docs</a>, <a href="https://www.thegooddocsproject.dev/" class="external-link">The Good Docs Project</a> and
the <a href="https://diataxis.fr/" class="external-link">Diataxis framework</a> provide a
range of resources including documentation templates to help to help us
do this.</p>
<div id="spacewalks-how-to-guide" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="spacewalks-how-to-guide" class="callout-inner">
<h3 class="callout-title">Spacewalks how-to guide</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha">
<li><p>Review the Diataxis guidance page on writing a How-to guide.
Identify three features of an effective how-to guide.</p></li>
<li><p>Following the Diataxis guidelines, add a how-to guide to the
<code>docs/how-to-guides.md</code> file in your documentation folder to
show users how to change the destination filename for the output CSV
dataset generated by the Spacewalks software.</p></li>
</ol>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Discussion hints &amp; solution </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>An effective how-to guide should:</p>
<ul>
<li>be goal oriented and focus on action.</li>
<li>avoid teaching or explanation</li>
<li>use appropriate language e.g. conditional imperatives</li>
<li>have an informative title</li>
</ul>
<p>An example how-to guide for our project to the file
<code>docs/how-to-guides.md</code>:</p>
<pre><code># How to change the file path of Spacewalk's output dataset

This guide shows you how to set the file path for Spacewalk's output
data set to a location of your choice.

By default, the cleaned data set in CSV format, generated by the Spacewalk software, is saved to the `results/`
folder within the working directory with file name `eva-data.csv`.

If you would like to modify the name or location of the output dataset, set the
second command line argument to your chosen file path.
For example, if you want to save the output data set to the subfolder `data/clean/` you can
invoke the script as:

`(venv_spacewalks) $ python3 eva_data_analysis.py eva-data.json data/clean/eva-data-clean.csv`

The specified destination folder `data/clean/` must exist before running spacewalks analysis script.</code></pre>
<p>Remember to rebuild your documentation:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdocs build</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The Diataxis framework provides guidance for developing technical
documentation for different purposes. Tutorials differ in purpose and
scope to how-to guides, and as a result, differ in content and
style.</p>
<div id="spacewalks-tutorial" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="spacewalks-tutorial" class="callout-inner">
<h3 class="callout-title">Spacewalks tutorial</h3>
<div class="callout-content">
<p>Let’s adapt the how-to guide from the previous challenge into a
tutorial that explains how to change the file path for the output
dataset when running the analysis script.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Solution </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<p>Here is what an example tutorial may look like.</p>
<div class="section level4">
<h4 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h4>
<p>In this tutorial, we will learn how to change the file path for the
output dataset generated by the Spacewalk software. By the end of this
tutorial, you will be able to specify a custom file path for the cleaned
dataset.</p>
</div>
<div class="section level4">
<h4 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h4>
<p>Before you start, ensure you have the following:</p>
<ul>
<li>Python installed on your system</li>
<li>The Spacewalk script (<code>eva_data_analysis.py</code>)</li>
<li>An input dataset (<code>eva-data.json</code>)</li>
</ul>
</div>
<div class="section level4">
<h4 id="prepare-the-destination-directory">Prepare the destination directory<a class="anchor" aria-label="anchor" href="#prepare-the-destination-directory"></a>
</h4>
<p>First, let us decide where we want to save the cleaned dataset and
make sure the directory exists.</p>
<p>For this tutorial, we will use <code>data/clean/</code> as the
destination folder.</p>
<p>Let’s create the directory if it does not exist - e.g. from the
command line do:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdir <span class="at">-p</span> data/clean</span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="run-the-analysis-script-with-a-custom-path">Run the analysis script with a custom path<a class="anchor" aria-label="anchor" href="#run-the-analysis-script-with-a-custom-path"></a>
</h4>
<p>Next, execute the Spacewalk script and specify the custom file path
for the output dataset:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py <span class="op">&lt;</span>input-file<span class="op">&gt;</span> <span class="op">&lt;</span>output-file<span class="op">&gt;</span></span></code></pre>
</div>
<p>Replace <input-file> with your input dataset
(<code>data/eva-data.json</code>) and <output-file> with your desired
output path (<code>data/clean/eva-data-clean.csv</code>).</output-file></input-file></p>
<p>Here is the complete command:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py data/eva-data.json data/clean/eva-data-clean.csv</span></code></pre>
</div>
<p>Notice how the output to the command line clearly indicates that we
are using a custom output file path.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using custom input and output filenames
Reading JSON file data/eva-data.json
Saving to CSV file data/clean/eva-data-clean.csv
Adding crew size variable (crew_size) to dataset
Saving to CSV file data/clean/eva-data-clean.csv
Plotting cumulative spacewalk duration and saving to results/cumulative_eva_graph.png</code></pre>
</div>
<p>After running the script, let us check the <code>data/clean</code>
directory to ensure the cleaned dataset has been saved correctly.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> ls data/clean</span></code></pre>
</div>
<p>You should see <code>eva-data-clean.csv</code> file listed in the
<code>data/clean</code> folder.</p>
</div>
<div class="section level4">
<h4 id="exercise-custom-output-path">Exercise: custom output path<a class="anchor" aria-label="anchor" href="#exercise-custom-output-path"></a>
</h4>
<ul>
<li>Create a new directory named <code>output/data</code> in your
working directory.</li>
<li>Run the Spacewalk script to save the cleaned dataset in the newly
created <code>output/data</code> directory with the filename
<code>cleaned-eva-data.csv</code>.</li>
<li>Verify that the dataset has been saved correctly.</li>
</ul>
<div class="section level5">
<h5 id="solution-1">Solution<a class="anchor" aria-label="anchor" href="#solution-1"></a>
</h5>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co"># Create the directory:</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdir <span class="at">-p</span> output/data</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="co"># Run the script:</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py data/eva-data.json output/data/cleaned-eva-data.csv</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="co"># Verify the output:</span></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> ls output/data</span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a><span class="co"># You should see cleaned-eva-data.csv listed</span></span></code></pre>
</div>
<p>Congratulations! You have successfully changed the file path for
Spacewalks output dataset and completed an exercise to practice the
process. You can now customize the output location and filename
according to your needs.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have seen examples of both a how-to guide and a tutorial,
let’s compare the two.</p>
<div id="tutorial-vs.-how-to-guide" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="tutorial-vs.-how-to-guide" class="callout-inner">
<h3 class="callout-title">Tutorial vs. how-to guide</h3>
<div class="callout-content">
<p>How does the content and language of our example tutorial differ from
our example how-to guide?</p>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Discussion hints </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" aria-labelledby="headingSpoiler4" data-bs-parent="#accordionSpoiler4">
<div class="accordion-body">
<div class="section level4">
<h4 id="content">Content<a class="anchor" aria-label="anchor" href="#content"></a>
</h4>
<ul>
<li>The tutorial clearly signposts what will be covered</li>
<li>The tutorial includes a narrative of each step and the expected
output</li>
<li>The tutorial highlights important behaviour the learner should
notice</li>
<li>The tutorial includes an exercise to practice skills</li>
</ul>
</div>
<div class="section level4">
<h4 id="language">Language<a class="anchor" aria-label="anchor" href="#language"></a>
</h4>
<ul>
<li>The tutorial uses the “we” language</li>
<li>The tutorial uses imperative to provide clear instructions,
e.g. “First do x, then do y”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Do not forget to commit any uncommitted changes you may have and then
push your work to GitHub.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add <span class="op">&lt;</span>your_changed_files<span class="op">&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Your commit message"</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://github.com/hackergrrl/art-of-readme#bonus-the-readme-checklist" class="external-link">“The
Art of Readme”</a> article by Kira Oakley - a useful discussion of best
practices for writing a high-quality README</li>
<li>
<a href="https://www.software.ac.uk/blog/what-are-best-practices-research-software-documentation" class="external-link">What
are best practices for research software documentation?</a> (Software
Sustainability blog post) by Stephan Druskat et al.</li>
<li>
<a href="https://carpentries-incubator.github.io/python-intermediate-development/42-software-reuse/index.html" class="external-link">Preparing
Software for Reuse and Release episode</a> from the Intermediate
Research Software Development lesson on The Carpentries Incubator by
Aleksandra Nenadic et al.</li>
<li><a href="https://coderefinery.github.io/documentation/" class="external-link">CodeRefinery
lesson: How to document your research software</a></li>
<li><a href="https://citation-file-format.github.io/" class="external-link">CITATION.cff file
format</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Documentation allows users to run and understand software without
having to work things out for themselves directly from the source
code.</li>
<li>Software documentation supports the FAIR principles by improving the
reusability of research code.</li>
<li>A (good) README, CITATION file and LICENSE file are the minimum
documentation elements required to support FAIR research code.</li>
<li>Documentation can be provided to users in a variety of formats
including a <code>docs</code> folder of Markdown files, a repository
Wiki and static webpages.</li>
<li>A static documentation site can be created using the tool
MkDocs.</li>
<li>Documentation frameworks such as Diataxis provide content and style
guidelines that can helps us write high quality documentation.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-10-open-collaboration"><p>Content from <a href="10-open-collaboration.html">Open code &amp; collaboration</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/10-open-collaboration.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I ensure my code is citable?</li>
<li>How do we track issues with code in GitHub?</li>
<li>How can we ensure that multiple developers can work on the same
files simultaneously?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Understand how to archive code to Zenodo and create a digital object
identifier (DOI) for a software project (and include that info in
CITATION.cff).</li>
<li>Understand how to track issues with code in GitHub.</li>
<li>Understand how to use Git branches for working on code in parallel
and how to merge code back using pull requests.</li>
<li>Apply issue tracking, branching and pull requests together to fix
bugs while allowing other developers to work on the same code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Sharing code openly promotes collaboration, transparency, and
innovation by allowing others to review, use, and improve the code. It
fosters knowledge exchange, accelerates scientific progress, and
enhances the reproducibility of research. Additionally, open sharing
encourages community contributions and can lead to better-maintained,
more reliable software.</p>
<p>Adding a <a href="licensing.html">license</a> and other metadata to
our code (covered in the previous episode) are the first steps towards
sharing the code publicly. There are several other important steps to
consider which we will cover here.</p>
<div id="activate-your-virtual-environment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="activate-your-virtual-environment" class="callout-inner">
<h3 class="callout-title">Activate your virtual environment</h3>
<div class="callout-content">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="sharing-code-to-encourage-collaboration">Sharing code to encourage collaboration<a class="anchor" aria-label="anchor" href="#sharing-code-to-encourage-collaboration"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="making-the-code-public">Making the code public<a class="anchor" aria-label="anchor" href="#making-the-code-public"></a>
</h3>
<p>By default repositories created on Github are private and only their
creator can see them. Since we added an open source license to our
repository we probably want to make sure people can actually access
it.</p>
<p>To make your repository public, if it is not already, go to your
repository on GitHub and click on the <code>Settings</code> link near
the top right corner. Then scroll down to the bottom of the page and the
“Danger Zone” settings. Click on “Change Visibility” and you should see
a message saying “Change to public”. If it says “Change to private” then
the repository is already public. You will then be asked to confirm that
you indeed want to make the repository public and agree to the warning
that the code will now be publicly visible. As a security measure, you
will then have to put in your GitHub password.</p>
</div>
<div class="section level3">
<h3 id="transferring-to-an-organisation">Transferring to an organisation<a class="anchor" aria-label="anchor" href="#transferring-to-an-organisation"></a>
</h3>
<p>Currently our repository is under the GitHub “namespace” of our
individual user. This is OK for individual projects where we are the
sole or at least the main code author, but for bigger and more complex
projects it is common to use a GitHub organisation named after our
project. If we are a member of an organisation and have the appropriate
permissions then we can transfer a repository from our personal
namespace to the organisation’s. This can be done with another option in
the “Danger Zone” settings, the “Transfer ownership” button. Pressing
this will then prompt us as to which organisation we want to transfer
the repository to.</p>
</div>
<div class="section level3">
<h3 id="archiving-code-to-zenodo-and-obtaining-a-doi">Archiving code to Zenodo and obtaining a DOI<a class="anchor" aria-label="anchor" href="#archiving-code-to-zenodo-and-obtaining-a-doi"></a>
</h3>
<p><a href="https://zenodo.org/" class="external-link">Zenodo</a> is a data archive run by
CERN. Anybody can upload datasets up to 50GB to it and receive a Digital
Object Identifier (DOI). Zenodo’s definition of a dataset is quite broad
and can include code - which gives us a way to obtain a DOI for our
software. We can archive our GitHub repository to Zenodo by doing the
following:</p>
<ol style="list-style-type: decimal">
<li>Go to the <a href="https://zenodo.org/login" class="external-link">Zenodo Login page</a>
and choose to login with GitHub.</li>
<li>Authorise Zenodo to connect to GitHub.</li>
<li>Go to the <a href="https://zenodo.org/account/settings/github/" class="external-link">GitHub page</a> in
your Zenodo account. This can be found in the pull down menu with your
user name in the top right corner of the screen.</li>
<li>You’ll now have a list of all of your GitHub repositories. Next to
each will be an “On” button. If you have created a new repository you
might need to press the “Sync” button to update the list of repositories
Zenodo knows about.</li>
<li>Press the “On” button for the repository you want to archive. If
this was successful you will be told to refresh the page.</li>
<li>The repository should now appear in the list of “Enabled”
repositories at the top of the screen, but it does not yet have a DOI.
To get one we have to make a “release” on GitHub. Click on the
repository and then press the green button to create a release. This
will take you to GitHub’s release page where you will be asked to give a
title and description of the release. You will also have to create a
“tag” for your release - a way of having a friendly name for the version
of some code in Git instead of using a long hash code. Often we will
create a sequential version number for each release of the software and
have the tag name match this, for example v1.0 or just 1.0.</li>
<li>If we now refresh the Zenodo page for this repository we will see
that it has been assigned a DOI.</li>
</ol>
<p>The DOI does not just link to GitHub, Zenodo will have taken a copy
(a snapshot) of our repository at the point where we tagged the release.
This means that even if we delete it from GitHub or even if Github were
ever to go away or remove it, there will still be a copy on Zenodo.
Zenodo will allow people to download the entire repository as a single
<code>zip</code> file.</p>
<p>Zenodo will have actually created two DOIs for you. One represents
the latest version of the software and will always represent the latest
if you make more releases. The other is specific to the release you made
and will always point to that version. We can see both of these by
clicking on the DOI link in the Zenodo page for the repository.</p>
<p>One of the things which is displayed on this page is a badge image
that you can copy the link for and add to the README file in your GitHub
repository so that people can find the Zenodo version of the repository.
If you click on the DOI image in the Details section of the Zenodo page
then you will be shown instructions for obtaining a link to the DOI
badge in various formats including Markdown. Here is the badge for this
repository and the corresponding Markdown:</p>
<p><a href="https://doi.org/10.5281/zenodo.11869450" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.11869450.svg" alt="DOI" class="figure"></a></p>
<pre class="text"><code>[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.11869450.svg)](https://doi.org/10.5281/zenodo.11869450)</code></pre>
<div id="archive-your-repository-to-zenodo" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="archive-your-repository-to-zenodo" class="callout-inner">
<h3 class="callout-title">Archive your repository to Zenodo</h3>
<div class="callout-content">
<p>Note: for this exercise, you should use the <a href="https://sandbox.zenodo.org/" class="external-link">Sandbox Zenodo</a> (which is a
version of Zenodo for testing and playing with before minting a real
DOI) to avoid polluting the DOI space with test repositories we use for
this course.</p>
<ul>
<li>Create an account on Zenodo that is linked to your GitHub
account.</li>
<li>Use Zenodo to create a release for your repository and obtain a DOI
for it.</li>
<li>Get the link to the DOI badge for your repository and add a link to
this image to your README file in Markdown format. Check that this is
the DOI for the latest version and not the DOI for a specific version,
if not you’ll be updating this every time you make a release.</li>
</ul>
</div>
</div>
</div>
<div id="problems-with-github-and-zenodo-integration" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="problems-with-github-and-zenodo-integration" class="callout-inner">
<h3 class="callout-title">Problems with Github and Zenodo integration</h3>
<div class="callout-content">
<p>The integration between Github and Zenodo does not interact well with
some browser privacy features and extensions. Firefox can be
particularly problematic with this and might open new tabs to login to
GitHub and then give an error saying:
<code>Your browser did something unexpected.  Please try again. If the error continues, try disabling all browser extensions.</code>
If this happens try disabling the extra privacy features/extensions or
using another browser such as Chrome.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="adding-a-doi-and-orcid-to-the-citation-file">Adding a DOI and ORCID to the citation file<a class="anchor" aria-label="anchor" href="#adding-a-doi-and-orcid-to-the-citation-file"></a>
</h3>
<p>Now that we have our DOI it is good practice to include this
information in our citation file. Earlier we created a
<code>CITATION.cff</code> file with information about how to cite our
code. There are a few fields we can add now which are related to the
DOI; one of these is the <code>version</code> file which covers the
version number of the software. We can add a DOI to the file in the
<code>identifiers</code> section with a type of <code>doi</code> and
<code>value</code> of the Zenodo URL. Optionally we can also add a
<code>date-released</code> field indicating the date we released this
software. Here is an updated version of our <code>CITATION.cff</code>
from the previous episode with a version number, DOI and release date
added.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Spacewalks</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Jaffa</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="at">    </span><span class="fu">name-particle</span><span class="kw">:</span><span class="at"> Sarah</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Aleksandra</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Nenadic</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Kamilla</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Kopec-Harding</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="fu">repository-code</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>  https://github.com/YOUR-REPOSITORY-URL/spacewalks.git</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>  A Python script to analyse NASA extravehicular activity</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>  data</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="fu">keywords</span><span class="kw">:</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> NASA</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Extravehicular activity</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.1</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="fu">identifiers</span><span class="kw">:</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> doi</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="at">    </span><span class="fu">value</span><span class="kw">:</span><span class="at"> 10.5281/zenodo.1234</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a><span class="fu">date-released</span><span class="kw">:</span><span class="at"> 2024-06-01</span></span></code></pre>
</div>
<div id="add-a-doi-to-your-citation-file" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="add-a-doi-to-your-citation-file" class="callout-inner">
<h3 class="callout-title">Add a DOI to your citation file</h3>
<div class="callout-content">
<p>Add the DOI you were allocated in the previous exercise to your
<code>CITATION.cff</code> file and then commit and push the updated
version to your GitHub repository. If you used the <code>commit</code>
field in your <code>CITATION.cff</code> file before to point to a given
version of the code - you can now remove it as using the DOI field is
better for this job.</p>
</div>
</div>
</div>
<div id="going-further-with-publishing-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="going-further-with-publishing-code" class="callout-inner">
<h3 class="callout-title">Going further with publishing code</h3>
<div class="callout-content">
<p>We now have our code published online, licensed as open source,
archived with Zenodo, accessible via a DOI and with a citation file to
encourage people to cite it. What else might we want to do in order to
improve how findable, accessible or reusable it is? One further step we
could take is to publish the code with a peer reviewed journal. Some
traditional journals will accept software submissions, although these
are usually as a supplementary material for a paper. There also journals
which specialise in research software such as the <a href="https://openresearchsoftware.metajnl.com/" class="external-link">Journal of Open
Research Software</a>, <a href="https://joss.theoj.org/" class="external-link">The Jornal of
Open Source Software</a> or <a href="https://www.sciencedirect.com/journal/softwarex" class="external-link">SoftwareX</a>.
With these venues, the submission will be the software itself and not a
paper, although a short abstract or description of the software is often
required.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="working-with-collaborators">Working with collaborators<a class="anchor" aria-label="anchor" href="#working-with-collaborators"></a>
</h2>
<hr class="half-width">
<p>The strength of online collaboration platforms such as GitHub does
not just lie in the ability to share code. They also allow us to track
problems with that code, for multiple developers to work on it
independently and bring their changes together and to review those
changes before they are accepted.</p>
<div class="section level3">
<h3 id="tracking-issues-with-code">Tracking issues with code<a class="anchor" aria-label="anchor" href="#tracking-issues-with-code"></a>
</h3>
<p>A key feature of GitHub (as opposed to Git itself) is the issue
tracker. This provides us with a place to keep track of any problems or
bugs in the code and to discuss them with other developers. Sometimes
advanced users will also use issue trackers of public projects to report
problems they are having (and sometimes this is misused by users seeking
help using documented features of the program).</p>
<p>The code from the testing chapter earlier has a bug with an extra
bracket in eva_data_analysis.py (and if you have fixed that a missing
import of summarise_categorical in the test). Let’s go ahead and create
a new issue in our GitHub repository to describe this problem. We can
find the issue tracker on the “Issues” tab in the top left of the Github
page for the repository. Click on this and then click on the green “New
Issue” button on the right hand side of the screen. We can then enter a
title and description of our issue.</p>
<p>A good issue description should include:</p>
<ul>
<li>What the problem is, including any error messages that are
displayed.</li>
<li>What version of the software it occurred with.</li>
<li>Any relevant information about the system running it, for example
the operating system being used.</li>
<li>Versions of any dependent libraries.</li>
<li>How to reproduce it.</li>
</ul>
<p>After the issue is created it will be assigned a sequential ID
number.</p>
<div id="write-an-issue-to-describe-our-bug" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="write-an-issue-to-describe-our-bug" class="callout-inner">
<h3 class="callout-title">Write an issue to describe our bug</h3>
<div class="callout-content">
<p>Create a new issue in your repository’s issue tracker by doing the
following:</p>
<ul>
<li>Go to the Github webpage for your code</li>
<li>Click on the Issues tab</li>
<li>Click on the “New issue” button</li>
<li>Enter a title and description for the issue</li>
<li>Click the “Submit Issue” button to create the issue.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="discussing-an-issue">Discussing an issue<a class="anchor" aria-label="anchor" href="#discussing-an-issue"></a>
</h3>
<p>Once the issue is created, further discussion can take place with
additional comments. These can include code snippets and file
attachments such as screenshots or logfiles. We can also reference other
issues by writing a # symbol and the number of the other issue. This is
sometimes used to identify related issues or if an issue is a
duplicate.</p>
</div>
<div class="section level3">
<h3 id="closing-an-issue">Closing an issue<a class="anchor" aria-label="anchor" href="#closing-an-issue"></a>
</h3>
<p>Once an issue is solved then it can be closed. This can be done
either by pressing the “Close” button in the Github web interface or by
making a commit which includes the word “fixes”, “fixed”, “close”,
“closed” or “closes” followed by a # symbol and the issue number.</p>
</div>
<div class="section level3">
<h3 id="working-in-parallel-with-git-branches">Working in parallel with Git branches<a class="anchor" aria-label="anchor" href="#working-in-parallel-with-git-branches"></a>
</h3>
<p>Branching is a feature of Git that allows two or more parallel
streams of work. Commits can be made to one branch without interfering
with another. Branches are commonly used as a way for one developer to
work on a new feature or a bug fix while other developers work on other
features. When those new features or bug fixes are complete, the branch
will be merged back with the <code>main</code> (sometimes called the
<code>master</code>) branch.</p>
<div class="section level4">
<h4 id="creating-a-new-branch">Creating a new branch<a class="anchor" aria-label="anchor" href="#creating-a-new-branch"></a>
</h4>
<p>New Git branches are created with the <code>git branch</code>
command. This should be followed by the name of the branch to create. It
is common practice when the bug we are fixing has a corresponding issue
to name the branch after the issue number and name. For example, we
might call the branch <code>01-extra-bracket-bug</code> instead of
something less descriptive like <code>bugfix</code>.</p>
<p>For example, the command:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git branch 01-extra-bracket-bug</span></code></pre>
</div>
<p>will create a new branch called <code>01-extra-bracket-bug</code>. We
can view the names of all the branches by running
<code>git branch</code> with no parameters. By default there should be
one branch called <code>main</code> (formerly <code>master</code>) and
our new <code>01-extra-bracket-bug</code> branch. The command will put
<code>*</code> next to the currently active branch.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git branch</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  01-extra-bracket-bug
* main</code></pre>
</div>
<p>We can see that creating a new branch has not activated that branch.
To switch branches we can either use the <code>git switch</code> or
<code>git checkout</code> command followed by the branch name. For
example:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch 01-extra-bracket-bug</span></code></pre>
</div>
<p>To create a branch and change to it in a single command we can use
<code>git switch</code> with the <code>-c</code> option (or
<code>git checkout</code> with the <code>-b</code> option). Note that
<code>git switch</code> command is only available in more recent
versions of Git.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch <span class="at">-c</span> 02-another-bug</span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="committing-to-a-branch">Committing to a branch<a class="anchor" aria-label="anchor" href="#committing-to-a-branch"></a>
</h4>
<p>Once we have switched to a branch any further commits that are made
will go to that branch. When we run a <code>git commit</code> command we
will see the name of the branch we are committing to in the output of
<code>git commit</code>. Let’s edit our code and fix the lack of default
values bug that we entered into the issue tracker earlier on.</p>
<p>Change your code from:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&lt;</span>call to pandas without checks identified <span class="kw">in</span> testing section<span class="op">&gt;</span></span></code></pre>
</div>
<p>to:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="op">&lt;</span>call to pandas <span class="cf">with</span> checks identified <span class="kw">in</span> testing section<span class="op">&gt;</span></span></code></pre>
</div>
<p>and now commit it.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"fixed bug"</span> eva_data_analysis.py</span></code></pre>
</div>
<p>In the output of <code>git commit -m</code> the first part of the
output line will show the name of the branch we just made the commit
to.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[01-extra-brakcet-bug 330a2b1] fixes missing values bug, closes #01 </code></pre>
</div>
<p>If we now switch back to the <code>main</code> branch our new commit
will no longer be there in the source file or the output of
<code>git log</code>.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch main</span></code></pre>
</div>
<p>And if we go back to the <code>01-extra-bracket-bug</code> branch it
will re-appear.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch 01-extra-bracket-bug</span></code></pre>
</div>
<p>If we want to push our changes to a remote such as GitHub we have to
tell the <code>git push</code> command which branch to push to. If the
branch doesn’t exist on the remote (as it currently won’t) then it will
be created.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin 01-extra-bracket-bug</span></code></pre>
</div>
<p>If we now refresh the GitHub webpage for this repository we should
see the bugfix branch has appeared in the list of branches.</p>
<p>If we needed to pull changes from a branch on a remote (for example
if we have made changes on another computer or via GitHub’s web based
editor), then we can specify a branch on a <code>git pull</code>
command.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">git</span> pull origin 01-extra-bracket-bug</span></code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="merging-branches">Merging branches<a class="anchor" aria-label="anchor" href="#merging-branches"></a>
</h3>
<p>When we have completed working on a branch (for example fixing a bug)
then we can merge our branch back into the main one (or any other
branch). This is done with the <code>git merge</code> command.</p>
<p>This must be run on the <em>TARGET</em> branch of the merge, so we
will have to use a <code>git switch</code> command to set this.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch main</span></code></pre>
</div>
<p>Now we are back on the main branch we can go ahead and merge the
changes from the bugfix branch:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git merge 01-extra-bracket-bug</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="pull-requests">Pull requests<a class="anchor" aria-label="anchor" href="#pull-requests"></a>
</h3>
<p>On larger projects we might need to have a code review process before
changes are merged, especially before they are merged onto the main
branch that might be what is being released as the public version of the
software. GitHub has a process for this that is called a <strong>pull
request</strong>. Other Git services such as GitLab have different names
for this; GitLab calls them <strong>merge requests</strong>. Pull
requests are situations where one developer requests that another merges
code from a branch (or “pull” it from another copy of the repository).
The person receiving the request then has the chance to review the code,
write comments suggesting changes or even change the code themselves
before merging it. It is also very common for automated checks of code
to be run on a pull request to ensure the code is of good quality and is
passing automated tests.</p>
<p>As a simple example of a pull request, we can now create a pull
request for the changes we made on our <code>01-extra-bracket-bug</code>
branch and pushed to GitHub earlier on. The GitHub webpage for our
repository will now be saying something like “bugfix had recent pushes
<code>n</code> minutes ago - Compare &amp; Pull request”. Click on this
button and create a new pull request.</p>
<p>Give the pull request a title and write a brief description of it,
then click the green “Create pull request” button. GitHub will then
check if we can merge this pull request without any problems. We will
look at what to do when this is not possible later on.</p>
<p>There should be a green “Merge pull request” button, but if we click
on the down arrow inside this button there are three options on how to
handle this request:</p>
<ol style="list-style-type: decimal">
<li>Create a merge commit</li>
<li>Squash and merge</li>
<li>Rebase and merge</li>
</ol>
<p>The default is option 1, which will keep all of the commits made on
our branch intact. This can be useful for seeing the whole history of
our work, but if we’ve done a lot of minor edits or attempts at fixing a
problem to fix one bug it can be excessive to have all of this history
saved. This is where the second option comes in, this will place all of
our changes from the branch into just a single commit, this might be
much more obvious to other developers who will now see our bugfix as a
single commit in the history. The third option merges the branch
histories together in a different way that doesn’t make merges as
obvious, this can make the history easier to read but effectively
rewrites the commit history and will change the commit hash IDs. Some
projects that you contribute to might have their own rules about what
kind of merge they will prefer. For the purposes of this exercise we’ll
stick with the default merge commit.</p>
<p>Go ahead and click on “Merge pull request”, then “Confirm merge”. The
changes will now be merged together. GitHub gives us the option to
delete the branch we were working on, since its history is preserved in
the main branch there is no reason to keep it.</p>
<div class="section level4">
<h4 id="using-forks-instead-of-branches">Using forks instead of branches<a class="anchor" aria-label="anchor" href="#using-forks-instead-of-branches"></a>
</h4>
<p>A fork is similar to a branch, but instead of it being part of the
same repository it is a entirely new copy of the repository. Forks are
commonly used by Github users who wish to work on a project that they
are not a member of. Typically forking will copy the repository to our
own namespace (e.g. github.com/username/reponame instead of
github.com/projectname/reponame)</p>
<p>To create a fork on github use the “Fork” button to the right of the
repository name. After we create our fork we can make some changes and
these could even be on the main branch inside our forked repository.
GitHub will track that a fork has been made displays a “Contribute”
button to create a pull request back to the original repository. Using
this we can request that the changes on our fork are incorporated by the
upstream project.</p>
<div id="practice-pull-requests" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="practice-pull-requests" class="callout-inner">
<h3 class="callout-title">Practice pull requests</h3>
<div class="callout-content">
<p>Q: Work in pairs for this exercise. Share the GitHub link of your
repository with your partner. If you have set your repository to
private, you will need to add them as a collaborator. Go to the settings
page on your Github repository’s webpage, click on Collaborators from
the left hand menu and then click the green “Add People” button and
enter the Github username or email address of your partner. They will
get an email and an alert within Github to accept your invitation to
work on this repository, without doing this they won’t be able to access
it.</p>
<ul>
<li>Now make a fork of your partners repository.</li>
<li>Edit the <code>CITATION.cff</code> file and add your name to
it.</li>
<li>Commit these changes to your fork</li>
<li>Create a pull request back to the original repository</li>
<li>Your partner will now receive your pull request and can review</li>
</ul>
</div>
</div>
</div>
<p>Do not forget to commit any uncommitted changes you may have and then
push your work to GitHub.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add <span class="op">&lt;</span>your_changed_files<span class="op">&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Your commit message"</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>Licencing and citation episodes from the <a href="https://swcarpentry.github.io/git-novice" class="external-link">Software Carpentry’s Git
Novice lesson</a>
</li>
<li>Carpentries Github Skill ups for <a href="https://carpentries-incubator.github.io/github-skill-up-instructors/" class="external-link">instructors</a>
and <a href="https://carpentries.github.io/github-skill-up-maintainers/" class="external-link">maintainers</a>
</li>
<li>
<a href="https://southampton-rsg.github.io/swc-git-novice/index.html" class="external-link">RSG
Southampton Git lesson</a> - <a href="https://southampton-rsg.github.io/swc-git-novice/06-collab/index.html" class="external-link">collaboration
section</a>
</li>
<li>
<a href="https://opensource.org/osd/" class="external-link">Open source definition</a>, by
the <a href="https://opensource.org" class="external-link">Open Source Initiative</a>
</li>
<li><a href="https://www.gnu.org/philosophy/free-sw.en.html" class="external-link">What is
free software?</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Zenodo can be used to archive a GitHub repository and obtain a DOI
for it.</li>
<li>We include a CITATION file with our code to tell people how to cite
it.</li>
<li>GitHub can help us track bugs or issues with software.</li>
<li>Git branches can be used to allow multiple developers to work on the
same part of code in parallel.</li>
<li>The <code>git branch</code> command shows the list of branches and
can create new branches.</li>
<li>The <code>git switch</code> command changes which branch we are
working on.</li>
<li>The <code>git merge</code> command merges another branch into the
current one.</li>
<li>Pull requests allow developers to work on their own branch/fork and
then request other developers review their changes before they are
merged.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-11-wrap-up"><p>Content from <a href="11-wrap-up.html">Wrap-up</a></p>
<hr>
<p>Last updated on 2024-10-11 |

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/11-wrap-up.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are the wider <strong>Research Software Development
Principles</strong> and where does FAIR fit into them?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Reflect on the <strong>Research Software Development
Principles</strong> and their relevance to own research.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this course we have explored the significance of reproducible
research and how following the FAIR principles in our own work can help
us and others do <em>better research</em>. Reproducible research often
requires that researchers implement new practices and learn new tools -
in this course we taught you some of these as a starting point but you
will discover what works best for yourself, your group, community and
domain. Some of these practices may take a while to implement and may
require perseverance, others you can start practicing today.</p>
<figure><img src="fig/plant-a-tree.jpg" alt='An image of a Chinese proverb "The best time to plant a tree was 20 years ago. The second best time is now' class="figure mx-auto d-block"><div class="figcaption">An image of a Chinese proverb “The best time to
plant a tree was 20 years ago. The second best time is now” by CCNULL,
used under a CC-BY 2.0 licence</div>
</figure><section><h2 class="section-heading" id="research-software-development-principles">Research software development principles<a class="anchor" aria-label="anchor" href="#research-software-development-principles"></a>
</h2>
<hr class="half-width">
<p>Software and people who develop it have significance within the
research environment and a broader impact on society and the planet.
FAIR research software principles cover some aspects and operate within
the wider <a href="https://rsecon24.society-rse.org/about/research-software-development-principles/" class="external-link"><strong>Research
Software Development Principles</strong></a> - recommended by Software
Sustainability Institute’s Director Neil Chue Hong during his <a href="https://rsecon24.society-rse.org/about/research-software-development-principles/#neil-chue-hong-rse23-keynote" class="external-link">keynote
at RSECon23</a>. These principles can help us explore and reflect on our
own work and guide us on a path to better research.</p>
<div class="section level3">
<h3 id="helping-your-team">Helping your team<a class="anchor" aria-label="anchor" href="#helping-your-team"></a>
</h3>
<figure><img src="fig/help-the-team.png" alt="Help the team principles of writing FAIR, secure and maintainable code" class="figure mx-auto d-block"><div class="figcaption">Helping your team, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
<div class="section level3">
<h3 id="helping-you-peers">Helping you peers<a class="anchor" aria-label="anchor" href="#helping-you-peers"></a>
</h3>
<figure><img src="fig/help-the-peers.png" alt="Help the peers principles of making your work reproducible, inclusive and credit everyone involved" class="figure mx-auto d-block"><div class="figcaption">Helping your peers, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
<div class="section level3">
<h3 id="helping-the-world">Helping the world<a class="anchor" aria-label="anchor" href="#helping-the-world"></a>
</h3>
<figure><img src="fig/help-the-world.png" alt="Help the world principles of being responsible, open and global, and humanist when developing research software" class="figure mx-auto d-block"><div class="figcaption">Helping the world, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>Please check out <a href="reference.html#litref">the following
resources</a> for some additional reading on the topic of this course
and the full reference set.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>When developing software for your research, think about how it will
help you and your team, your peers and domain/community and the
world.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/softwaresaved/fair-research-software/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/softwaresaved/fair-research-software/" class="external-link">Source</a></p>
				<p><a href="https://github.com/softwaresaved/fair-research-software/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:a.nenadic@software.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.7" class="external-link">sandpaper (0.16.7)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://softwaresaved.github.io/fair-research-software/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, FAIR, reproducibility, sustainability, open, research, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://softwaresaved.github.io/fair-research-software/aio.html",
  "identifier": "https://softwaresaved.github.io/fair-research-software/aio.html",
  "dateCreated": "2023-10-03",
  "dateModified": "2024-10-11",
  "datePublished": "2024-10-11"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

